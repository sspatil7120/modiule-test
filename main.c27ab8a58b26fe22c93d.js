(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+EQa":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){var r=e.call(this,t.name,t.sid,n)||this;Object.defineProperties(r,{_signaling:{value:t},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return t.isEnabled}},kind:{enumerable:!0,value:t.kind},publishPriority:{enumerable:!0,get:function(){return t.priority}},track:{enumerable:!0,get:function(){return this._track}}});var i=t.error,o=t.isEnabled,s=t.isSwitchedOff,a=t.priority;return t.on("updated",function(){if(i!==t.error)return i=t.error,void r.emit("subscriptionFailed",t.error);o!==t.isEnabled&&(o=t.isEnabled,r.track&&r.track._setEnabled(t.isEnabled),r.emit(t.isEnabled?"trackEnabled":"trackDisabled")),s!==t.isSwitchedOff&&(r._log.debug(r.trackSid+": "+(s?"OFF":"ON")+" => "+(t.isSwitchedOff?"OFF":"ON")),s=t.isSwitchedOff,r.track?(r.track._setSwitchedOff(t.isSwitchedOff),r.emit(s?"trackSwitchedOff":"trackSwitchedOn",r.track)):s&&r._log.warn("Track was not subscribed when switched Off.")),a!==t.priority&&r.emit("publishPriorityChanged",a=t.priority)}),r}return i(t,e),t.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t.prototype._subscribed=function(e){!this._track&&e&&(this._track=e,this.emit("subscribed",e))},t.prototype._unsubscribe=function(){if(this._track){var e=this._track;this._track=null,this.emit("unsubscribed",e)}},t}(n("tjbx"));e.exports=o},"+OFx":function(e,t,n){"use strict";var r=null;e.exports=function(e){return r=r||document.createElement("canvas"),new Promise(function(t){var n=3;setTimeout(function i(){return n--,function(e){try{var t=r.getContext("2d");t.drawImage(e,0,0,50,50);var n=t.getImageData(0,0,50,50).data.filter(function(e,t){return(t+1)%4});return 0===Math.max.apply(Math,n)}catch(i){return console.log("Error checking silence: ",i),!1}}(e)?n>0?setTimeout(i,250):t(!0):t(!1)},250)})}},"+kOg":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=n("mAYT"),c=n("1RtY"),u=n("/Ylb"),l=n("ghd6").valueToJSON,d=0,h=function(e){function t(t,n,r){var i,o,s=e.call(this)||this,a=r.log.createLog("default",s),c=new Map;return Object.defineProperties(s,{_log:{value:a},_clientTrackSwitchOffControl:{value:r.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:r.contentPreferencesMode||"disabled"},_instanceId:{value:++d},_options:{value:r},_participants:{value:c},_signaling:{value:n},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(n.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return n.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:t},name:{enumerable:!0,value:n.name},participants:{enumerable:!0,value:c},sid:{enumerable:!0,value:n.sid},state:{enumerable:!0,get:function(){return n.state}},mediaRegion:{enumerable:!0,value:n.mediaRegion}}),i=s,(o=n.recording).on("updated",function(){var e=o.isEnabled;i._log.info("Recording "+(e?"started":"stopped")),i.emit("recording"+(e?"Started":"Stopped"))}),function(e,t){var n=e._log;n.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),t.participants.forEach(f.bind(null,e)),n.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),t.on("participantConnected",f.bind(null,e)),t.on("dominantSpeakerChanged",function(){return e.emit("dominantSpeakerChanged",e.dominantSpeaker)}),t.on("stateChanged",function r(i,o){switch(n.info("Transitioned to state:",i),i){case"disconnected":e.participants.forEach(function(e){e._unsubscribeTracks()}),e.emit(i,e,o),e.localParticipant.tracks.forEach(function(e){e.unpublish()}),t.removeListener("stateChanged",r);break;case"reconnecting":setTimeout(function(){return e.emit("reconnecting",o)},0);break;default:setTimeout(function(){return e.emit("reconnected")},0)}})}(s,n),a.info("Created a new Room:",s.name),a.debug("Initial RemoteParticipants:",Array.from(s._participants.values())),s}return i(t,e),t.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},t.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},t.prototype.getStats=function(){var e=this;return this._signaling.getStats().then(function(t){return Array.from(t).map(function(t){var n=o(t,2),r=n[1];return new u(n[0],Object.assign({},r,{localAudioTrackStats:p(e,r.localAudioTrackStats),localVideoTrackStats:p(e,r.localVideoTrackStats)}))})})},t.prototype.toJSON=function(){return l(this)},t}(a);function p(e,t){var n=e.localParticipant._signaling;return t.reduce(function(e,t){var r=n.tracks.get(t.trackId),i=n.getSender(r);return i?[Object.assign({},t,{trackId:i.id})].concat(e):e},[])}function f(e,t){var n=e._log,r=new c(t,{log:n,clientTrackSwitchOffControl:e._clientTrackSwitchOffControl,contentPreferencesMode:e._contentPreferencesMode});n.info("A new RemoteParticipant connected:",r),e._participants.set(r.sid,r),e.emit("participantConnected",r);var i=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(t){var n=o(Array.isArray(t)?t:[t,t],2),i=n[0],a=n[1];function c(){var t=[].slice.call(arguments);t.unshift(a),t.push(r),e.emit.apply(e,s([],o(t)))}return r.on(i,c),[i,c]});r.once("disconnected",function(){var t=e.dominantSpeaker;n.info("RemoteParticipant disconnected:",r),e._participants.delete(r.sid),i.forEach(function(e){r.removeListener(e[0],e[1])}),e.emit("participantDisconnected",r),r===t&&e.emit("dominantSpeakerChanged",e.dominantSpeaker)})}e.exports=h},"+qE3":function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,i)})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o,s;if(u(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,console&&console.warn&&console.warn(a)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):v(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,l=v(c,u);for(n=0;n<u;++n)o(l[n],this,t)}return!0},a.prototype.on=a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){return u(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,p(this,e,t)),this},a.prototype.off=a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"/+gY":function(e,t,n){"use strict";var r="undefined"!=typeof AudioContext?AudioContext:"undefined"!=typeof webkitAudioContext?webkitAudioContext:null,i=function(){function e(t){t=Object.assign({AudioContext:r},t),Object.defineProperties(this,{_AudioContext:{value:t.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:e}})}return e.prototype.getOrCreate=function(e){if(!this._holders.has(e)&&(this._holders.add(e),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch(t){}return this._audioContext},e.prototype.release=function(e){this._holders.has(e)&&(this._holders.delete(e),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},e}();e.exports=new i},"/Ylb":function(e,t,n){"use strict";var r=n("r2dn"),i=n("BMBc"),o=n("yTCf"),s=n("b9Z9");e.exports=function(e,t,n){if("string"!=typeof e)throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:e,enumerable:!0},localAudioTrackStats:{value:t.localAudioTrackStats.map(function(e){return new r(e.trackId,e,n)}),enumerable:!0},localVideoTrackStats:{value:t.localVideoTrackStats.map(function(e){return new i(e.trackId,e,n)}),enumerable:!0},remoteAudioTrackStats:{value:t.remoteAudioTrackStats.map(function(e){return new o(e.trackId,e)}),enumerable:!0},remoteVideoTrackStats:{value:t.remoteVideoTrackStats.map(function(e){return new s(e.trackId,e)}),enumerable:!0}})}},"/kv6":function(e,t,n){"use strict";var r=n("sYJf");e.exports=function(e,t,n,i){var o,s=new Error("Canceled");return new r(function(a,c,u){var l;e(function(e){return u()?r.reject(s):(l=t(e),n(l).then(function(e){if(u())throw s;return o=e()}))}).then(function(e){if(u())throw e.disconnect(),s;a(i(l,e))}).catch(function(e){c(e)})},function(){o&&o.cancel()})}},0:function(e,t,n){e.exports=n("zUnb")},"0iCT":function(e,t,n){"use strict";e.exports=function(e,t){if("string"!=typeof e)throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:e,enumerable:!0},trackSid:{value:t.trackSid,enumerable:!0},timestamp:{value:t.timestamp,enumerable:!0},ssrc:{value:t.ssrc,enumerable:!0},packetsLost:{value:"number"==typeof t.packetsLost?t.packetsLost:null,enumerable:!0},codec:{value:"string"==typeof t.codecName?t.codecName:null,enumerable:!0}})}},"1/tH":function(e,t,n){"use strict";e.exports=function(e){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?(e=e||{audio:!0,video:!0},navigator.mediaDevices.getUserMedia(e)):Promise.reject(new Error("getUserMedia is not supported"))}},"1I8i":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=n("lrhj"),a=n("pWYA"),c=n("Aq89"),u=n("gBrb"),l=n("Lh68"),d=n("3sVZ"),h=n("/Ylb"),p=n("Um2Z"),f=n("muOY"),m=n("OD4n"),v=n("3Zq6"),g=n("ghd6"),y=g.constants.DEFAULT_SESSION_TIMEOUT_SEC,_=g.createBandwidthProfilePayload,b=g.defer,w=g.difference,k=g.filterObject,S=g.flatMap,T=g.oncePerTick,C=n("qOIT"),O=n("5wwa").createTwilioError,E=function(e){function t(t,n,r,i,o){var l=this;n.options=Object.assign({session_timeout:y},n.options),o=Object.assign({DominantSpeakerSignaling:s,NetworkQualityMonitor:a,NetworkQualitySignaling:c,RecordingSignaling:u,RemoteParticipantV2:d,TrackPrioritySignaling:p,TrackSwitchOffSignaling:f,bandwidthProfile:null,sessionTimeout:1e3*n.options.session_timeout,statsPublishIntervalMs:1e4},o),t.setBandwidthProfile(o.bandwidthProfile),i.setIceReconnectTimeout(o.sessionTimeout);var g=function(e){return l._getTrackReceiver(e)},_=(l=e.call(this,t,n.sid,n.name,o)||this)._log;return Object.defineProperties(l,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:o.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:t.bandwidthProfileRevision,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:t.networkQualityConfiguration},_peerConnectionManager:{value:i},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:o.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new o.DominantSpeakerSignaling(g,{log:_})},_networkQualitySignaling:{value:new o.NetworkQualitySignaling(g,t.networkQualityConfiguration,{log:_})},_renderHintsSignaling:{value:new m(g,{log:_})},_publisherHintsSignaling:{value:new v(g,{log:_})},_trackPrioritySignaling:{value:new o.TrackPrioritySignaling(g,{log:_})},_trackSwitchOffSignaling:{value:new o.TrackSwitchOffSignaling(g,{log:_})},_pendingSwitchOffStates:{value:new Map},_transport:{value:r},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:n.options.media_region||null}}),l._initTrackSwitchOffSignaling(),l._initDominantSpeakerSignaling(),l._initNetworkQualityMonitorSignaling(),l._initPublisherHintSignaling(),function(e,t){var n=T(function(){e._publishNewLocalParticipantState()}),r=T(function(){var n=S(t.tracks,function(e){return e.trackTransceiver});e._peerConnectionManager.setTrackSenders(n)});t.on("trackAdded",r),t.on("trackRemoved",r),t.on("updated",n),e.on("stateChanged",function i(o){"disconnected"===o&&(t.removeListener("trackAdded",r),t.removeListener("trackRemoved",r),t.removeListener("updated",n),e.removeListener("stateChanged",i),t.disconnect())}),e.on("signalingConnectionStateChanged",function(){var t=e.localParticipant,n=t.identity,r=t.sid;switch(e.signalingConnectionState){case"connected":t.connect(r,n);break;case"reconnecting":t.reconnecting()}})}(l,t),function(e,t){t.on("description",function(t){e._publishPeerConnectionState(t)}),t.dequeue("description"),t.on("candidates",function(t){e._publishPeerConnectionState(t)}),t.dequeue("candidates"),t.on("trackAdded",e._addTrackReceiver.bind(e)),t.dequeue("trackAdded"),t.getTrackReceivers().forEach(e._addTrackReceiver,e),t.on("connectionStateChanged",function(){e.emit("connectionStateChanged")}),t.on("iceConnectionStateChanged",function(){e.emit("iceConnectionStateChanged"),"failed"===e.iceConnectionState&&(null!==e.localParticipant.networkQualityLevel&&e.localParticipant.setNetworkQualityLevel(0),e.participants.forEach(function(e){null!==e.networkQualityLevel&&e.setNetworkQualityLevel(0)}))})}(l,i),function(e,t){t.on("message",e._update.bind(e)),t.on("stateChanged",function n(r,i){"disconnected"===r&&("disconnected"!==e.state&&e._disconnect(i),t.removeListener("stateChanged",n)),e.emit("signalingConnectionStateChanged")})}(l,r),function(e,t,n){var r=new Map,i=!1,o=setInterval(function(){e.getStats().then(function(e){i=!i,e.forEach(function(e,n){var o=new h(n,e,!0);t.publishEvent("quality","stats-report","info",{audioTrackStats:o.remoteAudioTrackStats.map(function(t,n){return A(t,e.remoteAudioTrackStats[n],r)}),localAudioTrackStats:o.localAudioTrackStats.map(function(t,n){return j(t,e.localAudioTrackStats[n],r)}),localVideoTrackStats:o.localVideoTrackStats.map(function(t,n){return j(t,e.localVideoTrackStats[n],r)}),peerConnectionId:o.peerConnectionId,videoTrackStats:o.remoteVideoTrackStats.map(function(t,n){return A(t,e.remoteVideoTrackStats[n],r)})});var s=S(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(e){return o[e].map(function(e){return e.trackSid+"+"+e.ssrc})});if(w(Array.from(r.keys()),s).forEach(function(e){return r.delete(e)}),i){var a=function(e,t){return(e=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:t,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},k(e||{},null))).localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},k(e.localCandidate||{},null)),e.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},k(e.remoteCandidate||{},null)),e}(e.activeIceCandidatePair,o.peerConnectionId);t.publishEvent("quality","active-ice-candidate-pair","info",a)}})},function(){})},n);e.on("stateChanged",function t(n){"disconnected"===n&&(clearInterval(o),e.removeListener("stateChanged",t))})}(l,r,o.statsPublishIntervalMs),l._update(n),l._peerConnectionManager.setEffectiveAdaptiveSimulcast(l._publisherHintsSignaling.isSetup),l}return i(t,e),Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signalingConnectionState",{get:function(){return"syncing"===this._transport.state?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),t.prototype._deleteTrackReceiverDeferred=function(e){return this._trackReceiverDeferreds.delete(e)},t.prototype._getOrCreateTrackReceiverDeferred=function(e){var t=this._trackReceiverDeferreds.get(e)||b(),n=this._peerConnectionManager.getTrackReceivers().find(function(t){return t.id===e&&"ended"!==t.readyState});return n?t.resolve(n):this._trackReceiverDeferreds.set(e,t),t},t.prototype._addTrackReceiver=function(e){return this._getOrCreateTrackReceiverDeferred(e.id).resolve(e),this},t.prototype._disconnect=function(t){var n=e.prototype._disconnect.call(this,t);return n&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(e){e.publishFailed(t||new Error("LocalParticipant disconnected"))}),n},t.prototype._getTrackReceiver=function(e){var t=this;return this._getOrCreateTrackReceiverDeferred(e).promise.then(function(n){return t._deleteTrackReceiverDeferred(e),n})},t.prototype._getInitialTrackSwitchOffState=function(e){var t=this._pendingSwitchOffStates.get(e)||!1;return this._pendingSwitchOffStates.delete(e),t&&this._log.warn("["+e+"] was initially switched off! "),t},t.prototype._getTrackSidsToTrackSignalings=function(){var e=S(this.participants,function(e){return Array.from(e.tracks)});return new Map(e)},t.prototype._getOrCreateRemoteParticipant=function(e){var t=this,n=this._RemoteParticipantV2,r=this.participants.get(e.sid),i=this;return r||((r=new n(e,function(e){return t._getInitialTrackSwitchOffState(e)},function(e,n){return t._trackPrioritySignaling.sendTrackPriorityUpdate(e,"subscribe",n)},function(e,n){return t._renderHintsSignaling.setTrackHint(e,n)},function(e){return t._renderHintsSignaling.clearTrackHint(e)})).on("stateChanged",function e(t){"disconnected"===t&&(r.removeListener("stateChanged",e),i.participants.delete(r.sid),i._disconnectedParticipantRevisions.set(r.sid,r.revision))}),this.connectParticipant(r)),r},t.prototype._getState=function(){return{participant:this.localParticipant.getState()}},t.prototype._maybeAddBandwidthProfile=function(e){var t=this.localParticipant,n=t.bandwidthProfile,r=t.bandwidthProfileRevision;return n&&this._lastBandwidthProfileRevision<r?(this._lastBandwidthProfileRevision=r,Object.assign({bandwidth_profile:_(n)},e)):e},t.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},t.prototype._publishPeerConnectionState=function(e){this._transport.publish(Object.assign({peer_connections:[e]},this._getState()))},t.prototype._update=function(e){var t=this;if(e.subscribed&&e.subscribed.revision>this._subscribedRevision){this._subscribedRevision=e.subscribed.revision,e.subscribed.tracks.forEach(function(e){e.id?(t._subscriptionFailures.delete(e.sid),t._subscribed.set(e.sid,e.id)):e.error&&!t._subscriptionFailures.has(e.sid)&&t._subscriptionFailures.set(e.sid,e.error)});var n=new Set(e.subscribed.tracks.filter(function(e){return!!e.id}).map(function(e){return e.sid}));this._subscribed.forEach(function(e,r){n.has(r)||t._subscribed.delete(r)})}var r,i,o=new Set;return(e.participants||[]).forEach(function(e){if(e.sid!==t.localParticipant.sid){var n=t._disconnectedParticipantRevisions.get(e.sid);if(!(n&&e.revision<=n)){n&&t._disconnectedParticipantRevisions.delete(e.sid);var r=t._getOrCreateRemoteParticipant(e);r.update(e),o.add(r)}}}),"synced"===e.type&&this.participants.forEach(function(e){o.has(e)||e.disconnect()}),i=(r=this)._getTrackSidsToTrackSignalings(),r._subscriptionFailures.forEach(function(e,t){var n=i.get(t);n&&(r._subscriptionFailures.delete(t),n.subscribeFailed(O(e.code,e.message)))}),i.forEach(function(e){var t=r._subscribed.get(e.sid);(!t||e.isSubscribed&&e.trackTransceiver.id!==t)&&e.setTrackTransceiver(null),t&&r._getTrackReceiver(t).then(function(t){return e.setTrackTransceiver(t)})}),e.peer_connections&&this._peerConnectionManager.update(e.peer_connections,"synced"===e.type),e.recording&&this.recording.update(e.recording),e.published&&e.published.revision>this._publishedRevision&&(this._publishedRevision=e.published.revision,e.published.tracks.forEach(function(e){e.sid&&t._published.set(e.id,e.sid)}),this.localParticipant.update(e.published)),e.participant&&this.localParticipant.connect(e.participant.sid,e.participant.identity),[this._dominantSpeakerSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(t){var n=t.channel;!t.isSetup&&e.media_signaling&&e.media_signaling[n]&&e.media_signaling[n].transport&&"data-channel"===e.media_signaling[n].transport.type&&t.setup(e.media_signaling[n].transport.label)}),this},t.prototype._initPublisherHintSignaling=function(){var e=this;this._publisherHintsSignaling.on("updated",function(t,n){Promise.all(t.map(function(t){return e.localParticipant.setPublisherHint(t.track,t.encodings).then(function(e){return{track:t.track,result:e}})})).then(function(t){e._publisherHintsSignaling.sendHintResponse({id:n,hints:t})})});var t=function(t){"video"===t.kind&&t.trackTransceiver.on("replaced",function(){e._publisherHintsSignaling.sendTrackReplaced({trackSid:t.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(e){return t(e)}),this.localParticipant.on("trackAdded",function(e){return t(e)})},t.prototype._initTrackSwitchOffSignaling=function(){var e=this;this._trackSwitchOffSignaling.on("updated",function(t,n){try{e._log.debug("received trackSwitch: ",{tracksOn:n,tracksOff:t});var r=new Map;n.forEach(function(e){return r.set(e,!0)}),t.forEach(function(t){r.get(t)&&e._log.warn(t+" is DUPLICATED in both tracksOff and tracksOn list"),r.set(t,!1)}),e.participants.forEach(function(e){e.tracks.forEach(function(e){var t=r.get(e.sid);void 0!==t&&(e.setSwitchedOff(!t),r.delete(e.sid))})}),r.forEach(function(t,n){return e._pendingSwitchOffStates.set(n,!t)})}catch(i){e._log.error("error processing track switch off:",i)}})},t.prototype._initDominantSpeakerSignaling=function(){var e=this;this._dominantSpeakerSignaling.on("updated",function(){return e.setDominantSpeaker(e._dominantSpeakerSignaling.loudestParticipantSid)})},t.prototype._initNetworkQualityMonitorSignaling=function(){var e=this;this._networkQualitySignaling.on("ready",function(){var t=new e._NetworkQualityMonitor(e._peerConnectionManager,e._networkQualitySignaling);e._networkQualityMonitor=t,t.on("updated",function(){"failed"!==e.iceConnectionState&&(e.localParticipant.setNetworkQualityLevel(t.level,t.levels),e.participants.forEach(function(e){var n=t.remoteLevels.get(e.sid);n&&e.setNetworkQualityLevel(n.level,n)}))}),t.start()}),this._networkQualitySignaling.on("teardown",function(){return e._teardownNetworkQualityMonitor()})},t.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},t.prototype.getStats=function(){var e=this;return this._peerConnectionManager.getStats().then(function(t){return new Map(Array.from(t).map(function(t){var n=o(t,2),r=n[1];return[n[0],Object.assign({},r,{localAudioTrackStats:x(e,r.localAudioTrackStats),localVideoTrackStats:x(e,r.localVideoTrackStats),remoteAudioTrackStats:R(e,r.remoteAudioTrackStats),remoteVideoTrackStats:R(e,r.remoteVideoTrackStats)})]}))})},t}(l);function P(e,t){return t.reduce(function(t,n){var r=e.get(n.trackId);return r?[Object.assign({},n,{trackSid:r})].concat(t):t},[])}function x(e,t){return P(e._published,t)}function R(e,t){return P(new Map(Array.from(e._subscribed.entries()).map(function(e){var t=o(e,2);return[t[1],t[0]]})),t)}function j(e,t,n){var r=t.framesEncoded,i=t.packetsSent,o=t.totalEncodeTime,s=t.totalPacketSendDelay,a=Object.assign({},e),c=e.trackSid+"+"+e.ssrc,u=n.get(c)||new Map;if("number"==typeof o&&"number"==typeof r){var l=u.get("avgEncodeDelay")||new C;l.putSample(1e3*o,r),a.avgEncodeDelay=Math.round(l.get()),u.set("avgEncodeDelay",l)}if("number"==typeof s&&"number"==typeof i){var d=u.get("avgPacketSendDelay")||new C;d.putSample(1e3*s,i),a.avgPacketSendDelay=Math.round(d.get()),u.set("avgPacketSendDelay",d)}return n.set(c,u),a}function A(e,t,n){var r=t.estimatedPlayoutTimestamp,i=t.framesDecoded,o=t.jitterBufferDelay,s=t.jitterBufferEmittedCount,a=t.totalDecodeTime,c=Object.assign({},e),u=e.trackSid+"+"+e.ssrc,l=n.get(u)||new Map;if("number"==typeof r&&(c.estimatedPlayoutTimestamp=r),"number"==typeof i&&"number"==typeof a){var d=l.get("avgDecodeDelay")||new C;d.putSample(1e3*a,i),c.avgDecodeDelay=Math.round(d.get()),l.set("avgDecodeDelay",d)}if("number"==typeof o&&"number"==typeof s){var h=l.get("avgJitterBufferDelay")||new C;h.putSample(1e3*o,s),c.avgJitterBufferDelay=Math.round(h.get()),l.set("avgJitterBufferDelay",h)}return n.set(u,l),c}e.exports=E},"1RtY":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._handleTrackSignalingEvents(),r.once("disconnected",r._unsubscribeTracks.bind(r)),r}return i(t,e),t.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},t.prototype._addTrack=function(t,n,r){return e.prototype._addTrack.call(this,t,r)?(n._subscribed(t),this.emit("trackSubscribed",t,n),t):null},t.prototype._addTrackPublication=function(t){var n=e.prototype._addTrackPublication.call(this,t);return n?(this.emit("trackPublished",n),n):null},t.prototype._getTrackPublicationEvents=function(){return s(s([],o(e.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},t.prototype._unsubscribeTracks=function(){var e=this;this.tracks.forEach(function(t){if(t.isSubscribed){var n=t.track;t._unsubscribe(),e.emit("trackUnsubscribed",n,t)}})},t.prototype._removeTrack=function(t,n,r){var i=this._tracks.get(r);return i?(e.prototype._removeTrack.call(this,i,r),n._unsubscribe(),this.emit("trackUnsubscribed",i,n),i):null},t.prototype._removeTrackPublication=function(t){this._signaling.clearTrackHint(t.trackSid);var n=e.prototype._removeTrackPublication.call(this,t);return n?(this.emit("trackUnpublished",n),n):null},t}(n("TTpt"));e.exports=a},"1gqn":function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},"2NPH":function(e,t,n){"use strict";var r=n("MCLT").inherits,i=n("uxdj");function o(e,t){var n=new i(e,t);return Object.setPrototypeOf(n,o.prototype),n}r(o,i),e.exports=o},"2h1k":function(e,t,n){"use strict";var r={};Object.defineProperties(r,{getStats:{enumerable:!0,value:n("8QmE")},getUserMedia:{enumerable:!0,value:n("1/tH")},MediaStream:{enumerable:!0,value:n("qmcU")},MediaStreamTrack:{enumerable:!0,value:n("DsyS")},RTCIceCandidate:{enumerable:!0,value:n("CmYA")},RTCPeerConnection:{enumerable:!0,value:n("GcCu")},RTCSessionDescription:{enumerable:!0,value:n("HmUk")},version:{enumerable:!0,value:n("k/FX").version}}),e.exports=r},"2mUf":function(e,t,n){"use strict";e.exports=function(e){var t=e.fractionLost,n=e.level;Object.defineProperties(this,{fractionLost:{value:void 0===t?null:t,enumerable:!0},level:{value:void 0===n?null:n,enumerable:!0}})}},"2xLa":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("4o7n"),s=n("8WNc"),a=n("Ihm+"),c=function(e){function t(t,n,r,i,o,s,a){var c=e.call(this,t,n,r)||this;return Object.defineProperties(c,{deltaPacketsLost:{enumerable:!0,value:i},deltaPacketsReceived:{enumerable:!0,value:o},fractionLost:{enumerable:!0,value:s},jitter:{enumerable:!0,value:a},phonyFractionLost:{enumerable:!0,value:o>0?i/o:0}}),c}return i(t,e),t.of=function(e,n,r){if(n.id!==r.id)throw new Error("RTCStats IDs must match");var i=(r.timestamp-n.timestamp)/1e3,o=i>0?(r.bytesReceived-n.bytesReceived)/i*8:0,s=Math.max(r.packetsLost-n.packetsLost,0);return new t(n.id,e,o,s,r.packetsReceived-n.packetsReceived,r.fractionLost,r.jitter)},t.summarize=function(e){var t=e.map(function(e){return e.summarize()});return{bitrate:a(t.map(function(e){return e.bitrate})),fractionLost:o(t.map(function(e){return e.fractionLost})),jitter:o(t.map(function(e){return e.jitter}))}},t.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:"number"==typeof this.fractionLost?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},t}(s);e.exports=c},"31MG":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=n("BWbm").guessBrowser,c=n("d6fC"),u=n("O22K"),l=n("F/ro"),d=n("ghd6"),h=n("5wwa").MediaConnectionError,p="firefox"===a(),f=function(e){function t(t,r,i){var o=e.call(this)||this,s=(i=Object.assign({audioContextFactory:p?n("/+gY"):null,PeerConnectionV2:c},i)).audioContextFactory?i.audioContextFactory.getOrCreate(o):null,a=s?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(o,{_audioContextFactory:{value:i.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:d.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:s?new u(m(s)):null},_encodingParameters:{value:t},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:a},_peerConnections:{value:new Map},_preferredCodecs:{value:r},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:i.PeerConnectionV2}}),o}return i(t,e),t.prototype.setEffectiveAdaptiveSimulcast=function(e){this._peerConnections.forEach(function(t){return t.setEffectiveAdaptiveSimulcast(e)}),this._preferredCodecs.video.forEach(function(t){"adaptiveSimulcast"in t&&(t.adaptiveSimulcast=e)})},Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),t.prototype._closeAbsentPeerConnections=function(e){var t=new Set(e.map(function(e){return e.id}));return this._peerConnections.forEach(function(e){t.has(e.id)||e._close()}),this},t.prototype._getConfiguration=function(){return this._configurationDeferred.promise},t.prototype._getOrCreate=function(e,t){var n=this,r=this,i=this._peerConnections.get(e);if(!i){var o=this._PeerConnectionV2,s=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},t);try{i=new o(e,this._encodingParameters,this._preferredCodecs,s)}catch(a){throw new h}this._peerConnections.set(i.id,i),i.on("candidates",this.queue.bind(this,"candidates")),i.on("description",this.queue.bind(this,"description")),i.on("trackAdded",this.queue.bind(this,"trackAdded")),i.on("stateChanged",function e(t){"closed"===t&&(i.removeListener("stateChanged",e),r._dataTrackSenders.forEach(function(e){return i.removeDataTrackSender(e)}),r._mediaTrackSenders.forEach(function(e){return i.removeMediaTrackSender(e)}),r._peerConnections.delete(i.id),r._closedPeerConnectionIds.add(i.id),k(r),w(r))}),i.on("connectionStateChanged",function(){return k(n)}),i.on("iceConnectionStateChanged",function(){return w(n)}),this._dataTrackSenders.forEach(i.addDataTrackSender,i),this._mediaTrackSenders.forEach(i.addMediaTrackSender,i),w(this)}return i},t.prototype.close=function(){return this._peerConnections.forEach(function(e){e.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),w(this),this},t.prototype.createAndOffer=function(){var e=this;return this._getConfiguration().then(function(t){var n;do{n=d.makeUUID()}while(e._peerConnections.has(n));return e._getOrCreate(n,t)}).then(function(e){return e.offer()}).then(function(){return e})},t.prototype.getTrackReceivers=function(){return d.flatMap(this._peerConnections,function(e){return e.getTrackReceivers()})},t.prototype.getStates=function(){var e=[];return this._peerConnections.forEach(function(t){var n=t.getState();n&&e.push(n)}),e},t.prototype.setConfiguration=function(e){return this._configuration&&(this._configurationDeferred=d.defer(),this._peerConnections.forEach(function(t){t.setConfiguration(e)})),this._configuration=e,this._configurationDeferred.resolve(e),this},t.prototype.setIceReconnectTimeout=function(e){return null===this._sessionTimeout&&(this._peerConnections.forEach(function(t){t.setIceReconnectTimeout(e)}),this._sessionTimeout=e),this},t.prototype.setTrackSenders=function(e){var t=new Set(e.filter(function(e){return"data"===e.kind})),n=new Set(e.filter(function(e){return e&&("audio"===e.kind||"video"===e.kind)})),r=function(e,t,n){return{data:v(e,t),media:g(e,n)}}(this,t,n);return this._dataTrackSenders=t,this._mediaTrackSenders=n,function(e,t){(t.data.add.size||t.data.remove.size||t.media.add.size||t.media.remove.size)&&e._peerConnections.forEach(function(e){t.data.remove.forEach(e.removeDataTrackSender,e),t.media.remove.forEach(e.removeMediaTrackSender,e),t.data.add.forEach(e.addDataTrackSender,e),t.media.add.forEach(e.addMediaTrackSender,e),(t.media.add.size||t.media.remove.size||t.data.add.size&&!e.isApplicationSectionNegotiated)&&e.offer()})}(this,r),this},t.prototype.update=function(e,t){var n=this;return void 0===t&&(t=!1),t&&this._closeAbsentPeerConnections(e),this._getConfiguration().then(function(t){return Promise.all(e.map(function(e){return n._closedPeerConnectionIds.has(e.id)?null:n._getOrCreate(e.id,t).update(e)}))}).then(function(){return n})},t.prototype.getStats=function(){var e=Array.from(this._peerConnections.values());return Promise.all(e.map(function(e){return e.getStats().then(function(t){return[e.id,t]})})).then(function(e){return new Map(e)})},t}(l);function m(e){return e.createMediaStreamDestination().stream.getAudioTracks()[0]}function v(e,t){return{add:d.difference(t,e._dataTrackSenders),remove:d.difference(e._dataTrackSenders,t)}}function g(e,t){return{add:d.difference(t,e._mediaTrackSenders),remove:d.difference(e._mediaTrackSenders,t)}}var y,_={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3};function b(e){return e.length?(y=y||Object.keys(_).reduce(function(e,t){var n;return Object.assign(e,((n={})[_[t]]=t,n))},{}),e.reduce(function(e,t){return y[Math.max(_[e],_[t])]})):"new"}function w(e){e._lastIceConnectionState=e.iceConnectionState,e._iceConnectionState=b(s([],o(e._peerConnections.values())).map(function(e){return e.iceConnectionState})),e.iceConnectionState!==e._lastIceConnectionState&&e.emit("iceConnectionStateChanged")}function k(e){e._lastConnectionState=e.connectionState,e._connectionState=b(s([],o(e._peerConnections.values())).map(function(e){return e.connectionState})),e.connectionState!==e._lastConnectionState&&e.emit("connectionStateChanged")}e.exports=f},"3Zq6":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("zbom"),s=1,a=function(e){function t(t,n){var r=e.call(this,t,"publisher_hints",n)||this;return r.on("ready",function(e){r._log.debug("publisher_hints transport ready:",e),e.on("message",function(e){switch(r._log.debug("Incoming: ",e),e.type){case"publisher_hints":e.publisher&&e.publisher.hints&&e.publisher.id&&r._processPublisherHints(e.publisher.hints,e.publisher.id);break;default:r._log.warn("Unknown message type: ",e.type)}})}),r}return i(t,e),t.prototype.sendTrackReplaced=function(e){if(this._transport){var t={type:"client_reset",track:e.trackSid,id:s++};this._log.debug("Outgoing: ",t),this._transport.publish(t)}},t.prototype.sendHintResponse=function(e){if(this._transport){var t={type:"publisher_hints",id:e.id,hints:e.hints};this._log.debug("Outgoing: ",t),this._transport.publish(t)}},t.prototype._processPublisherHints=function(e,t){try{this.emit("updated",e,t)}catch(n){this._log.error("error processing hints:",n)}},t}(o);e.exports=a},"3h4Y":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n("Qvpb"),o=n("CQu1"),s={connect:n("9/wP"),createLocalAudioTrack:n("M1q1").audio,createLocalVideoTrack:n("M1q1").video,isSupported:n("t472")(),version:n("iqXr").version,Logger:n("cmf6"),LocalAudioTrack:n("VR5W").LocalAudioTrack,LocalDataTrack:n("VR5W").LocalDataTrack,LocalVideoTrack:n("VR5W").LocalVideoTrack};e.exports={connect:function(e,t){var n=r({createLocalTracks:i.createLocalTracks},t);return s.connect(e,n)},createLocalAudioTrack:function(e){var t=r({createLocalTracks:i.createLocalTracks},e);return s.createLocalAudioTrack(t)},createLocalVideoTrack:function(e){var t=r({createLocalTracks:i.createLocalTracks},e);return s.createLocalVideoTrack(t)},createLocalTracks:i.createLocalTracks,runPreflight:o.runPreflight,isSupported:s.isSupported,version:s.version,Logger:s.Logger,LocalAudioTrack:s.LocalAudioTrack,LocalVideoTrack:s.LocalVideoTrack,LocalDataTrack:s.LocalDataTrack}},"3oWx":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return Object.defineProperties(t,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),t}return i(t,e),t.prototype.addTrack=function(t,n,r){var i=this._createLocalTrackPublicationSignaling(t,n,r);return this._trackSendersToPublications.set(t,i),this._publicationsToTrackSenders.set(i,t),e.prototype.addTrack.call(this,i),this},t.prototype.getPublication=function(e){return this._trackSendersToPublications.get(e)||null},t.prototype.getSender=function(e){return this._publicationsToTrackSenders.get(e)||null},t.prototype.removeTrack=function(t){var n=this._trackSendersToPublications.get(t);return n?(this._trackSendersToPublications.delete(t),this._publicationsToTrackSenders.delete(n),e.prototype.removeTrack.call(this,n)&&n.stop(),n):null},t}(n("EYe3"));e.exports=o},"3sVZ":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("HsAx"),s=n("xVU0"),a=function(e){function t(t,n,r,i,o,a){var c=e.call(this,t.sid,t.identity)||this;return a=Object.assign({RemoteTrackPublicationV2:s},a),Object.defineProperties(c,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:a.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:n},updateSubscriberTrackPriority:{value:function(e,t){return r(e,t)}},updateTrackRenderHint:{value:function(e,t){return i(e,t)}},clearTrackHint:{value:function(e){return o(e)}},revision:{enumerable:!0,get:function(){return this._revision}}}),c.update(t)}return i(t,e),t.prototype._getOrCreateTrack=function(e){var t=this._RemoteTrackPublicationV2,n=this.tracks.get(e.sid);return n||(n=new t(e,this._getInitialTrackSwitchOffState(e.sid)),this.addTrack(n)),n},t.prototype.update=function(e){var t=this;if(null!==this.revision&&e.revision<=this.revision)return this;this._revision=e.revision;var n=new Set;switch(e.tracks.forEach(function(e){var r=t._getOrCreateTrack(e);r.update(e),n.add(r)}),this.tracks.forEach(function(e){n.has(e)||t.removeTrack(e)}),e.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity)}return this},t}(o);e.exports=a},"4o7n":function(e,t,n){"use strict";e.exports=function(e){return(e=e.filter(function(e){return"number"==typeof e})).length<1?void 0:e.reduce(function(e,t){return t+e})/e.length}},"5UJR":function(e,t,n){"use strict";var r=n("NSCw"),i=n("2mUf"),o=n("q6IO");e.exports=function(e){var t=e.bandwidth,n=void 0===t?null:t,s=e.fractionLost,a=void 0===s?null:s,c=e.latency,u=void 0===c?null:c;Object.defineProperties(this,{bandwidth:{value:n?new r(n):null,enumerable:!0},fractionLost:{value:a?new i(a):null,enumerable:!0},latency:{value:u?new o(u):null,enumerable:!0}})}},"5wwa":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("SAu+"),s={};t.createTwilioError=function(e,t){return t="string"==typeof t&&t?t:"Unknown error",s[e="number"==typeof e?e:0]?new s[e]:new o(e,t)};var a=function(e){function t(){var n=e.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.AccessTokenInvalidError=a,Object.defineProperty(s,20101,{value:a});var c=function(e){function t(){var n=e.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.AccessTokenHeaderInvalidError=c,Object.defineProperty(s,20102,{value:c});var u=function(e){function t(){var n=e.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.AccessTokenIssuerInvalidError=u,Object.defineProperty(s,20103,{value:u});var l=function(e){function t(){var n=e.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.AccessTokenExpiredError=l,Object.defineProperty(s,20104,{value:l});var d=function(e){function t(){var n=e.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.AccessTokenNotYetValidError=d,Object.defineProperty(s,20105,{value:d});var h=function(e){function t(){var n=e.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.AccessTokenGrantsInvalidError=h,Object.defineProperty(s,20106,{value:h});var p=function(e){function t(){var n=e.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.AccessTokenSignatureInvalidError=p,Object.defineProperty(s,20107,{value:p});var f=function(e){function t(){var n=e.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.SignalingConnectionError=f,Object.defineProperty(s,53e3,{value:f});var m=function(e){function t(){var n=e.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.SignalingConnectionDisconnectedError=m,Object.defineProperty(s,53001,{value:m});var v=function(e){function t(){var n=e.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.SignalingConnectionTimeoutError=v,Object.defineProperty(s,53002,{value:v});var g=function(e){function t(){var n=e.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.SignalingIncomingMessageInvalidError=g,Object.defineProperty(s,53003,{value:g});var y=function(e){function t(){var n=e.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.SignalingOutgoingMessageInvalidError=y,Object.defineProperty(s,53004,{value:y});var _=function(e){function t(){var n=e.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.SignalingServerBusyError=_,Object.defineProperty(s,53006,{value:_});var b=function(e){function t(){var n=e.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomNameInvalidError=b,Object.defineProperty(s,53100,{value:b});var w=function(e){function t(){var n=e.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomNameTooLongError=w,Object.defineProperty(s,53101,{value:w});var k=function(e){function t(){var n=e.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomNameCharsInvalidError=k,Object.defineProperty(s,53102,{value:k});var S=function(e){function t(){var n=e.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomCreateFailedError=S,Object.defineProperty(s,53103,{value:S});var T=function(e){function t(){var n=e.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomConnectFailedError=T,Object.defineProperty(s,53104,{value:T});var C=function(e){function t(){var n=e.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomMaxParticipantsExceededError=C,Object.defineProperty(s,53105,{value:C});var O=function(e){function t(){var n=e.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomNotFoundError=O,Object.defineProperty(s,53106,{value:O});var E=function(e){function t(){var n=e.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomMaxParticipantsOutOfRangeError=E,Object.defineProperty(s,53107,{value:E});var P=function(e){function t(){var n=e.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomTypeInvalidError=P,Object.defineProperty(s,53108,{value:P});var x=function(e){function t(){var n=e.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomTimeoutOutOfRangeError=x,Object.defineProperty(s,53109,{value:x});var R=function(e){function t(){var n=e.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomStatusCallbackMethodInvalidError=R,Object.defineProperty(s,53110,{value:R});var j=function(e){function t(){var n=e.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomStatusCallbackInvalidError=j,Object.defineProperty(s,53111,{value:j});var A=function(e){function t(){var n=e.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomStatusInvalidError=A,Object.defineProperty(s,53112,{value:A});var L=function(e){function t(){var n=e.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomRoomExistsError=L,Object.defineProperty(s,53113,{value:L});var I=function(e){function t(){var n=e.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomInvalidParametersError=I,Object.defineProperty(s,53114,{value:I});var D=function(e){function t(){var n=e.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomMediaRegionInvalidError=D,Object.defineProperty(s,53115,{value:D});var M=function(e){function t(){var n=e.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomMediaRegionUnavailableError=M,Object.defineProperty(s,53116,{value:M});var N=function(e){function t(){var n=e.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomSubscriptionOperationNotSupportedError=N,Object.defineProperty(s,53117,{value:N});var V=function(e){function t(){var n=e.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomCompletedError=V,Object.defineProperty(s,53118,{value:V});var U=function(e){function t(){var n=e.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomAudioOnlyFlagNotSupportedError=U,Object.defineProperty(s,53124,{value:U});var F=function(e){function t(){var n=e.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.RoomTrackKindNotSupportedError=F,Object.defineProperty(s,53125,{value:F});var H=function(e){function t(){var n=e.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.ParticipantIdentityInvalidError=H,Object.defineProperty(s,53200,{value:H});var B=function(e){function t(){var n=e.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.ParticipantIdentityTooLongError=B,Object.defineProperty(s,53201,{value:B});var W=function(e){function t(){var n=e.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.ParticipantIdentityCharsInvalidError=W,Object.defineProperty(s,53202,{value:W});var z=function(e){function t(){var n=e.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.ParticipantMaxTracksExceededError=z,Object.defineProperty(s,53203,{value:z});var q=function(e){function t(){var n=e.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.ParticipantNotFoundError=q,Object.defineProperty(s,53204,{value:q});var $=function(e){function t(){var n=e.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.ParticipantDuplicateIdentityError=$,Object.defineProperty(s,53205,{value:$});var G=function(e){function t(){var n=e.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.TrackInvalidError=G,Object.defineProperty(s,53300,{value:G});var Q=function(e){function t(){var n=e.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.TrackNameInvalidError=Q,Object.defineProperty(s,53301,{value:Q});var K=function(e){function t(){var n=e.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.TrackNameTooLongError=K,Object.defineProperty(s,53302,{value:K});var Y=function(e){function t(){var n=e.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.TrackNameCharsInvalidError=Y,Object.defineProperty(s,53303,{value:Y});var J=function(e){function t(){var n=e.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.TrackNameIsDuplicatedError=J,Object.defineProperty(s,53304,{value:J});var Z=function(e){function t(){var n=e.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.TrackServerTrackCapacityReachedError=Z,Object.defineProperty(s,53305,{value:Z});var X=function(e){function t(){var n=e.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.MediaClientLocalDescFailedError=X,Object.defineProperty(s,53400,{value:X});var ee=function(e){function t(){var n=e.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.MediaServerLocalDescFailedError=ee,Object.defineProperty(s,53401,{value:ee});var te=function(e){function t(){var n=e.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.MediaClientRemoteDescFailedError=te,Object.defineProperty(s,53402,{value:te});var ne=function(e){function t(){var n=e.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.MediaServerRemoteDescFailedError=ne,Object.defineProperty(s,53403,{value:ne});var re=function(e){function t(){var n=e.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.MediaNoSupportedCodecError=re,Object.defineProperty(s,53404,{value:re});var ie=function(e){function t(){var n=e.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.MediaConnectionError=ie,Object.defineProperty(s,53405,{value:ie});var oe=function(e){function t(){var n=e.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.MediaDTLSTransportFailedError=oe,Object.defineProperty(s,53407,{value:oe});var se=function(e){function t(){var n=e.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.ConfigurationAcquireFailedError=se,Object.defineProperty(s,53500,{value:se});var ae=function(e){function t(){var n=e.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(o);t.ConfigurationAcquireTurnFailedError=ae,Object.defineProperty(s,53501,{value:ae})},"6frX":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("wxsB"),s=function(e){function t(t,n,r,i,o,s,a){return e.call(this,t,n,r,i,o,s,a)||this}return i(t,e),t.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},t.prototype.setPriority=function(t){return e.prototype.setPriority.call(this,t)},t}(n("A/ij")(o));e.exports=s},"6kkQ":function(e,t){var n="1234567890abcdef";function r(e){for(var t="",r=0;r<32;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return""+e+t}t.sessionSID=r("SS"),t.createSID=r},"6ltx":function(e,t,n){"use strict";var r=n("j4sL"),i=n("XI6i");e.exports=function(e){var t=e.audio,n=e.video;Object.defineProperties(this,{level:{value:e.level,enumerable:!0},audio:{value:t?new r(t):null,enumerable:!0},video:{value:n?new i(n):null,enumerable:!0}})}},"6vXP":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(n("+EQa"));e.exports=o},"7C7v":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(n("5UJR"));e.exports=o},"7bK7":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t}(n("uBG5"));e.exports=o},"89tg":function(e,t,n){var r=n("MCLT"),i=n("zMHY"),o=n("kThA");function s(e){o.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=s.DEFAULT_FACTOR,e&&void 0!==e.factor&&(i.checkArgument(e.factor>1,"Exponential factor should be greater than 1 but got %s.",e.factor),this.factor_=e.factor)}r.inherits(s,o),s.DEFAULT_FACTOR=2,s.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},s.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()},e.exports=s},"8QmE":function(e,t,n){"use strict";var r=n("BWbm").flatMap,i=n("BWbm").guessBrowser,o=n("BWbm").guessBrowserVersion,s=n("iWhl").getSdpFormat,a=i(),c=o(),u="chrome"===a,l="firefox"===a,d="safari"===a,h=u?c.major:null;function p(e){var t=Array.from(e.values()).find(function(e){return"candidate-pair"===e.type&&e.nominated});if(!t)return null;var n=e.get(t.localCandidateId),r=e.get(t.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],o=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),s=n?o.reduce(function(e,t){return e[t.key]=typeof n[t.key]===t.type?n[t.key]:"deleted"!==t.key&&null,e},{}):null,a=r?i.reduce(function(e,t){return e[t.key]=typeof r[t.key]===t.type?r[t.key]:null,e},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(e){return"inprogress"===e?"in-progress":e}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(e,n){return e[n.key]=typeof t[n.key]===n.type?n.fixup?n.fixup(t[n.key]):t[n.key]:null,e},{localCandidate:s,remoteCandidate:a})}function f(e){var t=Array.from(e.values()).find(function(e){return"candidate-pair"===e.type&&e.nominated});if(!t)return null;var n=e.get(t.localCandidateId),r=e.get(t.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],o=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),s={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},a=n?o.reduce(function(e,t){var r=t.ffKeys&&t.ffKeys.find(function(e){return e in n})||t.key;return e[t.key]=typeof n[r]===t.type?"candidateType"===r&&s[n[r]]||n[r]:"deleted"!==r&&null,e},{}):null,c=r?i.reduce(function(e,t){var n=t.ffKeys&&t.ffKeys.find(function(e){return e in r})||t.key;return e[t.key]=typeof r[n]===t.type?"candidateType"===n&&s[r[n]]||r[n]:null,e},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(e,n){return e[n.key]=typeof t[n.key]===n.type?t[n.key]:null,e},{localCandidate:a,remoteCandidate:c})}function m(e,t,n){var i="local"===n?"getSenders":"getReceivers";return e[i]?e[i]().map(function(e){return e.track}).filter(function(e){return e&&e.kind===t}):r(e["local"===n?"getLocalStreams":"getRemoteStreams"](),function(e){return e["audio"===t?"getAudioTracks":"getVideoTracks"]()})}function v(e,t){return new Promise(function(n,r){h&&h<67?e.getStats(function(e){n([g(e,t)])},null,r):e.getStats(t).then(function(e){n(function(e){var t=null,n=[],r=null,i=null,o=null,s=null,a=null;e.forEach(function(e){switch(e.type){case"inbound-rtp":t=e;break;case"outbound-rtp":n.push(e);break;case"media-source":a=e;break;case"track":o=e;break;case"codec":s=e;break;case"remote-inbound-rtp":r=e;break;case"remote-outbound-rtp":i=e}});var c=o&&o.remoteSource,u=[],l=c?i:r;return(c?[t]:n).forEach(function(e){var t={},n=[e,a,o,s,l&&l.ssrc===e.ssrc?l:null];function r(e){var t=n.find(function(t){return t&&void 0!==t[e]})||null;return t?t[e]:null}var i=r("ssrc");"number"==typeof i&&(t.ssrc=String(i));var d=r("timestamp");t.timestamp=Math.round(d);var h=r("mimeType");"string"==typeof h&&(h=h.split("/"),t.codecName=h[h.length-1]);var p=r("roundTripTime");"number"==typeof p&&(t.roundTripTime=Math.round(1e3*p));var f=r("jitter");"number"==typeof f&&(t.jitter=Math.round(1e3*f));var m=r("frameWidth");"number"==typeof m&&(c?t.frameWidthReceived=m:(t.frameWidthSent=m,t.frameWidthInput=o.frameWidth));var v=r("frameHeight");"number"==typeof v&&(c?t.frameHeightReceived=v:(t.frameHeightSent=v,t.frameHeightInput=o.frameHeight));var g=r("framesPerSecond");"number"==typeof g&&(t[c?"frameRateReceived":"frameRateSent"]=g);var y=r("bytesReceived");"number"==typeof y&&(t.bytesReceived=y);var _=r("bytesSent");"number"==typeof _&&(t.bytesSent=_);var b=r("packetsLost");"number"==typeof b&&(t.packetsLost=b);var w=r("packetsReceived");"number"==typeof w&&(t.packetsReceived=w);var k=r("packetsSent");"number"==typeof k&&(t.packetsSent=k);var S=r("audioLevel");"number"==typeof S&&(S=Math.round(32767*S),c?t.audioOutputLevel=S:t.audioInputLevel=S);var T=r("totalPacketSendDelay");"number"==typeof T&&(t.totalPacketSendDelay=T);var C=r("totalEncodeTime");"number"==typeof C&&(t.totalEncodeTime=C);var O=r("framesEncoded");"number"==typeof O&&(t.framesEncoded=O);var E=r("estimatedPlayoutTimestamp");"number"==typeof E&&(t.estimatedPlayoutTimestamp=E);var P=r("totalDecodeTime");"number"==typeof P&&(t.totalDecodeTime=P);var x=r("framesDecoded");"number"==typeof x&&(t.framesDecoded=x);var R=r("jitterBufferDelay");"number"==typeof R&&(t.jitterBufferDelay=R);var j=r("jitterBufferEmittedCount");"number"==typeof j&&(t.jitterBufferEmittedCount=j),u.push(t)}),u}(e))},r)})}function g(e,t){var n=e.result().find(function(e){return"ssrc"===e.type&&e.stat("googTrackId")===t.id}),r={};return n&&(r.timestamp=Math.round(Number(n.timestamp)),r=n.names().reduce(function(e,t){switch(t){case"googCodecName":e.codecName=n.stat(t);break;case"googRtt":e.roundTripTime=Number(n.stat(t));break;case"googJitterReceived":e.jitter=Number(n.stat(t));break;case"googFrameWidthInput":e.frameWidthInput=Number(n.stat(t));break;case"googFrameHeightInput":e.frameHeightInput=Number(n.stat(t));break;case"googFrameWidthSent":e.frameWidthSent=Number(n.stat(t));break;case"googFrameHeightSent":e.frameHeightSent=Number(n.stat(t));break;case"googFrameWidthReceived":e.frameWidthReceived=Number(n.stat(t));break;case"googFrameHeightReceived":e.frameHeightReceived=Number(n.stat(t));break;case"googFrameRateInput":e.frameRateInput=Number(n.stat(t));break;case"googFrameRateSent":e.frameRateSent=Number(n.stat(t));break;case"googFrameRateReceived":e.frameRateReceived=Number(n.stat(t));break;case"ssrc":e[t]=n.stat(t);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":e[t]=Number(n.stat(t))}return e},r)),r}function y(e,t){e=e||new Map;var n=null,r=null;e.forEach(function(t){if(!t.isRemote)switch(t.type){case"inbound-rtp":n=t,r=e.get(t.remoteId);break;case"outbound-rtp":r=t,n=e.get(t.remoteId)}});var i=t?n:r,o=t?r:n;function s(e){return i&&void 0!==i[e]?i[e]:o&&void 0!==o[e]?o[e]:null}var a={},c=s("timestamp");a.timestamp=Math.round(c);var u=s("ssrc");"number"==typeof u&&(a.ssrc=String(u));var l=s("bytesSent");"number"==typeof l&&(a.bytesSent=l);var d=s("packetsLost");"number"==typeof d&&(a.packetsLost=d);var h=s("packetsSent");"number"==typeof h&&(a.packetsSent=h);var p=s("roundTripTime");"number"==typeof p&&(a.roundTripTime=Math.round(1e3*p));var f=s("jitter");"number"==typeof f&&(a.jitter=Math.round(1e3*f));var m=s("framerateMean");"number"==typeof m&&(a.frameRateSent=Math.round(m));var v=s("bytesReceived");"number"==typeof v&&(a.bytesReceived=v);var g=s("packetsReceived");"number"==typeof g&&(a.packetsReceived=g);var y=s("framerateMean");"number"==typeof y&&(a.frameRateReceived=Math.round(y));var _=s("totalPacketSendDelay");"number"==typeof _&&(a.totalPacketSendDelay=_);var b=s("totalEncodeTime");"number"==typeof b&&(a.totalEncodeTime=b);var w=s("framesEncoded");"number"==typeof w&&(a.framesEncoded=w);var k=s("estimatedPlayoutTimestamp");"number"==typeof k&&(a.estimatedPlayoutTimestamp=k);var S=s("totalDecodeTime");"number"==typeof S&&(a.totalDecodeTime=S);var T=s("framesDecoded");"number"==typeof T&&(a.framesDecoded=T);var C=s("jitterBufferDelay");"number"==typeof C&&(a.jitterBufferDelay=C);var O=s("jitterBufferEmittedCount");return"number"==typeof O&&(a.jitterBufferEmittedCount=O),a}e.exports=function(e,t){return e&&"function"==typeof e.getStats?function(e,t){var n=m(e,"audio","local"),i=m(e,"video","local"),o=m(e,"audio"),a=m(e,"video"),c={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},h=r([[n,"localAudioTrackStats",!1],[i,"localVideoTrackStats",!1],[o,"remoteAudioTrackStats",!0],[a,"remoteVideoTrackStats",!0]],function(n){var r=n[1],i=n[2];return n[0].map(function(n){return function(e,t,n){return void 0!==(n=n||{}).testForChrome||u?v(e,t):void 0!==n.testForFirefox||l?function(e,t,n){return new Promise(function(r,i){e.getStats(t).then(function(e){r([y(e,n)])},i)})}(e,t,n.isRemote):void 0!==n.testForSafari||d?void 0!==n.testForSafari||"unified"===s()?v(e,t):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(e,n,Object.assign({isRemote:i},t)).then(function(e){e.forEach(function(e){e.trackId=n.id,c[r].push(e)})})})});return Promise.all(h).then(function(){return function(e,t){return void 0!==(t=t||{}).testForChrome||u||void 0!==t.testForSafari||d?e.getStats().then(p):void 0!==t.testForFirefox||l?e.getStats().then(f):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(e,t)}).then(function(e){return c.activeIceCandidatePair=e,c})}(e,t):Promise.reject(new Error("Given PeerConnection does not support getStats"))}},"8WNc":function(e,t,n){"use strict";e.exports=function(e,t,n){Object.defineProperties(this,{id:{enumerable:!0,value:e},trackId:{enumerable:!0,value:t},bitrate:{enumerable:!0,value:n}})}},"8vSI":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(n("+EQa"));e.exports=o},"8yKx":function(e,t,n){"use strict";var r=n("+qE3").EventEmitter;function i(){Object.defineProperties(this,{_eventEmitter:{value:new r}})}i.prototype.dispatchEvent=function(e){return this._eventEmitter.emit(e.type,e)},i.prototype.addEventListener=function(){return this._eventEmitter.addListener.apply(this._eventEmitter,arguments)},i.prototype.removeEventListener=function(){return this._eventEmitter.removeListener.apply(this._eventEmitter,arguments)},e.exports=i},"9/wP":function(e,t,n){"use strict";var r=n("2h1k").MediaStreamTrack,i=n("BWbm"),o=i.guessBrowser,s=i.guessBrowserVersion,a=n("/kv6"),c=n("o2QH"),u=n("MItk"),l=n("tPbP"),d=n("sJKT"),h=n("VR5W"),p=h.LocalAudioTrack,f=h.LocalDataTrack,m=h.LocalVideoTrack,v=n("nj3X"),g=n("+kOg"),y=n("wAda"),_=n("ghd6"),b=_.asLocalTrack,w=_.buildLogLevels,k=_.filterObject,S=_.isNonArrayObject,T=n("xwWy"),C=T.DEFAULT_ENVIRONMENT,O=T.DEFAULT_LOG_LEVEL,E=T.DEFAULT_LOGGER_NAME,P=T.DEFAULT_REALM,x=T.DEFAULT_REGION,R=T.WS_SERVER,j=T.SDK_NAME,A=T.SDK_VERSION,L=T.typeErrors,I=n("sYJf"),D=n("VgEY"),M=n("S3Hu"),N=n("N7NK").validateBandwidthProfile,V="safari"===o()&&s(),U=0,F=!1,H=!1;if(V){var B=V.major;H=B<12||12===B&&V.minor<1}var W=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),z=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function q(e,t,n){n.forEach(function(n){var r=n.didWarn,i=n.name,o=n.newName,s=n.shouldDelete;i in e&&void 0!==e[i]&&(o&&s&&(e[o]=e[i]),s&&delete e[i],r||["error","off"].includes(t.level)||(t.warn('The ConnectOptions "'+i+'" is '+(o?'deprecated and scheduled for removal. Please use "'+o+'" instead.':"no longer applicable and will be ignored.")),n.didWarn=!0))})}function $(e,t,n,r,i,o){var s=e.createLocalParticipantSignaling(n,r);return t.debug("Creating a new LocalParticipant:",s),new i.LocalParticipant(s,o,i)}function G(e,t,n){var r=new g(t,n,e),i=e.log;return i.debug("Creating a new Room:",r),n.on("stateChanged",function e(t){"disconnected"===t&&(i.info("Disconnected from Room:",r.toString()),n.removeListener("stateChanged",e))}),r}function Q(e,t,n,r,i,o){return t.log.debug("Creating a new RoomSignaling"),n.connect(o._signaling,e,r,i,t)}function K(e,t){var n=e.log;return e.shouldStopLocalTracks=!e.tracks,e.shouldStopLocalTracks?n.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(n.info("Getting LocalTracks"),n.debug("Options:",e)),e.createLocalTracks(e).then(function(r){var i=t(r);return i.catch(function(){e.shouldStopLocalTracks&&(n.info("The automatically acquired LocalTracks will now be stopped"),r.forEach(function(e){e.stop()}))}),i})}function Y(e){var t="string"==typeof e?{codec:e}:e;switch(t.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},t);case"vp8":return Object.assign({simulcast:!1},t);default:return t}}e.exports=function(e,t){if(void 0===t&&(t={}),!S(t))return I.reject(L.INVALID_TYPE("options","object"));var n,i=t.Log||M,o=t.loggerName||E,s=t.logLevel||O,h=w(s),g="[connect #"+ ++U+"]";try{n=new i("default",g,h,o)}catch(X){return I.reject(X)}q(t,n,W);var _="auto"===t.preferredVideoCodecs;if(_&&(t.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),t.maxVideoBitrate&&_)return n.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),I.reject(L.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));var T={};"string"==typeof(t=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,environment:C,eventListener:null,insights:!0,LocalAudioTrack:p,LocalDataTrack:f,LocalParticipant:u,LocalVideoTrack:m,Log:i,MediaStreamTrack:r,loggerName:o,logLevel:s,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:P,region:x,signaling:y},k(t))).wsServerInsights&&(T.gateway=t.wsServerInsights);var V=new(t.insights?l:d)(e,j,A,t.environment,t.realm,T),B=R(t.environment,t.region),J=new D(V,Date.now(),n,t.eventListener);if((t=Object.assign({eventObserver:J,wsServer:B},t)).log=n,H&&!F&&"error"!==n.logLevel&&"off"!==n.logLevel&&(F=!0,n.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),"string"!=typeof e)return I.reject(L.INVALID_TYPE("token","string"));var Z=Object.assign({},t);if(delete Z.name,"tracks"in t){if(!Array.isArray(t.tracks))return I.reject(L.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{t.tracks=t.tracks.map(function(e){return b(e,Z)})}catch(X){return I.reject(X)}}var X=N(t.bandwidthProfile);if(X)return I.reject(X);t.clientTrackSwitchOffControl="disabled",t.contentPreferencesMode="disabled",t.bandwidthProfile&&(t.clientTrackSwitchOffControl="auto",t.contentPreferencesMode="auto",t.bandwidthProfile.video&&(q(t.bandwidthProfile.video,n,z),t.clientTrackSwitchOffControl="maxTracks"in t.bandwidthProfile.video?"disabled":"manual"===t.bandwidthProfile.video.clientTrackSwitchOffControl?"manual":"auto",t.contentPreferencesMode="renderDimensions"in t.bandwidthProfile.video?"disabled":"manual"===t.bandwidthProfile.video.contentPreferencesMode?"manual":"auto"));var ee=new(0,t.signaling)(t.wsServer,t);n.info("Connecting to a Room"),n.debug("Options:",t);var te=new c({maxAudioBitrate:t.maxAudioBitrate,maxVideoBitrate:t.maxVideoBitrate},_),ne={audio:t.preferredAudioCodecs.map(Y),video:t.preferredVideoCodecs.map(Y)},re=new v(S(t.networkQuality)?t.networkQuality:{}),ie=a(K.bind(null,t),$.bind(null,ee,n,te,re,t),Q.bind(null,e,t,ee,te,ne),G.bind(null,t));return ie.then(function(e){return V.connect(e.sid,e.localParticipant.sid),n.info("Connected to Room:",e.toString()),n.info("Room name:",e.name),n.debug("Room:",e),e.once("disconnected",function(){return V.disconnect()}),e},function(e){V.disconnect(),ie._isCanceled?n.info("Attempt to connect to a Room was canceled"):n.info("Error while connecting to a Room:",e)}),ie}},"9FmL":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("B32u"),s=n("oy54"),a=n("xwWy").DEFAULT_FRAME_RATE,c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return Object.defineProperties(r,{_captureTimeoutId:{value:null,writable:!0},_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0}}),r._processorEventObserver=new(n.VideoProcessorEventObserver||s)(r._log),r}return i(t,e),t.prototype._checkIfCanCaptureFrames=function(e){void 0===e&&(e=!1);var t=!0,n="",r=this.mediaStreamTrack;return r.enabled||(t=!1,n="MediaStreamTrack is disabled"),"ended"===r.readyState&&(t=!1,n="MediaStreamTrack is ended"),this.processor||(t=!1,n="VideoProcessor not detected."),this._attachments.size||e||(t=!1,n="VideoTrack is not publishing and there is no attached element."),n&&this._log.debug(n),{canCaptureFrames:t,message:n}},t.prototype._captureFrames=function(){var e=this;if(this._isCapturing)this._log.debug("Ignoring captureFrames call. Capture is already in progress");else{if(!this._checkIfCanCaptureFrames().canCaptureFrames)return this._isCapturing=!1,void this._log.debug("Cannot capture frames. Ignoring captureFrames call.");this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var t,n=Date.now();this._dummyEl.play().then(function(){var r=function(n){clearTimeout(e._captureTimeoutId);var r=e.mediaStreamTrack.getSettings().frameRate,i=Math.floor(1e3/(void 0===r?a:r))-t;(i<0||"number"!=typeof t)&&(i=0),e._captureTimeoutId=setTimeout(n,i)},i=function(){var o=e._checkIfCanCaptureFrames();if(!o.canCaptureFrames)return e._isCapturing=!1,e._processorEventObserver.emit("stop",o.message),void e._log.debug("Cannot capture frames. Stopping capturing frames.");n=Date.now();var s=e.mediaStreamTrack.getSettings(),a=s.width,c=void 0===a?0:a,u=s.height,l=void 0===u?0:u;e._inputFrame.width!==c&&(e._inputFrame.width=c,e._inputFrame.height=l,e._outputFrame&&(e._outputFrame.width=c,e._outputFrame.height=l)),e._inputFrame.getContext("2d").drawImage(e._dummyEl,0,0,c,l);var d=null;try{d=e.processor.processFrame(e._inputFrame,e._outputFrame)}catch(h){e._log.debug("Exception detected after calling processFrame.",h)}(d instanceof Promise?d:Promise.resolve(d)).then(function(){e._outputFrame&&(e.processedTrack.requestFrame(),e._processorEventObserver.emit("stats"))}).finally(function(){t=Date.now()-n,r(i)})};r(i)}).catch(function(t){return e._log.error("Video element cannot be played",{error:t,track:e})})}},t.prototype._initialize=function(){var n=this;e.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){u(n,n._dummyEl)&&(n.dimensions.width=n._dummyEl.videoWidth,n.dimensions.height=n._dummyEl.videoHeight)},this._dummyEl.onresize=function(){u(n,n._dummyEl)&&(n.dimensions.width=n._dummyEl.videoWidth,n.dimensions.height=n._dummyEl.videoHeight,n.isStarted&&(n._log.debug("Dimensions changed:",n.dimensions),n.emit(t.DIMENSIONS_CHANGED,n)))})},t.prototype._restartProcessor=function(){var e=this.processor;e&&(this.removeProcessor(e),this.addProcessor(e))},t.prototype._start=function(t){return this.dimensions.width=t.videoWidth,this.dimensions.height=t.videoHeight,this._log.debug("Dimensions:",this.dimensions),e.prototype._start.call(this,t)},t.prototype.addProcessor=function(e){var t=this;if("function"!=typeof OffscreenCanvas)return this._log.warn("Adding a VideoProcessor is not supported in this browser.");if(!e||"function"!=typeof e.processFrame)throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",e),this._unmuteHandler||(this._unmuteHandler=function(){t._log.debug("mediaStreamTrack unmuted"),t.processedTrack.muted&&(t._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),t._restartProcessor())},this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler));var n=this.mediaStreamTrack.getSettings(),r=n.width,i=void 0===r?0:r,o=n.height,s=void 0===o?0:o,c=n.frameRate,u=void 0===c?a:c;return this._inputFrame=new OffscreenCanvas(i,s),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=i,this._outputFrame.height=s,this.processedTrack=this._outputFrame.captureStream(0).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=e,this._processorEventObserver.emit("add",{processor:e,captureHeight:s,captureWidth:i,inputFrameRate:u,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack")}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},t.prototype.attach=function(){var t=e.prototype.attach.apply(this,arguments);return this.processor&&this._captureFrames(),t},t.prototype.detach=function(){return e.prototype.detach.apply(this,arguments)},t.prototype.removeProcessor=function(e){if(!e)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(e!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",e),clearTimeout(this._captureTimeoutId),this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame.getContext("2d").clearRect(0,0,this._inputFrame.width,this._inputFrame.height),this._outputFrame.getContext("2d").clearRect(0,0,this._outputFrame.width,this._outputFrame.height),this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},t}(o);function u(e,t){return e.dimensions.width!==t.videoWidth||e.dimensions.height!==t.videoHeight}c.DIMENSIONS_CHANGED="dimensionsChanged",e.exports=c},"9dY8":function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=n("ghd6"),o=i.difference,s=i.flatMap,a=n("qRNy"),c={0:"PCMU",8:"PCMA"};function u(e){return Array.from(d(e)).reduce(function(e,t){var n=t[0],r=t[1],i=e.get(r)||[];return e.set(r,i.concat(n))},new Map)}function l(e){return f(e).reduce(function(e,t){var n=p(t);return n?e.set(n,t):e},new Map)}function d(e){return m(e).reduce(function(t,n){var r=new RegExp("a=rtpmap:"+n+" ([^/]+)"),i=e.match(r),o=i?i[1].toLowerCase():c[n]?c[n].toLowerCase():"";return t.set(n,o)},new Map)}function h(e,t){var n=new RegExp("^a=fmtp:"+e+" (.+)$","m"),i=t.match(n);return i&&i[1].split(";").reduce(function(e,t){var n=r(t.split("="),2),i=n[1];return e[n[0]]=isNaN(i)?i:parseInt(i,10),e},{})}function p(e){var t=e.match(/^a=mid:(.+)$/m);return t&&t[1]}function f(e,t,n){return e.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map(function(e){return"m="+e}).filter(function(e){var r=new RegExp("m="+(t||".*"),"gm"),i=new RegExp("a="+(n||".*"),"gm");return r.test(e)&&i.test(e)})}function m(e){var t=e.split("\r\n")[0].match(/([0-9]+)/g);return t?t.slice(1).map(function(e){return parseInt(e,10)}):[]}function v(e,t){var n=t.split("\r\n"),r=n[0],i=n.slice(1);return[r=r.replace(/([0-9]+\s?)+$/,e.join(" "))].concat(i).join("\r\n")}function g(e,t){var n=f(e);return[e.split("\r\nm=")[0]].concat(n.map(function(e){if(!/^m=(audio|video)/.test(e))return e;var n=p(e);if(!n)return e;var i=t.get(n);if(!i)return e;var o=(e.match(/^a=msid:(.+)$/m)||[])[1];if(!o)return e;var s=r(o.split(" "),2),a=s[0],c=s[1],u=new RegExp("msid:"+a+(c?" "+c:"")+"$","gm");return e.replace(u,"msid:"+a+" "+i)})).join("\r\n")}function y(e,t){return"a=fmtp:"+e+" "+Object.entries(t).map(function(e){var t=r(e,2);return t[0]+"="+t[1]}).join(";")}t.addOrRewriteNewTrackIds=function(e,t,n){var i=Array.from(n).reduce(function(n,i){var o=r(i,2),s=o[1];return f(e,o[0],"send(only|recv)").map(p).filter(function(e){return!t.has(e)}).forEach(function(e,t){return n.set(e,s[t])}),n},new Map);return g(e,i)},t.addOrRewriteTrackIds=g,t.createCodecMapForMediaSection=u,t.createPtToCodecName=d,t.disableRtx=function(e){var t=f(e);return[e.split("\r\nm=")[0]].concat(t.map(function(e){if(!/^m=video/.test(e))return e;var t=u(e).get("rtx");if(!t)return e;var n=new Set(m(e));t.forEach(function(e){return n.delete(e)});var r=e.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),i=r&&r[1],o=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(i?[new RegExp("^a=ssrc:"+i+" .+$")]:[]);return e=e.split("\r\n").filter(function(e){return o.every(function(t){return!t.test(e)})}).join("\r\n"),v(Array.from(n),e)})).join("\r\n")},t.enableDtxForOpus=function(e,t){var n=f(e),r=e.split("\r\nm=")[0];return t=t||n.filter(function(e){return/^m=audio/.test(e)}).map(p),[r].concat(n.map(function(e){if(!/^m=audio/.test(e))return e;var n=u(e).get("opus");if(!n)return e;var r=h(n,e);if(!r)return e;var i=y(n,r),o=new RegExp(i),s=p(e);t.includes(s)?r.usedtx=1:delete r.usedtx;var a=y(n,r);return e.replace(o,a)})).join("\r\n")},t.filterLocalCodecs=function(e,t){var n=f(e),i=e.split("\r\nm=")[0],o=l(t);return[i].concat(n.map(function(e){return function(e,t,n){if(!/^m=(audio|video)/.test(e))return e;var i=p(e),o=i&&t.get(i);if(!o)return e;var a=d(o),c=u(e),l=s(Array.from(a),function(t){var i=r(t,2),s=i[0],a=i[1];return"rtx"===a||n.includes(a)?[]:function(e,t,n,r,i){var o=n.get(e)||[];if(o.length<=1)return o;var s=h(t,i);if(!s)return o;var a=o.find(function(e){var t=h(e,r);return t&&Object.keys(s).every(function(e){return s[e]===t[e]})});return"number"==typeof a?[a]:o}(a,s,c,e,o)}),f=c.get("rtx")||[];l=l.concat(f.filter(function(t){var n=h(t,e);return n&&l.includes(n.apt)}));var g=e.split("\r\n").filter(function(e){var t=e.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),n=t&&t[2];return!t||n&&l.includes(parseInt(n,10))});return v(m(e).filter(function(e){return l.includes(e)}),g.join("\r\n"))}(e,o,[])})).join("\r\n")},t.getMediaSections=f,t.removeSSRCAttributes=function(e,t){return e.split("\r\n").filter(function(e){return!t.find(function(t){return new RegExp("a=ssrc:.*"+t+":","g").test(e)})}).join("\r\n")},t.revertSimulcast=function(e,t,n,r){void 0===r&&(r=!1);var i=l(n),o=l(t),s=f(e);return[e.split("\r\nm=")[0]].concat(s.map(function(e){if(e=e.replace(/\r\n$/,""),!/^m=video/.test(e))return e;var t=e.match(/^a=mid:(.+)$/m),n=t&&t[1];if(!n)return e;var s=i.get(n),a=d(s),c=m(s),u=c.length&&"vp8"===a.get(c[0]);return r||!u?o.get(n).replace(/\r\n$/,""):e})).concat("").join("\r\n")},t.setCodecPreferences=function(e,t,n){var r=f(e);return[e.split("\r\nm=")[0]].concat(r.map(function(e){if(!/^m=(audio|video)/.test(e))return e;var r=e.match(/^m=(audio|video)/)[1],i=u(e),a=function(e,t){t=t.map(function(e){return e.codec.toLowerCase()});var n=s(t,function(t){return e.get(t)||[]}),r=o(Array.from(e.keys()),t),i=s(r,function(t){return e.get(t)});return n.concat(i)}(i,"audio"===r?t:n),c=v(a,e),l=i.get("pcma")||[],d=i.get("pcmu")||[];return("audio"===r?new Set(l.concat(d)):new Set).has(a[0])?c.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):c})).join("\r\n")},t.setSimulcast=function(e,t){var n=f(e);return[e.split("\r\nm=")[0]].concat(n.map(function(e){if(e=e.replace(/\r\n$/,""),!/^m=video/.test(e))return e;var n=u(e),r=m(e),i=new Set(n.get("vp8")||[]);return r.some(function(e){return i.has(e)})?a(e,t):e})).concat("").join("\r\n")}},"A/ij":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=n("xwWy"),c=a.typeErrors,u=a.trackPriority,l=n("BWbm"),d=l.guessBrowser,h=l.isIOSChrome,p=n("UBwA");e.exports=function(e){return function(e){function t(t,n,r,i,o,s,a){var c=this;return a=Object.assign({workaroundWebKitBug212780:("safari"===d()||h())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},a),c=e.call(this,n,a)||this,Object.defineProperties(c,{_isEnabled:{value:r,writable:!0},_isSwitchedOff:{value:i,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:o},_setRenderHint:{value:function(e){c._log.debug("updating render hint:",e),s(e)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:t},_workaroundWebKitBug212780:{value:a.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),c}return i(t,e),t.prototype.setPriority=function(e){var t=s([null],o(Object.values(u)));if(!t.includes(e))throw c.INVALID_VALUE("priority",t);return this._priority!==e&&(this._priority=e,this._setPriority(e)),this},t.prototype._setEnabled=function(e){this._isEnabled!==e&&(this._isEnabled=e,this.emit(this._isEnabled?"enabled":"disabled",this))},t.prototype._setSwitchedOff=function(e){this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit(e?"switchedOff":"switchedOn",this))},t.prototype.attach=function(t){var n=e.prototype.attach.call(this,t);return!0!==this.mediaStreamTrack.enabled&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||function(e){var t=e._log,n=e.kind;function r(r){r&&e._attachments.forEach(function(r){var i=e._elShims.get(r);r.paused&&i&&!i.pausedIntentionally()&&(t.info("Playing inadvertently paused <"+n+"> element"),t.debug("Element:",r),t.debug("RemoteMediaTrack:",e),r.play().then(function(){t.info("Successfully played inadvertently paused <"+n+"> element"),t.debug("Element:",r),t.debug("RemoteMediaTrack:",e)}).catch(function(i){t.warn("Error while playing inadvertently paused <"+n+"> element:",{err:i,el:r,remoteMediaTrack:e})}))})}return p.onVisibilityChange(2,r),function(){p.offVisibilityChange(2,r)}}(this)),n},t.prototype.detach=function(t){var n=e.prototype.detach.call(this,t);return 0===this._attachments.size&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),n},t}(e)}},Aq89:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("zbom"),s=n("EHr0"),a=n("Y1/N"),c=function(e){function t(t,n,r){var i=e.call(this,t,"network_quality",r)||this;return Object.defineProperties(i,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new s},_resendTimer:{value:new a(function(){i._resendTimer.setDelay(1.5*i._resendTimer.delay),i._sendNetworkQualityInputs()},5e3,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:n.local,remoteReportLevel:n.remote}}}}),i.on("ready",function(e){e.on("message",function(e){switch(i._log.debug("Incoming: ",e),e.type){case"network_quality":i._handleNetworkQualityMessage(e)}})}),i._sendNetworkQualityInputs(),i}return i(t,e),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),t.prototype._handleNetworkQualityMessage=function(e){var t=this,n=!1,r=null,i=e?e.local:null;"number"==typeof i?(r=i,this._levels=null):"object"==typeof i&&i&&(this._levels=i,r="number"==typeof i.level?i.level:Math.min(i.audio.send,i.audio.recv,i.video.send,i.video.recv)),null!==r&&this.level!==r&&(this._level=r,n=!0),this._remoteLevels=e&&e.remotes?e.remotes.reduce(function(e,r){return(t._remoteLevels.get(r.sid)||{}).level!==r.level&&(n=!0),e.set(r.sid,r)},new Map):this._remoteLevels,n&&this.emit("updated"),this._resendTimer.setDelay(5e3),this._resendTimer.isSet&&setTimeout(function(){return t._sendNetworkQualityInputs()},1e3)},t.prototype._sendNetworkQualityInputs=function(){var e=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(t){e._transport&&e._transport.publish(function(e,t){return Object.assign({type:"network_quality"},e,t)}(t,e._networkQualityReportLevels))}).finally(function(){e._resendTimer.start()})},t.prototype.put=function(e){this._networkQualityInputs.put(e)},t}(o);e.exports=c},B32u:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("BWbm"),s=o.guessBrowser,a=o.isIOSChrome,c=n("2h1k").MediaStream,u=n("ghd6"),l=u.waitForEvent,d=u.waitForSometime,h=n("jxCJ"),p=function(e){function t(t,n){var r=this;n=Object.assign({playPausedElementsIfNotBackgrounded:("safari"===s()||a())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},n),r=e.call(this,t.id,t.kind,n)||this;var i=!1;return n=Object.assign({MediaStream:c},n),Object.defineProperties(r,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return i},set:function(e){i=e}},_playPausedElementsIfNotBackgrounded:{value:n.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:n.workaroundWebKitBug212780||n.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:n.MediaStream},isStarted:{enumerable:!0,get:function(){return i}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||t.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),r._initialize(),r}return i(t,e),t.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},t.prototype._initialize=function(){var e=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack.addEventListener("ended",function t(){e._end(),e.mediaStreamTrack.removeEventListener("ended",t)}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},t.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},t.prototype.attach=function(e){var t=this;if("string"==typeof e?e=this._selectElement(e):e||(e=this._createElement()),this._log.debug("Attempting to attach to element:",e),e=this._attach(e),this._shouldShimAttachedElements&&!this._elShims.has(e)){var n=this._playPausedElementsIfNotBackgrounded?function(){return function(e,t){var n=e.tagName.toLowerCase();t.warn("Unintentionally paused:",e),Promise.race([l(document,"visibilitychange"),d(1e3)]).then(function(){"visible"===document.visibilityState&&h.whenResolved("audio").then(function(){return t.info("Playing unintentionally paused <"+n+"> element"),t.debug("Element:",e),e.play()}).then(function(){t.info("Successfully played unintentionally paused <"+n+"> element"),t.debug("Element:",e)}).catch(function(r){t.warn("Error while playing unintentionally paused <"+n+"> element:",{error:r,el:e})})})}(e,t._log)}:null;this._elShims.set(e,function(e,t){void 0===t&&(t=null);var n=e.pause,r=e.play,i=!1;e.pause=function(){return i=!0,n.call(e)},e.play=function(){return i=!1,r.call(e)};var o=t?function(){i||t()}:null;return o&&e.addEventListener("pause",o),{pausedIntentionally:function(){return i},unShim:function(){e.pause=n,e.play=r,o&&e.removeEventListener("pause",o)}}}(e,n))}return e},t.prototype._attach=function(e,t){void 0===t&&(t=this.processedTrack||this.mediaStreamTrack);var n=e.srcObject;return n instanceof this._MediaStream||(n=new this._MediaStream),n["audio"===t.kind?"getAudioTracks":"getVideoTracks"]().forEach(function(e){n.removeTrack(e)}),n.addTrack(t),e.srcObject=n,e.autoplay=!0,e.playsInline=!0,this._attachments.has(e)||this._attachments.add(e),e},t.prototype._selectElement=function(e){var t=document.querySelector(e);if(!t)throw new Error("Selector matched no element: "+e);return t},t.prototype._updateElementsMediaStreamTrack=function(){var e=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(t){return e._attach(t)})},t.prototype._createElement=function(){return"undefined"!=typeof document?document.createElement(this.kind):null},t.prototype.detach=function(e){var t;return t="string"==typeof e?[this._selectElement(e)]:e?[e]:this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",t),this._detachElements(t),e?t[0]:t},t.prototype._detachElements=function(e){return e.map(this._detachElement.bind(this))},t.prototype._detachElement=function(e){if(!this._attachments.has(e))return e;var t=e.srcObject;return t instanceof this._MediaStream&&t.removeTrack(this.processedTrack||this.mediaStreamTrack),this._attachments.delete(e),this._shouldShimAttachedElements&&this._elShims.has(e)&&(this._elShims.get(e).unShim(),this._elShims.delete(e)),e},t.prototype._getAllAttachedElements=function(){var e=[];return this._attachments.forEach(function(t){e.push(t)}),e},t}(n("NCuz"));e.exports=p},BMBc:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this,o=null;"number"==typeof n.frameWidthInput&&"number"==typeof n.frameHeightInput&&(o={},Object.defineProperties(o,{width:{value:n.frameWidthInput,enumerable:!0},height:{value:n.frameHeightInput,enumerable:!0}}));var s=null;return"number"==typeof n.frameWidthSent&&"number"==typeof n.frameHeightSent&&(s={},Object.defineProperties(s,{width:{value:n.frameWidthSent,enumerable:!0},height:{value:n.frameHeightSent,enumerable:!0}})),Object.defineProperties(i,{captureDimensions:{value:o,enumerable:!0},dimensions:{value:s,enumerable:!0},captureFrameRate:{value:"number"==typeof n.frameRateInput?n.frameRateInput:null,enumerable:!0},frameRate:{value:"number"==typeof n.frameRateSent?n.frameRateSent:null,enumerable:!0}}),i}return i(t,e),t}(n("zYCr"));e.exports=o},BWbm:function(e,t,n){"use strict";function r(e,t,n,r){if(!(r in t)&&!r.match(/^on[a-z]+$/)){var i=!1;try{var o=Object.getOwnPropertyDescriptor(e,r);i=o&&!!o.get}catch(a){}if(!i){var s;try{s=typeof e[r]}catch(a){}"function"===s&&(t[r]=function(){return this[n][r].apply(this[n],arguments)})}}}function i(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:null}function o(e){return void 0===e&&(e=i()),/Chrome|CriOS/.test(e)?"chrome":/Firefox|FxiOS/.test(e)?"firefox":/Safari|iPhone|iPad|iPod/.test(e)?"safari":null}t.defer=function(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e},t.delegateMethods=function(e,t,n){for(var i in e)r(e,t,n,i)},t.difference=function(e,t){e=Array.isArray(e)?new Set(e):new Set(e.values()),t=Array.isArray(t)?new Set(t):new Set(t.values());var n=new Set;return e.forEach(function(e){t.has(e)||n.add(e)}),n},t.flatMap=function(e,t){return(e instanceof Map||e instanceof Set?Array.from(e.values()):e).reduce(function(e,n){var r=t(n);return e.concat(r)},[])},t.guessBrowser=o,t.guessBrowserVersion=function(e){void 0===e&&(e=i());var t={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[o(e)];if(!t)return null;var n=new RegExp("("+t+")/([^\\s]+)"),r=(e.match(n)||[])[2];if(!r)return null;var s=r.split(".").map(Number);return{major:isNaN(s[0])?null:s[0],minor:isNaN(s[1])?null:s[1]}},t.isIOSChrome=function(e){return void 0===e&&(e=i()),/Mobi/.test(e)&&"chrome"===o()&&/iPad|iPhone|iPod/.test(e)},t.interceptEvent=function(e,t){var n=null;Object.defineProperty(e,"on"+t,{get:function(){return n},set:function(e){n&&this.removeEventListener(t,n),"function"==typeof e?this.addEventListener(t,n=e):n=null}})},t.legacyPromise=function(e,t,n){return t?e.then(function(e){t(e)},function(e){n(e)}):e},t.makeUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},t.proxyProperties=function(e,t,n){Object.getOwnPropertyNames(e).forEach(function(e){!function(e,t,n,r){r in t||(r.match(/^on[a-z]+$/)?(Object.defineProperty(t,r,{value:null,writable:!0}),n.addEventListener(r.slice(2),function(){t.dispatchEvent.apply(t,arguments)})):Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[r]}}))}(0,t,n,e)})},t.support=function(){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia&&"function"==typeof RTCPeerConnection}},CQu1:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.runPreflight=t.PreflightTest=void 0;var c=n("xwWy"),u=n("mbHc"),l=n("ok1L"),d=n("VueP"),h=n("eqpY"),p=n("W/pi"),f=n("JRNH"),m=n("thyc"),v=n("ghd6"),g=n("xwWy").WS_SERVER,y=n("S3Hu"),_=n("mAYT"),b=n("qOIT"),w=n("VgEY"),k=n("tPbP"),S=n("6kkQ"),T=S.createSID,C=S.sessionSID,O=n("5wwa"),E=O.SignalingConnectionTimeoutError,P=O.MediaConnectionError;function x(e){return null!=e}var R=0,j=function(e){function t(t,n){var r=e.call(this)||this;r._testTiming=new u.Timer,r._dtlsTiming=new u.Timer,r._iceTiming=new u.Timer,r._peerConnectionTiming=new u.Timer,r._mediaTiming=new u.Timer,r._connectTiming=new u.Timer,r._sentBytesMovingAverage=new b,r._packetLossMovingAverage=new b,r._progressEvents=[],r._receivedBytesMovingAverage=new b;var i=n.environment,o=void 0===i?"prod":i,s=n.region,a=n.duration,l=void 0===a?1e4:a,d=n.wsServer||g(o,void 0===s?"gll":s);return r._log=new y("default",r,c.DEFAULT_LOG_LEVEL,c.DEFAULT_LOGGER_NAME),r._testDuration=l,r._instanceId=R++,r._testTiming.start(),r._runPreflightTest(t,o,d),r}return i(t,e),t.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},t.prototype.stop=function(){this._stopped=!0},t.prototype._generatePreflightReport=function(e){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:p.makeStat(null==e?void 0:e.jitter),rtt:p.makeStat(null==e?void 0:e.rtt),packetLoss:p.makeStat(null==e?void 0:e.packetLoss)},selectedIceCandidatePairStats:e?e.selectedIceCandidatePairStats:null,iceCandidateStats:e?e.iceCandidateStats:[],progressEvents:this._progressEvents,mos:p.makeStat(null==e?void 0:e.mos)}},t.prototype._executePreflightStep=function(e,t,n){return s(this,void 0,void 0,function(){var r,i,o,s;return a(this,function(a){switch(a.label){case 0:if(this._log.debug("Executing step: ",e),r=this._testDuration+1e4,this._stopped)throw new Error("stopped");i=Promise.resolve().then(t),o=null,s=new Promise(function(t,i){o=setTimeout(function(){i(n||new Error(e+" timeout."))},r)}),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,Promise.race([s,i])];case 2:return[2,a.sent()];case 3:return null!==o&&clearTimeout(o),[7];case 4:return[2]}})})},t.prototype._collectNetworkTimings=function(e){var t=this;return new Promise(function(n){var r;e.addEventListener("iceconnectionstatechange",function(){"checking"===e.iceConnectionState&&t._iceTiming.start(),"connected"===e.iceConnectionState&&(t._iceTiming.stop(),t._updateProgress("iceConnected"),(!r||r&&"connected"===r.state)&&n())}),e.addEventListener("connectionstatechange",function(){"connecting"===e.connectionState&&t._peerConnectionTiming.start(),"connected"===e.connectionState&&(t._peerConnectionTiming.stop(),t._updateProgress("peerConnectionConnected"))});var i=e.getSenders().map(function(e){return e.transport}).find(x);void 0!==i&&(r=i).addEventListener("statechange",function(){"connecting"===r.state&&t._dtlsTiming.start(),"connected"===r.state&&(t._dtlsTiming.stop(),t._updateProgress("dtlsConnected"),"connected"===e.iceConnectionState&&n())})})},t.prototype._setupInsights=function(e){var t=e.environment,n=e.realm,r=new k(e.token,c.SDK_NAME,c.SDK_VERSION,void 0===t?c.DEFAULT_ENVIRONMENT:t,void 0===n?c.DEFAULT_REALM:n,{});r.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var i=new w(r,Date.now(),this._log),o=void 0;return{reportToInsights:function(e){var t,n,s=e.report,a=s.stats.jitter||o,c=s.stats.rtt||o,u=s.stats.packetLoss||o,l=s.mos||o,d=new Map;s.iceCandidateStats.forEach(function(e){if(e.candidateType&&e.protocol){var t=d.get(e.candidateType)||[];t.indexOf(e.protocol)<0&&t.push(e.protocol),d.set(e.candidateType,t)}});var h=JSON.stringify(Object.fromEntries(d)),p={name:"report",group:"preflight",level:s.error?"error":"info",payload:{sessionSID:C,preflightSID:T("PF"),progressEvents:JSON.stringify(s.progressEvents),testTiming:s.testTiming,dtlsTiming:s.networkTiming.dtls,iceTiming:s.networkTiming.ice,peerConnectionTiming:s.networkTiming.peerConnection,connectTiming:s.networkTiming.connect,mediaTiming:s.networkTiming.media,selectedLocalCandidate:null===(t=s.selectedIceCandidatePairStats)||void 0===t?void 0:t.localCandidate,selectedRemoteCandidate:null===(n=s.selectedIceCandidatePairStats)||void 0===n?void 0:n.remoteCandidate,iceCandidateStats:h,jitterStats:a,rttStats:c,packetLossStats:u,mosStats:l,error:s.error}};i.emit("event",p),setTimeout(function(){return r.disconnect()},2e3)}}},t.prototype._runPreflightTest=function(e,t,n){return s(this,void 0,void 0,function(){var r,i,c,u,l,d,p,v,g,y,_,b,w=this;return a(this,function(k){switch(k.label){case 0:r=[],i=[],c=this._setupInsights({token:e,environment:t}).reportToInsights,k.label=1;case 1:return k.trys.push([1,8,9,10]),u=[],[4,this._executePreflightStep("Acquire media",function(){return[f.syntheticAudio(),m.syntheticVideo({width:640,height:480})]})];case 2:return r=k.sent(),this._updateProgress("mediaAcquired"),this.emit("debug",{localTracks:r}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return h.getTurnCredentials(e,n)},new E)];case 3:return l=k.sent(),this._connectTiming.stop(),this._updateProgress("connected"),d=new RTCPeerConnection({iceServers:l,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),p=new RTCPeerConnection({iceServers:l,bundlePolicy:"max-bundle"}),i.push(d),i.push(p),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return s(w,void 0,void 0,function(){var e,t,n,i;return a(this,function(o){switch(o.label){case 0:return d.addEventListener("icecandidate",function(e){return e.candidate&&p.addIceCandidate(e.candidate)}),p.addEventListener("icecandidate",function(e){return e.candidate&&d.addIceCandidate(e.candidate)}),r.forEach(function(e){return d.addTrack(e)}),e=new Promise(function(e){var t=[];p.addEventListener("track",function(n){t.push(n.track),t.length===r.length&&e(t)})}),[4,d.createOffer()];case 1:return t=o.sent(),[4,d.setLocalDescription(n=t)];case 2:return o.sent(),[4,p.setRemoteDescription(n)];case 3:return o.sent(),[4,p.createAnswer()];case 4:return i=o.sent(),[4,p.setLocalDescription(i)];case 5:return o.sent(),[4,d.setRemoteDescription(i)];case 6:return o.sent(),[4,this._collectNetworkTimings(d)];case 7:return o.sent(),[2,e]}})})},new P)];case 4:return v=k.sent(),this.emit("debug",{remoteTracks:v}),v.forEach(function(e){e.addEventListener("ended",function(){return w._log.warn(e.kind+":ended")}),e.addEventListener("mute",function(){return w._log.warn(e.kind+":muted")}),e.addEventListener("unmute",function(){return w._log.warn(e.kind+":unmuted")})}),this._updateProgress("mediaSubscribed"),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(e){var t=document.createElement("video");t.autoplay=!0,t.playsInline=!0,t.muted=!0,t.srcObject=new MediaStream(v),u.push(t),w.emit("debugElement",t),t.oncanplay=e})},new P)];case 5:return k.sent(),this._mediaTiming.stop(),this._updateProgress("mediaStarted"),[4,this._executePreflightStep("Collect stats for duration",function(){return w._collectRTCStatsForDuration(w._testDuration,{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]},d,p)})];case 6:return g=k.sent(),[4,this._executePreflightStep("Generate report",function(){return w._generatePreflightReport(g)})];case 7:return y=k.sent(),c({report:y}),this.emit("completed",y),[3,10];case 8:return _=k.sent(),b=this._generatePreflightReport(),c({report:o(o({},b),{error:null==_?void 0:_.toString()})}),this.emit("failed",_,b),[3,10];case 9:return i.forEach(function(e){return e.close()}),r.forEach(function(e){return e.stop()}),[7];case 10:return[2]}})})},t.prototype._collectRTCStats=function(e,t,n){return s(this,void 0,void 0,function(){var r,i,o,s,c,u,h,p,f,m,v,g,y,_;return a(this,function(a){switch(a.label){case 0:return[4,d.getCombinedConnectionStats({publisher:t,subscriber:n})];case 1:return r=a.sent(),i=r.timestamp,o=r.bytesSent,s=r.bytesReceived,c=r.packets,u=r.packetsLost,h=r.roundTripTime,f=r.selectedIceCandidatePairStats,m=r.iceCandidateStats,v=e.jitter.length>0,e.jitter.push(p=r.jitter),e.rtt.push(h),this._sentBytesMovingAverage.putSample(o,i),this._receivedBytesMovingAverage.putSample(s,i),this._packetLossMovingAverage.putSample(u,c),v&&(e.outgoingBitrate.push(1e3*this._sentBytesMovingAverage.get()*8),e.incomingBitrate.push(1e3*this._receivedBytesMovingAverage.get()*8),g=this._packetLossMovingAverage.get(),y=Math.min(100,100*g),e.packetLoss.push(y),_=l.calculateMOS(h,p,g),e.mos.push(_)),e.selectedIceCandidatePairStats||(e.selectedIceCandidatePairStats=f),0===e.iceCandidateStats.length&&(e.iceCandidateStats=m),[2]}})})},t.prototype._collectRTCStatsForDuration=function(e,t,n,r){return s(this,void 0,void 0,function(){var i,o,s;return a(this,function(a){switch(a.label){case 0:return i=Date.now(),o=Math.min(1e3,e),[4,v.waitForSometime(o)];case 1:return a.sent(),[4,this._collectRTCStats(t,n,r)];case 2:return a.sent(),(s=e-(Date.now()-i))>0?[4,this._collectRTCStatsForDuration(s,t,n,r)]:[3,4];case 3:t=a.sent(),a.label=4;case 4:return[2,t]}})})},t.prototype._updateProgress=function(e){var t=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:t,name:e}),this.emit("progress",e)},t}(_);t.PreflightTest=j,t.runPreflight=function(e,t){return void 0===t&&(t={}),new j(e,t)}},CSzv:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return i(t,e),t.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(n("mb7l"));e.exports=o},CmYA:function(e,t,n){"use strict";e.exports="function"==typeof RTCIceCandidate?RTCIceCandidate:function(){throw new Error("RTCIceCandidate is not supported")}},Czg6:function(e,t,n){var r=n("KGUp"),i=n("89tg"),o=n("HOot"),s=n("QsSX");e.exports.Backoff=r,e.exports.FunctionCall=s,e.exports.FibonacciStrategy=o,e.exports.ExponentialStrategy=i,e.exports.fibonacci=function(e){return new r(new o(e))},e.exports.exponential=function(e){return new r(new i(e))},e.exports.call=function(e,t,n){var r=Array.prototype.slice.call(arguments);return e=r[0],t=r.slice(1,r.length-1),new s(e,t,n=r[r.length-1])}},"Ds+w":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=n("A/ij"),a=n("9FmL"),c=n("UBwA"),u=n("dI/0").NullObserver,l=n("Y1/N"),d=function(e){function t(t,n,r,i,o,s,a){var c=this;return a=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},a),a=Object.assign({IntersectionObserver:"undefined"==typeof IntersectionObserver||"auto"!==a.clientTrackSwitchOffControl?u:IntersectionObserver,ResizeObserver:"undefined"==typeof ResizeObserver||"auto"!==a.contentPreferencesMode?u:ResizeObserver},a),c=e.call(this,t,n,r,i,o,s,a)||this,Object.defineProperties(c,{_enableDocumentVisibilityTurnOff:{value:!0===a.enableDocumentVisibilityTurnOff&&"auto"===a.clientTrackSwitchOffControl},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:a.clientTrackSwitchOffControl},_contentPreferencesMode:{value:a.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new l(function(){c._setRenderHint({enabled:!1})},50,!1)},_resizeObserver:{value:new a.ResizeObserver(function(e){e.find(function(e){return!c._invisibleElements.has(e.target)})&&p(c)})},_intersectionObserver:{value:new a.IntersectionObserver(function(e){var t=!1;e.forEach(function(e){!c._invisibleElements.has(e.target)!==e.isIntersecting&&(e.isIntersecting?(c._log.debug("intersectionObserver detected: Off => On"),c._invisibleElements.delete(e.target)):(c._log.debug("intersectionObserver detected: On => Off"),c._invisibleElements.add(e.target)),t=!0)}),t&&(h(c),p(c))},{threshold:.25})}}),c}return i(t,e),t.prototype._start=function(t){var n=e.prototype._start.call(this,t);return h(this),n},t.prototype.switchOn=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},t.prototype.switchOff=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},t.prototype.setContentPreferences=function(e){if("manual"!==this._contentPreferencesMode)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return e.renderDimensions&&this._setRenderHint({renderDimensions:e.renderDimensions}),this},t.prototype._unObservePip=function(e){var t=this._elToPipCallbacks.get(e);t&&(e.removeEventListener("enterpictureinpicture",t.onEnterPip),e.removeEventListener("leavepictureinpicture",t.onLeavePip),this._elToPipCallbacks.delete(e))},t.prototype._observePip=function(e){var t=this;if(!this._elToPipCallbacks.get(e)){var n=function(n){return t._onEnterPip(n,e)},r=function(n){return t._onLeavePip(n,e)};e.addEventListener("enterpictureinpicture",n),e.addEventListener("leavepictureinpicture",r),this._elToPipCallbacks.set(e,{onEnterPip:n,onLeavePip:r,onResizePip:function(n){return t._onResizePip(n,e)}})}},t.prototype._onEnterPip=function(e,t){this._log.debug("onEnterPip");var n=e.pictureInPictureWindow;this._elToPipWindows.set(t,n);var r=this._elToPipCallbacks.get(t).onResizePip;n.addEventListener("resize",r),h(this)},t.prototype._onLeavePip=function(e,t){this._log.debug("onLeavePip"),this._elToPipWindows.delete(t);var n=this._elToPipCallbacks.get(t).onResizePip;e.pictureInPictureWindow.removeEventListener("resize",n),h(this)},t.prototype._onResizePip=function(){p(this)},t.prototype.attach=function(t){var n=e.prototype.attach.call(this,t);return"auto"===this._clientTrackSwitchOffControl&&this._invisibleElements.add(n),this._intersectionObserver.observe(n),this._resizeObserver.observe(n),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||function(e){function t(){h(e)}return c.onVisibilityChange(1,t),function(){c.offVisibilityChange(1,t)}}(this)),this._observePip(n),n},t.prototype.detach=function(t){var n=this,r=e.prototype.detach.call(this,t);return(Array.isArray(r)?r:[r]).forEach(function(e){n._intersectionObserver.unobserve(e),n._resizeObserver.unobserve(e),n._invisibleElements.delete(e),n._unObservePip(e)}),0===this._attachments.size&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),h(this),p(this),r},t.prototype.addProcessor=function(){return e.prototype.addProcessor.apply(this,arguments)},t.prototype.removeProcessor=function(){return e.prototype.removeProcessor.apply(this,arguments)},t.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},t.prototype.setPriority=function(t){return e.prototype.setPriority.call(this,t)},t}(s(a));function h(e){if("auto"===e._clientTrackSwitchOffControl){var t=e._getAllAttachedElements().filter(function(t){return!e._invisibleElements.has(t)});1==(e._getAllAttachedElements().filter(function(t){return e._elToPipWindows.has(t)}).length>0||"visible"===document.visibilityState&&t.length>0)?(e._turnOffTimer.clear(),e._setRenderHint({enabled:!0})):e._turnOffTimer.isSet||e._turnOffTimer.start()}}function p(e){if("auto"===e._contentPreferencesMode){var t=e._getAllAttachedElements().filter(function(t){return!e._invisibleElements.has(t)}),n=e._getAllAttachedElements().map(function(t){var n=e._elToPipWindows.get(t);return n?{clientHeight:n.height,clientWidth:n.width}:{clientHeight:0,clientWidth:0}}),r=t.concat(n);if(r.length>0){var i=o(r.sort(function(e,t){return t.clientHeight+t.clientWidth-e.clientHeight-e.clientWidth-1}),1)[0];e._setRenderHint({renderDimensions:{height:i.clientHeight,width:i.clientWidth}})}}}e.exports=d},DsyS:function(e,t,n){"use strict";e.exports="function"==typeof MediaStreamTrack?MediaStreamTrack:function(){throw new Error("MediaStreamTrack is not supported")}},EHr0:function(e,t,n){"use strict";var r=n("ghd6").defer,i=function(){function e(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return e.prototype.put=function(e){this._hasValue=!0,this._value=e;var t=this._deferreds.shift();return t&&t.resolve(e),this},e.prototype.take=function(){var e=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var t=r();return this._deferreds.push(t),t.promise.then(function(t){return e._hasValue=!1,t})},e}();e.exports=i},EYe3:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("gEVb"),s=n("6ltx"),a={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},c=function(e){function t(){var t=e.call(this,"connecting",a)||this;return Object.defineProperties(t,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),t}return i(t,e),Object.defineProperty(t.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),t.prototype.addTrack=function(e){return this.tracks.set(e.id||e.sid,e),this.emit("trackAdded",e),this},t.prototype.disconnect=function(){return"disconnected"!==this.state&&(this.preempt("disconnected"),!0)},t.prototype.removeTrack=function(e){var t=this.tracks.get(e.id||e.sid);return this.tracks.delete(e.id||e.sid),t&&this.emit("trackRemoved",e),t||null},t.prototype.setNetworkQualityLevel=function(e,t){this._networkQualityLevel!==e&&(this._networkQualityLevel=e,this._networkQualityStats=t&&(t.audio||t.video)?new s(t):null,this.emit("networkQualityLevelChanged"))},t.prototype.connect=function(e,t){return("connecting"===this.state||"reconnecting"===this.state)&&(this._sid||(this._sid=e),this._identity||(this._identity=t),this.preempt("connected"),!0)},t.prototype.reconnecting=function(){return("connecting"===this.state||"connected"===this.state)&&(this.preempt("reconnecting"),!0)},t}(o);e.exports=c},"F/ro":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=function(e){function t(){var t=e.call(this)||this;return Object.defineProperties(t,{_queuedEvents:{value:new Map}}),t}return i(t,e),t.prototype.dequeue=function(e){var t=this,n=!0;if(!e)return this._queuedEvents.forEach(function(e,t){n=this.dequeue(t)&&n},this),n;var r=this._queuedEvents.get(e)||[];return this._queuedEvents.delete(e),r.reduce(function(n,r){return t.emit.apply(t,s([],o([e].concat(r))))&&n},n)},t.prototype.queue=function(){var e=[].slice.call(arguments);if(this.emit.apply(this,s([],o(e))))return!0;var t=e[0];return this._queuedEvents.has(t)||this._queuedEvents.set(t,[]),this._queuedEvents.get(t).push(e.slice(1)),!1},t}(n("+qE3").EventEmitter);e.exports=a},F1Jz:function(e,t,n){"use strict";var r=n("mkGC"),i=n("8yKx"),o=n("MCLT").inherits,s=n("rskN"),a=n("qmcU"),c=n("UQcK"),u=n("iWhl"),l=n("BWbm"),d=n("BWbm").isIOSChrome,h="unified"===u.getSdpFormat();function p(e,t){if(!(this instanceof p))return new p(e,t);i.call(this),e=e||{};var n=Object.assign(e.iceTransportPolicy?{iceTransports:e.iceTransportPolicy}:{},e);l.interceptEvent(this,"datachannel"),l.interceptEvent(this,"signalingstatechange");var r=u.getSdpFormat(n.sdpSemantics),o=new RTCPeerConnection(n,t);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new a},_peerConnection:{value:o},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:r},_senders:{value:new Map},_signalingStateLatch:{value:new s},_tracksToSSRCs:{value:new Map,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:o.localDescription}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:o.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":o.signalingState}}});var c=this;o.addEventListener("datachannel",function(e){y(e.channel),c.dispatchEvent(e)}),o.addEventListener("signalingstatechange",function(){"stable"===o.signalingState&&(c._appliedTracksToSSRCs=new Map(c._tracksToSSRCs)),c._pendingLocalOffer||c._pendingRemoteOffer||c.dispatchEvent.apply(c,arguments)}),o.ontrack=function(){},"function"!=typeof RTCPeerConnection.prototype.addTrack&&o.addStream(this._localStream),l.proxyProperties(RTCPeerConnection.prototype,this,o)}function f(e,t,n){var r,i,o=t?e._pendingLocalOffer:e._pendingRemoteOffer,s=t?"have-local-offer":"have-remote-offer",a=t?"setLocalDescription":"setRemoteDescription";if(!t&&(t?e._pendingRemoteOffer:e._pendingLocalOffer)&&"answer"===n.type)r=function(e,t){return e._peerConnection.setLocalDescription(e._pendingLocalOffer).then(function(){return e._pendingLocalOffer=null,e.setRemoteDescription(t)}).then(function(){e._signalingStateLatch.lower()})}(e,n);else if("offer"===n.type){if(e.signalingState!==s&&"stable"!==e.signalingState)return Promise.reject(new Error("Cannot set "+(t?"local":"remote")+" offer in state "+e.signalingState));o||"low"!==e._signalingStateLatch.state||e._signalingStateLatch.raise();var c=e.signalingState;i=v(n),t?e._pendingLocalOffer=i:e._pendingRemoteOffer=i,r=Promise.resolve(),e.signalingState!==c&&r.then(function(){e.dispatchEvent(new Event("signalingstatechange"))})}else"rollback"===n.type&&(e.signalingState!==s?r=Promise.reject(new Error("Cannot rollback "+(t?"local":"remote")+" description in "+e.signalingState)):(t?e._pendingLocalOffer=null:e._pendingRemoteOffer=null,e._rolledBackTracksToSSRCs=new Map(e._tracksToSSRCs),e._tracksToSSRCs=new Map(e._appliedTracksToSSRCs),(r=Promise.resolve()).then(function(){e.dispatchEvent(new Event("signalingstatechange"))})));return r||e._peerConnection[a](v(n))}function m(e,t){return!!e.getTransceivers().find(function(e){return e.receiver&&e.receiver.track&&e.receiver.track.kind===t})}function v(e){return e instanceof r&&e._description?e._description:new RTCSessionDescription(e)}function g(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function y(e){return Object.defineProperty(e,"maxRetransmits",{value:65535===e.maxRetransmits?null:e.maxRetransmits}),g()&&Object.defineProperty(e,"maxPacketLifeTime",{value:65535===e.maxRetransmitTime?null:e.maxRetransmitTime}),e}function _(e,t,n){return"unified"===e?u.updateUnifiedPlanTrackIdsToSSRCs(t,n):u.updatePlanBTrackIdsToSSRCs(t,n)}o(p,i),"function"!=typeof RTCPeerConnection.prototype.addTrack?(p.prototype.addTrack=function(){var e=[].slice.call(arguments),t=e[0];if("closed"===this._peerConnection.signalingState)throw new Error("Cannot add MediaStreamTrack ["+t.id+", "+t.kind+"]: RTCPeerConnection is closed");var n=this._senders.get(t);if(n&&n.track)throw new Error("Cannot add MediaStreamTrack ["+t.id+", "+t.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(t),this._peerConnection.addStream(this._localStream),n=new c(t),this._senders.set(t,n),n},p.prototype.removeTrack=function(e){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");var t=e.track;t&&(e=this._senders.get(t))&&e.track&&(e.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(t),this._peerConnection.addStream(this._localStream))},p.prototype.getSenders=function(){return Array.from(this._senders.values())}):p.prototype.removeTrack=function(e){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");try{this._peerConnection.removeTrack(e)}catch(t){}},p.prototype.addIceCandidate=function(e){var t,n=[].slice.call(arguments),r=this;return t="have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return r._peerConnection.addIceCandidate(e)}):this._peerConnection.addIceCandidate(e),n.length>1?l.legacyPromise(t,n[1],n[2]):t},p.prototype.close=function(){"closed"!==this.signalingState&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},p.prototype.createAnswer=function(){var e,t=[].slice.call(arguments),n=this;return e=this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return n._signalingStateLatch.lower(),n._peerConnection.createAnswer()}).then(function(e){return n._pendingRemoteOffer=null,n._rolledBackTracksToSSRCs.clear(),new r({type:"answer",sdp:_(n._sdpFormat,n._tracksToSSRCs,e.sdp)})},function(e){throw n._pendingRemoteOffer=null,e}):this._peerConnection.createAnswer().then(function(e){return n._rolledBackTracksToSSRCs.clear(),new r({type:"answer",sdp:_(n._sdpFormat,n._tracksToSSRCs,e.sdp)})}),t.length>1?l.legacyPromise(e,t[0],t[1]):e},p.prototype.createOffer=function(){var e=[].slice.call(arguments),t=(e.length>1?e[2]:e[0])||{},n=this;if(d()){if(t.offerToReceiveVideo&&!this._audioTransceiver&&(!h||!m(this,"audio"))){delete t.offerToReceiveAudio;try{this._audioTransceiver=h?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(o){return Promise.reject(o)}}if(t.offerToReceiveVideo&&!this._videoTransceiver&&(!h||!m(this,"video"))){delete t.offerToReceiveVideo;try{this._videoTransceiver=h?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(o){return Promise.reject(o)}}}var i=this._peerConnection.createOffer(t).then(function(e){return n._rolledBackTracksToSSRCs.clear(),new r({type:e.type,sdp:_(n._sdpFormat,n._tracksToSSRCs,e.sdp)})});return e.length>1?l.legacyPromise(i,e[0],e[1]):i},p.prototype.createDataChannel=function(e,t){t=function(e){return e=Object.assign({},e),g()&&"maxPacketLifeTime"in e&&(e.maxRetransmitTime=e.maxPacketLifeTime),e}(t);var n=this._peerConnection.createDataChannel(e,t);return y(n),n},p.prototype.setLocalDescription=function(){var e=[].slice.call(arguments),t=e[0];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var n=f(this,!0,t);return e.length>1?l.legacyPromise(n,e[1],e[2]):n},p.prototype.setRemoteDescription=function(){var e=[].slice.call(arguments),t=e[0];this._rolledBackTracksToSSRCs.clear();var n=f(this,!1,t);return e.length>1?l.legacyPromise(n,e[1],e[2]):n},l.delegateMethods(RTCPeerConnection.prototype,p.prototype,"_peerConnection"),e.exports=p},FjKE:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=n("gEVb"),c=n("ghd6"),u=c.buildLogLevels,l=c.makeUUID,d=n("S3Hu"),h=n("d+6x"),p=n("Y1/N"),f=0,m={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},v={closed:"close",open:"open",waiting:"waiting"},g=3005,y=global.window||global,_=y.WebSocket?y.WebSocket:n("vaDk"),b={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},w=new Map([[3e3,b.TIMEOUT],[3001,b.TIMEOUT],[3002,b.FAILED],[3003,b.FAILED],[3004,b.TIMEOUT],[3006,b.BUSY],[3007,b.TIMEOUT]]),k=function(e){function t(t,n){var r=e.call(this,"early",m)||this;n=Object.assign({helloBody:null,maxConsecutiveFailedHellos:3,maxConsecutiveMissedHeartbeats:3,requestedHeartbeatTimeout:5e3,openTimeout:15e3,welcomeTimeout:5e3,Log:d,WebSocket:_},n);var i=u(n.logLevel),a=new n.Log("default",r,i,n.loggerName),c=n.networkMonitor?new h(function(){var e=c.type,t="Network changed"+(e?" to "+e:"");a.debug(t),r._close({code:3004,reason:t})}):null;Object.defineProperties(r,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:n.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:n.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++f},_log:{value:a},_messageQueue:{value:[]},_networkMonitor:{value:c},_options:{value:n},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:t},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var l={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return r.on("stateChanged",function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e in v&&r.emit.apply(r,s([v[e]],o(t)));var i={name:e,group:"signaling",level:l[r.state]};if("closed"===e){var a=o(t,1),c=a[0];i.payload={reason:c},i.level=c===b.LOCAL?"info":"error"}r._eventObserver.emit("event",i)}),r._eventObserver.emit("event",{name:r.state,group:"signaling",level:l[r.state]}),r._connect(),r}return i(t,e),t.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},t.prototype._close=function(e){var t=e.code,n=e.reason;if("closed"!==this.state){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&t!==g&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var r=this._log;1e3===t?(r.debug("Closed"),this.transition("closed",null,[b.LOCAL])):(r.warn("Closed: "+t+" - "+n),t!==g&&this.transition("closed",null,[w.get(t)||b.REMOTE]));var i=this._ws.readyState,o=this._options.WebSocket;i!==o.CLOSING&&i!==o.CLOSED&&this._ws.close(t,n)}},t.prototype._connect=function(){var e=this,t=this._log;if("waiting"===this.state)this.transition("early");else if("early"!==this.state)return void t.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');this._ws=new this._options.WebSocket(this._serverUrl);var n=this._ws;t.debug("Created a new WebSocket:",n),n.addEventListener("close",function(t){return e._close(t)});var r=this._options.openTimeout;this._openTimeout=new p(function(){e._close({code:3007,reason:"Failed to open in "+r+" ms"})},r),n.addEventListener("open",function(){t.debug("WebSocket opened:",n),e._openTimeout.clear(),e._startHandshake(),e._networkMonitor&&e._networkMonitor.start()}),n.addEventListener("message",function(n){t.debug("Incoming: "+n.data);try{n=JSON.parse(n.data)}catch(r){return void e.emit("error",r)}switch(n.type){case"bad":e._handleBad(n);break;case"busy":e._handleBusy(n);break;case"bye":break;case"msg":e._handleMessage(n);case"heartbeat":e._handleHeartbeat();break;case"welcome":e._handleWelcome(n);break;default:e._log.debug("Unknown message type: "+n.type),e.emit("error",new Error("Unknown message type: "+n.type))}})},t.prototype._handleBad=function(e){var t=e.reason,n=this._log;if(["connecting","open"].includes(this.state)){if("connecting"===this.state)return n.warn("Closing: 3002 - "+t),void this._close({code:3002,reason:t});n.debug("Error: "+t),this.emit("error",new Error(t))}else n.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.')},t.prototype._handleBusy=function(e){var t=this,n=e.cookie,r=e.keepAlive,i=e.retryAfter,o=this._log;if(["connecting","waiting"].includes(this.state)){this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var s=i<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+i+" ms";if(i<0)return o.warn("Closing: 3006 - "+s),void this._close({code:3006,reason:s});this._hellosLeft=this._options.maxConsecutiveFailedHellos,this._cookie=n||null,r?(o.warn(s),this._busyWaitTimeout=new p(function(){return t._startHandshake()},i)):(o.warn("Closing: 3005 - "+s),this._close({code:g,reason:s}),this._busyWaitTimeout=new p(function(){return t._connect()},i)),this.transition("waiting",null,[r,i])}else o.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.')},t.prototype._handleHeartbeat=function(){"open"===this.state?this._heartbeatTimeout.reset():this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.')},t.prototype._handleHeartbeatTimeout=function(){if("open"===this.state){var e=this._log,t=this._options.maxConsecutiveMissedHeartbeats;e.debug("Consecutive heartbeats missed: "+t);var n="Missed "+t+' "heartbeat" messages';e.warn("Closing: 3001 - "+n),this._close({code:3001,reason:n})}},t.prototype._handleMessage=function(e){"open"===this.state?this.emit("message",e.body):this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.')},t.prototype._handleWelcome=function(e){var t=this,n=e.negotiatedTimeout,r=this._log;if(["connecting","waiting"].includes(this.state)){"waiting"===this.state&&(r.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var i=n*this._options.maxConsecutiveMissedHeartbeats,o=n-200;this._welcomeTimeout.clear(),this._heartbeatTimeout=new p(function(){return t._handleHeartbeatTimeout()},i),this._messageQueue.splice(0).forEach(function(e){return t._send(e)}),this._sendHeartbeatTimeout=new p(function(){return t._sendHeartbeat()},o),this.transition("open")}else r.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.')},t.prototype._handleWelcomeTimeout=function(){if("connecting"===this.state){var e=this._log;if(this._hellosLeft<=0){var t="All handshake attempts failed";return e.warn("Closing: 3000 - "+t),void this._close({code:3e3,reason:t})}e.warn("Handshake attempt "+(this._options.maxConsecutiveFailedHellos-this._hellosLeft)+" failed"),this._startHandshake()}},t.prototype._send=function(e){if(this._ws.readyState===this._options.WebSocket.OPEN){var t=JSON.stringify(e);this._log.debug("Outgoing: "+t);try{this._ws.send(t),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch(r){var n="Failed to send message";this._log.warn("Closing: 3003 - "+n),this._close({code:3003,reason:n})}}},t.prototype._sendHeartbeat=function(){"closed"!==this.state&&this._send({type:"heartbeat"})},t.prototype._sendHello=function(){var e=this._options,t=e.helloBody,n=e.requestedHeartbeatTimeout,r={id:l(),timeout:n,type:"hello",version:2};this._cookie&&(r.cookie=this._cookie),t&&(r.body=t),this._send(r)},t.prototype._sendOrEnqueue=function(e){var t=this;"closed"!==this.state&&("open"===this.state?function(e){return t._send(e)}:function(e){return t._messageQueue.push(e)})(e)},t.prototype._startHandshake=function(){var e=this;["early","waiting"].includes(this.state)&&this.transition("connecting"),"connecting"===this.state&&(this._hellosLeft--,this._sendHello(),this._welcomeTimeout=new p(function(){return e._handleWelcomeTimeout()},this._options.welcomeTimeout))},t.prototype.close=function(){"closed"!==this.state&&(this._sendOrEnqueue({type:"bye"}),this._close({code:1e3,reason:"Normal"}))},t.prototype.sendMessage=function(e){this._sendOrEnqueue({body:e,type:"msg"})},t}(a);k.CloseReason=b,e.exports=k},GcCu:function(e,t,n){"use strict";if("function"==typeof RTCPeerConnection)switch((0,n("BWbm").guessBrowser)()){case"chrome":e.exports=n("F1Jz");break;case"firefox":e.exports=n("ls7c");break;case"safari":e.exports=n("r2pO");break;default:e.exports=RTCPeerConnection}else e.exports=function(){throw new Error("RTCPeerConnection is not supported")}},HHTs:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("EYe3"),s=n("Lh68"),a=n("gEVb"),c={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},u=function(e){function t(){return e.call(this,"closed",c)||this}return i(t,e),t.prototype._close=function(e){return this.transition("closing",e),this.transition("closed",e),Promise.resolve(this)},t.prototype._connect=function(e,t,n,r,i){e.connect("PA00000000000000000000000000000000","test");var o=Promise.resolve(new s(e,"RM00000000000000000000000000000000",i));return o.cancel=function(){},o},t.prototype._open=function(e){return this.transition("opening",e),this.transition("open",e),Promise.resolve(this)},t.prototype.close=function(){var e=this;return this.bracket("close",function(t){switch(e.state){case"closed":return e;case"open":return e._close(t);default:throw new Error('Unexpected Signaling state "'+e.state+'"')}})},t.prototype.connect=function(e,t,n,r,i){var o=this;return this.bracket("connect",function s(a){switch(o.state){case"closed":return o._open(a).then(s.bind(null,a));case"open":return o.releaseLockCompletely(a),o._connect(e,t,n,r,i);default:throw new Error('Unexpected Signaling state "'+o.state+'"')}})},t.prototype.createLocalParticipantSignaling=function(){return new o},t.prototype.open=function(){var e=this;return this.bracket("open",function(t){switch(e.state){case"closed":return e._open(t);case"open":return e;default:throw new Error('Unexpected Signaling state "'+e.state+'"')}})},t}(a);e.exports=u},HNKe:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("4o7n"),s=n("8WNc"),a=n("Ihm+"),c=function(e){function t(t,n,r,i){var o=e.call(this,t,n,r)||this;return Object.defineProperties(o,{rtt:{enumerable:!0,value:i}}),o}return i(t,e),t.of=function(e,n,r,i){if(n.id!==r.id)throw new Error("RTCStats IDs must match");var o=(r.timestamp-n.timestamp)/1e3;return new t(n.id,e,o>0?(r.bytesSent-n.bytesSent)/o*8:0,i&&"number"==typeof i.roundTripTime?i.roundTripTime/1e3:void 0)},t.summarize=function(e){return{bitrate:a(e.map(function(e){return e.bitrate})),rtt:o(e.map(function(e){return e.rtt}))}},t}(s);e.exports=c},HNxM:function(e,t,n){var r=n("MCLT"),i=e.exports=n("d75R");function o(e,t,n,i){var o=new e(r.format.apply(this,[n=n||""].concat(i)));throw Error.captureStackTrace(o,t),o}function s(e,t,n){o(i.IllegalArgumentError,e,t,n)}function a(e,t,n){o(i.IllegalStateError,e,t,n)}function c(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array"}return t}function u(e){return function(t,n){var r=c(t);if(r==e)return t;s(arguments.callee,n||'Expected "'+e+'" but got "'+r+'".',Array.prototype.slice.call(arguments,2))}}e.exports.checkArgument=function(e,t){e||s(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkState=function(e,t){e||a(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkIsDef=function(e,t){if(void 0!==e)return e;s(arguments.callee,t||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},e.exports.checkIsDefAndNotNull=function(e,t){if(null!=e)return e;s(arguments.callee,t||'Expected value to be defined and not null but got "'+c(e)+'".',Array.prototype.slice.call(arguments,2))},e.exports.checkIsString=u("string"),e.exports.checkIsArray=u("array"),e.exports.checkIsNumber=u("number"),e.exports.checkIsBoolean=u("boolean"),e.exports.checkIsFunction=u("function"),e.exports.checkIsObject=u("object")},HOot:function(e,t,n){var r=n("MCLT"),i=n("kThA");function o(e){i.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}r.inherits(o,i),o.prototype.next_=function(){var e=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=e,e},o.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0},e.exports=o},HmUk:function(e,t,n){"use strict";if("function"==typeof RTCSessionDescription)switch((0,n("BWbm").guessBrowser)()){case"chrome":e.exports=n("mkGC");break;case"firefox":e.exports=n("mtX7");break;default:e.exports=RTCSessionDescription}else e.exports=function(){throw new Error("RTCSessionDescription is not supported")}},HsAx:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){var r=e.call(this)||this;return r.connect(t,n),r}return i(t,e),t}(n("EYe3"));e.exports=o},"I/VV":function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=n("BWbm").guessBrowser,a=n("ZfiD"),c=n("JEtZ"),u=n("UZ/N"),l=n("NXBa"),d=function(){function e(e){Object.defineProperties(this,{pc:{enumerable:!0,value:e},ice:{enumerable:!0,value:new a},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return e.prototype.next=function(){var e,t,n,o=this;return("firefox"===s()?(t=(e=this).pc.getTransceivers().filter(function(e){return e.currentDirection&&e.currentDirection.match(/send/)&&e.sender.track}).map(function(e){return e.sender}),n=e.pc.getTransceivers().filter(function(e){return e.currentDirection&&e.currentDirection.match(/recv/)}).map(function(e){return e.receiver}),Promise.all([h(t),h(n),e.pc.getStats()]).then(function(t){var n=r(t,3),i=n[0],o=n[1],s=n[2],a=f(e),c=y(e);i.forEach(function(t,n){return b(e,t,c,n)}),k(a,c);var u=m(e),l=_(e);o.forEach(function(t,n){return w(e,t,l,n)}),k(u,l),S(e.ice,s)})):function(e){return e.pc.getStats().then(function(t){var n=f(e),r=y(e);b(e,t,r),k(n,r);var i=m(e),o=_(e);w(e,t,o),k(i,o),S(e.ice,t)})}(this)).then(function(){var e=i([],r(o.audio.send.values())),t=i([],r(o.video.send.values())),n=i([],r(o.audio.recv.values())),s=i([],r(o.video.recv.values())),a=new c(o.ice.lastReport,{send:e.map(function(e){return e.lastReport}).filter(function(e){return e}),recv:n.map(function(e){return e.lastReport}).filter(function(e){return e})},{send:t.map(function(e){return e.lastReport}).filter(function(e){return e}),recv:s.map(function(e){return e.lastReport}).filter(function(e){return e})});return o.lastReport=a,a})},e}();function h(e){return Promise.all(e.map(function(e){var t=e.track.id;return e.getStats().then(function(e){var n,r;try{for(var i=o(e.values()),s=i.next();!s.done;s=i.next()){var a=s.value;"inbound-rtp"===a.type&&(a.id=t+"-"+a.id)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return[t,e]})})).then(function(e){return new Map(e)})}function p(e,t,n,r,i){var o=t[r.mediaType];if(!i){var s=n.get(r.trackId);s&&(i=s.trackIdentifier)}if(o&&i){if(o.has(r.id))return o.get(r.id);var a=new e(i,r);o.set(r.id,a)}return null}function f(e){return{audio:e.audio.send,video:e.video.send}}function m(e){return{audio:e.audio.recv,video:e.video.recv}}function v(e,t,n,r){return p(l,f(e),t,n,r)}function g(e,t,n,r){return p(u,m(e),t,n,r)}function y(e){return{audio:new Set(e.audio.send.keys()),video:new Set(e.video.send.keys())}}function _(e){return{audio:new Set(e.audio.recv.keys()),video:new Set(e.video.recv.keys())}}function b(e,t,n,r){var i,a;try{for(var c=o(t.values()),u=c.next();!u.done;u=c.next()){var l=u.value;if("outbound-rtp"===l.type&&!l.isRemote){if("firefox"!==s()&&!l.trackId)continue;var d=n[l.mediaType];d&&d.delete(l.id);var h=v(e,t,l,r);if(h){var p=t.get(l.remoteId);h.next(r||h.trackId,l,p)}}}}catch(f){i={error:f}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}}function w(e,t,n,r){var i,s;try{for(var a=o(t.values()),c=a.next();!c.done;c=a.next()){var u=c.value;if("inbound-rtp"===u.type&&!u.isRemote){var l=n[u.mediaType];l&&l.delete(u.id);var d=g(e,t,u,r);d&&d.next(r||d.trackId,u)}}}catch(h){i={error:h}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}}function k(e,t){var n=function(n){var r=e[n];t[n].forEach(function(e){return r.delete(e)})};for(var r in t)n(r)}function S(e,t){var n,r,i,s,a;try{for(var c=o(t.values()),u=c.next();!u.done;u=c.next())"transport"===(h=u.value).type&&(a=t.get(h.selectedCandidatePairId))}catch(p){n={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}if(a)e.next(a);else try{for(var l=o(t.values()),d=l.next();!d.done;d=l.next()){var h;"candidate-pair"!==(h=d.value).type||!h.nominated||"selected"in h&&!h.selected||e.next(h)}}catch(f){i={error:f}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}}e.exports=d},"Ihm+":function(e,t,n){"use strict";e.exports=function(e){return e.reduce(function(e,t){return"number"==typeof t?t+e:e},0)}},Ivmz:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n,r,i){var o=e.call(this)||this,s=null;return Object.defineProperties(o,{_error:{value:null,writable:!0},_isEnabled:{value:r,writable:!0},_priority:{value:i,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return s},set:function(e){null===s&&(s=e)}},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:t}}),o}return i(t,e),Object.defineProperty(t.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),t.prototype.disable=function(){return this.enable(!1)},t.prototype.enable=function(e){return this.isEnabled!==(e="boolean"!=typeof e||e)&&(this._isEnabled=e,this.emit("updated")),this},t.prototype.setTrackTransceiver=function(e){return this.trackTransceiver!==(e=e||null)&&(this._trackTransceiver=e,this.emit("updated")),this},t.prototype.setSid=function(e){return null===this.sid&&(this._sid=e,this.emit("updated")),this},t}(n("+qE3").EventEmitter);e.exports=o},JEtZ:function(e,t,n){"use strict";var r=n("2xLa"),i=n("HNKe"),o=function(){function e(e,t,n){Object.defineProperties(this,{ice:{enumerable:!0,value:e},audio:{enumerable:!0,value:t},video:{enumerable:!0,value:n}})}return e.prototype.summarize=function(){var e=this.audio.send.concat(this.video.send),t=i.summarize(e),n=this.audio.recv.concat(this.video.recv),o=r.summarize(n);return{ice:this.ice,send:t,recv:o,audio:{send:i.summarize(this.audio.send),recv:r.summarize(this.audio.recv)},video:{send:i.summarize(this.video.send),recv:r.summarize(this.video.recv)}}},e}();e.exports=o},JRNH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syntheticAudio=void 0,t.syntheticAudio=function(){var e=n("/+gY"),t={},r=e.getOrCreate(t),i=r.createOscillator(),o=i.connect(r.createMediaStreamDestination());i.start();var s=o.stream.getAudioTracks()[0],a=s.stop;return s.stop=function(){a.call(s),e.release(t)},s}},Jhn5:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){var r=e.call(this)||this;return Object.defineProperties(r,{id:{enumerable:!0,value:t},kind:{enumerable:!0,value:n}}),r}return i(t,e),t.prototype.stop=function(){this.emit("stopped")},t}(n("+qE3").EventEmitter);e.exports=o},KGUp:function(e,t,n){var r=n("+qE3"),i=n("zMHY");function o(e){r.EventEmitter.call(this),this.backoffStrategy_=e,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}n("MCLT").inherits(o,r.EventEmitter),o.prototype.failAfter=function(e){i.checkArgument(e>0,"Expected a maximum number of retry greater than 0 but got %s.",e),this.maxNumberOfRetry_=e},o.prototype.backoff=function(e){i.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",e),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,e))},o.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},o.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1},e.exports=o},KKCa:function(e,t){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},Kg6A:function(e,t,n){"use strict";var r=n("sYJf"),i=n("31MG"),o=n("1I8i"),s=n("T/xC"),a=n("5wwa"),c=a.SignalingConnectionDisconnectedError,u=a.SignalingIncomingMessageInvalidError,l=n("ghd6"),d=l.flatMap,h=l.createRoomConnectEventPayload;e.exports=function(e,t,n,a,l,p){p=Object.assign({PeerConnectionManager:i,RoomV2:o,Transport:s},p);var f=l.video[0]&&!0===l.video[0].adaptiveSimulcast,m=p.RoomV2,v=p.Transport,g=p.iceServers,y=p.log,_=new(0,p.PeerConnectionManager)(a,l,p),b=d(n.tracks,function(e){return[e.trackTransceiver]});_.setTrackSenders(b);var w,k=new Error("Canceled"),S=new r(function(r,i,o){var s=p.bandwidthProfile,a=p.eventObserver,l=p.name,d=Object.assign({adaptiveSimulcast:f,automaticSubscription:p.automaticSubscription,dominantSpeaker:p.dominantSpeaker,environment:p.environment,eventObserver:a,loggerName:p.loggerName,logLevel:p.logLevel,networkMonitor:p.networkMonitor,networkQuality:p.networkQuality,iceServers:g,onIced:function(e){return o()?(i(k),Promise.reject(k)):(y.debug("Got ICE servers:",e),p.iceServers=e,_.setConfiguration(p),_.createAndOffer().then(function(){if(o())throw i(k),k;y.debug("createAndOffer() succeeded."),_.dequeue("description")}).catch(function(e){throw y.error("createAndOffer() failed:",e),i(e),e}))},realm:p.realm,renderHints:!!s&&("disabled"!==p.clientTrackSwitchOffControl||"disabled"!==p.contentPreferencesMode),sdpSemantics:p.sdpSemantics,trackPriority:!!s,trackSwitchOff:!!s},s?{bandwidthProfile:s}:{});w=new v(l,e,n,_,t,d);var b=h(p);a.emit("event",b),w.once("connected",function(e){y.debug("Transport connected:",e),o()?i(k):e.participant?(n.setSignalingRegion(e.options.signaling_region),r(new m(n,e,w,_,p))):i(new u)}),w.once("stateChanged",function(e,t){"disconnected"===e?(w=null,i(t||new c)):y.debug("Transport state changed:",e)})},function(){w&&(w.disconnect(),w=null)});return S.catch(function(){w&&(w.disconnect(),w=null),_.close()}),S}},LFO1:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return i(t,e),t.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(n("mb7l"));e.exports=o},Lh68:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("wl3V"),s=n("gEVb"),a=n("Y1/N"),c=n("ghd6").buildLogLevels,u=n("xwWy").DEFAULT_LOG_LEVEL,l=n("S3Hu"),d=n("5wwa"),h=d.MediaConnectionError,p=d.MediaDTLSTransportFailedError,f=d.SignalingConnectionDisconnectedError,m=0,v={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},g=function(e){function t(t,n,r,i){var s=this;i=Object.assign({logLevel:u,RecordingSignaling:o,Timeout:a},i);var d=c(i.logLevel);s=e.call(this,"connected",v)||this;var h=i.RecordingSignaling,f=new i.Timeout(function(){s._disconnect(s._reconnectingError)},i.sessionTimeout,!1);return Object.defineProperties(s,{_instanceId:{value:m++},_log:{value:i.log?i.log.createLog("default",s):new l("default",s,d,i.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:i},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:f},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:t},name:{enumerable:!0,value:r},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new h},sid:{enumerable:!0,value:n}}),s.on("connectionStateChanged",function(){"failed"!==s.connectionState||["disconnected","failed"].includes(s.iceConnectionState)||s._disconnect(new p)}),s.on("iceConnectionStateChanged",function(){return y(s)}),s.on("signalingConnectionStateChanged",function(){return y(s)}),setTimeout(function(){return y(s)}),s}return i(t,e),t.prototype._disconnect=function(e){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[e]),!0)},t.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},t.prototype.connectParticipant=function(e){var t=this;return"disconnected"!==e.state&&!this.participants.has(e.sid)&&(this.participants.set(e.sid,e),e.on("stateChanged",function n(r){"disconnected"===r&&(e.removeListener("stateChanged",n),t.participants.delete(e.sid),t.emit("participantDisconnected",e))}),this.emit("participantConnected",e),!0)},t.prototype.disconnect=function(){return this._disconnect()},t.prototype.setDominantSpeaker=function(e){this.dominantSpeakerSid=e,this.emit("dominantSpeakerChanged")},t}(s);function y(e){var t;"disconnected"!==e.state&&"disconnected"!==e.signalingConnectionState?("reconnecting"===e.signalingConnectionState?t=e.signalingConnectionState:"failed"===e.iceConnectionState?(e._mediaConnectionIsReconnecting=!0,t="reconnecting"):"new"===e.iceConnectionState||"checking"===e.iceConnectionState?t=e._mediaConnectionIsReconnecting?"reconnecting":"connected":(e._mediaConnectionIsReconnecting=!1,e._reconnectingError=null,e._sessionTimeout.clear(),t="connected"),t!==e.state&&("reconnecting"===t?(e._reconnectingError="reconnecting"===e.signalingConnectionState?new f:new h,e._sessionTimeout.start(),e.preempt(t,null,[e._reconnectingError])):e.preempt(t))):e._sessionTimeout.clear()}e.exports=g},M1q1:function(e,t,n){"use strict";var r=n("xwWy"),i=r.DEFAULT_LOG_LEVEL,o=r.DEFAULT_LOGGER_NAME;function s(e,t){t=Object.assign({loggerName:o,logLevel:i},t);var n={};n.loggerName=t.loggerName,n.logLevel=t.logLevel,delete t.loggerName,delete t.logLevel;var r=t.createLocalTracks;return delete t.createLocalTracks,n[e]=!(Object.keys(t).length>0)||t,r(n).then(function(e){return e[0]})}e.exports={audio:function(e){return s("audio",e)},video:function(e){return s("video",e)}}},MCLT:function(e,t,n){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),c=r[n];n<o;c=r[++n])m(c)||!b(c)?s+=" "+c:s+=" "+a(c);return s},t.deprecate=function(e,n){if("undefined"!=typeof process&&!0===process.noDeprecation)return e;if("undefined"==typeof process)return function(){return t.deprecate(e,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),r=!0}return e.apply(this,arguments)}};var o,s={};function a(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,e,r.depth)}function c(e,t){var n=a.styles[t];return n?"\x1b["+a.colors[n][0]+"m"+e+"\x1b["+a.colors[n][1]+"m":e}function u(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return g(i)||(i=l(e,i,r)),i}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),k(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(n);if(0===s.length){if(S(n))return e.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(_(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return d(n)}var c,u="",b=!1,T=["{","}"];return p(n)&&(b=!0,T=["[","]"]),S(n)&&(u=" [Function"+(n.name?": "+n.name:"")+"]"),_(n)&&(u=" "+RegExp.prototype.toString.call(n)),w(n)&&(u=" "+Date.prototype.toUTCString.call(n)),k(n)&&(u=" "+d(n)),0!==s.length||b&&0!=n.length?r<0?_(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=b?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)P(t,String(s))?o.push(h(e,t,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}(e,n,r,a,s):s.map(function(t){return h(e,n,r,a,t,b)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(c,u,T)):T[0]+u+T[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=e.stylize(c.set?"[Getter/Setter]":"[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),P(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=m(n)?l(e,c.value,null):l(e,c.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),y(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function p(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return"number"==typeof e}function g(e){return"string"==typeof e}function y(e){return void 0===e}function _(e){return b(e)&&"[object RegExp]"===T(e)}function b(e){return"object"==typeof e&&null!==e}function w(e){return b(e)&&"[object Date]"===T(e)}function k(e){return b(e)&&("[object Error]"===T(e)||e instanceof Error)}function S(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(y(o)&&(o=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=process.pid;s[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else s[e]=function(){};return s[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=_,t.isObject=b,t.isDate=w,t.isError=k,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n("1gqn");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",E(),t.format.apply(t,arguments))},t.inherits=n("KKCa"),t._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var x="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(x&&e[x]){var t;if("function"!=typeof(t=e[x]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,x,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(e,r){e?n(e):t(r)});try{e.apply(this,i)}catch(s){n(s)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),x&&Object.defineProperty(t,x,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=x,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return r.apply(i,arguments)};e.apply(this,t).then(function(e){process.nextTick(o,null,e)},function(e){process.nextTick(R,e,o)})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}},MItk:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("2h1k").MediaStreamTrack,s=n("ghd6"),a=s.asLocalTrack,c=s.asLocalTrackPublication,u=s.trackClass,l=n("xwWy"),d=l.typeErrors,h=l.trackPriority,p=n("N7NK").validateLocalTrack,f=n("VR5W"),m=f.LocalAudioTrack,v=f.LocalDataTrack,g=f.LocalVideoTrack,y=n("CSzv"),_=n("deyy"),b=n("LFO1"),w=function(e){function t(t,n,r){var i=this,s=(r=Object.assign({LocalAudioTrack:m,LocalVideoTrack:g,LocalDataTrack:v,MediaStreamTrack:o,LocalAudioTrackPublication:y,LocalVideoTrackPublication:b,LocalDataTrackPublication:_,shouldStopLocalTracks:!1,tracks:n},r)).shouldStopLocalTracks?new Set(n.filter(function(e){return"data"!==e.kind})):new Set;return i=e.call(this,t,r)||this,Object.defineProperties(i,{_eventObserver:{value:r.eventObserver},_LocalAudioTrack:{value:r.LocalAudioTrack},_LocalDataTrack:{value:r.LocalDataTrack},_LocalVideoTrack:{value:r.LocalVideoTrack},_MediaStreamTrack:{value:r.MediaStreamTrack},_LocalAudioTrackPublication:{value:r.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:r.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:r.LocalVideoTrackPublication},_tracksToStop:{value:s},signalingRegion:{enumerable:!0,get:function(){return t.signalingRegion}}}),i._handleTrackSignalingEvents(),i}return i(t,e),t.prototype._addTrack=function(t,n,r){var i=e.prototype._addTrack.call(this,t,n);return i&&"disconnected"!==this.state&&this._addLocalTrack(t,r),i},t.prototype._addLocalTrack=function(e,t){this._signaling.addTrack(e._trackSender,e.name,t),this._log.info("Added a new "+u(e,!0)+":",e.id),this._log.debug(u(e,!0)+":",e)},t.prototype._removeTrack=function(t,n){var r=e.prototype._removeTrack.call(this,t,n);return r&&"disconnected"!==this.state&&(this._signaling.removeTrack(t._trackSender),this._log.info("Removed a "+u(t,!0)+":",t.id),this._log.debug(u(t,!0)+":",t)),r},t.prototype._getTrackEvents=function(){return e.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},t.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},t.prototype._handleTrackSignalingEvents=function(){var e=this,t=this._log;if("disconnected"!==this.state){var n=this._signaling;this.on("trackDisabled",i),this.on("trackEnabled",o),this.on("trackStopped",s),this._tracks.forEach(function(n){e._addLocalTrack(n,h.PRIORITY_STANDARD),e._getOrCreateLocalTrackPublication(n).catch(function(e){t.warn("Failed to get or create LocalTrackPublication for "+n+":",e)})});var r=this;n.on("stateChanged",function e(a){t.debug("Transitioned to state:",a),"disconnected"===a?(t.debug("Removing LocalTrack event listeners"),n.removeListener("stateChanged",e),r.removeListener("trackDisabled",i),r.removeListener("trackEnabled",o),r.removeListener("trackStopped",s),r._tracks.forEach(function(e){var t=s(e);t&&e._trackSender.removeClone(t._trackTransceiver)}),t.info("LocalParticipant disconnected. Stopping "+r._tracksToStop.size+" automatically-acquired LocalTracks"),r._tracksToStop.forEach(function(e){e.stop()})):"connected"===a&&(t.info("reconnected"),setTimeout(function(){return r.emit("reconnected")},0))})}function i(e){var r=n.getPublication(e._trackSender);r&&(r.disable(),t.debug("Disabled the "+u(e,!0)+":",e.id))}function o(e){var r=n.getPublication(e._trackSender);r&&(r.enable(),t.debug("Enabled the "+u(e,!0)+":",e.id))}function s(e){var t=n.getPublication(e._trackSender);return t&&t.stop(),t}},t.prototype._getOrCreateLocalTrackPublication=function(e){var t=k(this.tracks,e);if(t)return Promise.resolve(t);var n=this._log,r=this,i=this._signaling.getPublication(e._trackSender);if(!i)return Promise.reject(new Error("Unexpected error: The "+e+" cannot be published"));function o(e){r.unpublishTrack(e.track)}return new Promise(function(s,a){i.on("updated",function l(){var d=i.error;if(d)return i.removeListener("updated",l),n.warn("Failed to publish the "+u(e,!0)+": "+d.message),r._removeTrack(e,e.id),setTimeout(function(){r.emit("trackPublicationFailed",d,e)}),void a(d);if(!r._tracks.has(e.id))return i.removeListener("updated",l),void a(new Error("The "+e+" was unpublished"));if(i.sid){i.removeListener("updated",l);var h={log:n,LocalAudioTrackPublication:r._LocalAudioTrackPublication,LocalDataTrackPublication:r._LocalDataTrackPublication,LocalVideoTrackPublication:r._LocalVideoTrackPublication};(t=k(r.tracks,e))||(t=c(e,i,o,h),r._addTrackPublication(t));var p=r._signaling.state;"connected"!==p&&"connecting"!==p||(e._processorEventObserver&&e._processorEventObserver.on("event",function(e){r._eventObserver.emit("event",{name:e.name,payload:e.data,group:"video-processor",level:"info"})}),e.processedTrack&&(e._captureFrames(),e._setSenderMediaStreamTrack(!0))),"connected"===p&&setTimeout(function(){r.emit("trackPublished",t)}),s(t)}})})},t.prototype.publishTrack=function(e,t){var n,r=k(this.tracks,e);if(r)return Promise.resolve(r);t=Object.assign({log:this._log,priority:h.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},t);try{n=a(e,t)}catch(s){return Promise.reject(s)}var i=Object.values(h);if(!i.includes(t.priority))return Promise.reject(d.INVALID_VALUE("LocalTrackPublishOptions.priority",i));var o=this._addTrack(n,n.id,t.priority)||this._tracks.get(n.id);return this._getOrCreateLocalTrackPublication(o)},t.prototype.publishTracks=function(e){if(!Array.isArray(e))throw d.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(e.map(this.publishTrack,this))},t.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},t.prototype.setNetworkQualityConfiguration=function(e){if("object"!=typeof e||null===e)throw d.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(t){if(t in e&&("number"!=typeof e[t]||isNaN(e[t])))throw d.INVALID_TYPE("networkQualityConfiguration."+t,"number")}),this._signaling.setNetworkQualityConfiguration(e),this},t.prototype.setParameters=function(e){if(void 0!==e&&"object"!=typeof e)throw d.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(e){if(this._signaling.getParameters().adaptiveSimulcast&&e.maxVideoBitrate)throw d.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(t){if(void 0!==e[t]&&"number"!=typeof e[t]&&null!==e[t])throw d.INVALID_TYPE("encodingParameters."+t,"number, null or undefined")})}else null===e&&(e={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(e),this},t.prototype.unpublishTrack=function(e){p(e,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var t=this._tracks.get(e.id);if(!t)return null;if(this._signaling.getPublication(t._trackSender).publishFailed(new Error("The "+t+" was unpublished")),!(t=this._removeTrack(t,t.id)))return null;var n=k(this.tracks,t);return n&&this._removeTrackPublication(n),n},t.prototype.unpublishTracks=function(e){var t=this;if(!Array.isArray(e))throw d.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return e.reduce(function(e,n){var r=t.unpublishTrack(n);return r?e.concat(r):e},[])},t}(n("TTpt"));function k(e,t){return Array.from(e.values()).find(function(e){return e.track===t||e.track.mediaStreamTrack===t})||null}e.exports=w},N7NK:function(e,t,n){"use strict";var r=n("ghd6").isNonArrayObject,i=n("xwWy"),o=i.typeErrors,s=i.clientTrackSwitchOffControl,a=i.videoContentPreferencesMode,c=i.subscriptionMode,u=i.trackPriority,l=i.trackSwitchOffMode;function d(e,t,n){return void 0===n&&(n=[]),void 0===e?null:null!==e&&r(e)?n.reduce(function(n,r){var i=r.prop,s=r.type,a=r.values;if(n||!(i in e))return n;var c=e[i];return s&&typeof c!==s||"number"===s&&isNaN(c)?o.INVALID_TYPE(t+"."+i,s):Array.isArray(a)&&!a.includes(c)?o.INVALID_VALUE(t+"."+i,a):n},null):o.INVALID_TYPE(t,"object")}t.validateBandwidthProfile=function(e){var t=d(e,"options.bandwidthProfile");return!e||t?t:(t=d(e.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(a)},{prop:"dominantSpeakerPriority",values:Object.values(u)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(c)},{prop:"clientTrackSwitchOffControl",values:Object.values(s)},{prop:"trackSwitchOffMode",values:Object.values(l)}]))||(e.video?"maxTracks"in e.video&&"clientTrackSwitchOffControl"in e.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in e.video&&"contentPreferencesMode"in e.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):function(e){var t="options.bandwidthProfile.video.renderDimensions",n=d(e,t);return e?n||Object.values(u).reduce(function(n,r){return n||d(e[r],t+"."+r,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):n}(e.video.renderDimensions):null)},t.validateLocalTrack=function(e,t){if(!(e instanceof t.LocalAudioTrack||e instanceof t.LocalDataTrack||e instanceof t.LocalVideoTrack||e instanceof t.MediaStreamTrack))throw o.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")},t.validateObject=d},NCuz:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("mAYT"),s=n("ghd6"),a=s.buildLogLevels,c=s.valueToJSON,u=n("xwWy").DEFAULT_LOG_LEVEL,l=n("S3Hu"),d=0,h=function(e){function t(t,n,r){var i;r=Object.assign({name:t,log:null,logLevel:u},r),i=e.call(this)||this;var o=String(r.name),s=a(r.logLevel),c=r.log?r.log.createLog("media",i):new l("media",i,s,r.loggerName);return Object.defineProperties(i,{_instanceId:{value:++d},_log:{value:c},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:o}}),i}return i(t,e),t.prototype.toJSON=function(){return c(this)},t}(o);e.exports=h},NSCw:function(e,t,n){"use strict";e.exports=function(e){var t=e.actual,n=e.available,r=e.level;Object.defineProperties(this,{actual:{value:void 0===t?null:t,enumerable:!0},available:{value:void 0===n?null:n,enumerable:!0},level:{value:void 0===r?null:r,enumerable:!0}})}},NXBa:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("akGs"),s=n("HNKe"),a=function(e){function t(t,n){var r=e.call(this,n.id,t,n)||this;return Object.defineProperties(r,{lastReport:{enumerable:!0,value:null,writable:!0}}),r}return i(t,e),t.prototype.next=function(e,t,n){var r=this.lastStats;this.lastStats=t,this.trackId=e;var i=s.of(e,r,t,n);return this.lastReport=i,i},t}(o);e.exports=a},O22K:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=function(e){function t(t){var n=e.call(this,t.id,t)||this;return Object.defineProperties(n,{_clones:{value:new Set},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{get:function(){return!!this._clones.size}}}),n}return i(t,e),t.prototype.clone=function(){var e=new t(this.track.clone());return this._clones.add(e),e},t.prototype.removeClone=function(e){this._clones.delete(e)},t.prototype.setMediaStreamTrack=function(e){var t=this,n=Array.from(this._clones),r=Array.from(this._senders);return Promise.all(n.map(function(t){return t.setMediaStreamTrack(e.clone())}).concat(r.map(function(n){return t._replaceTrack(n,e)}))).finally(function(){t._track=e})},t.prototype.addSender=function(e,t){return this._senders.add(e),t&&this._senderToPublisherHintCallbacks.set(e,t),this},t.prototype.removeSender=function(e){return this._senders.delete(e),this._senderToPublisherHintCallbacks.delete(e),this},t.prototype.setPublisherHint=function(e){var t=o(Array.from(this._senderToPublisherHintCallbacks.values()),1)[0];return t?t(e):Promise.resolve("COULD_NOT_APPLY_HINT")},t.prototype._replaceTrack=function(e,t){var n=this;return e.replaceTrack(t).then(function(e){return n.setPublisherHint(null).catch(function(){}),n.emit("replaced"),e})},t}(n("uBG5"));e.exports=s},OD4n:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("zbom"),s=n("Y1/N"),a=n("ghd6").isDeepEqual,c=1,u=function(e){function t(t,n){var r=e.call(this,t,"render_hints",n)||this;return Object.defineProperties(r,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new s(function(){r._sendAllHints(),r._responseTimer.setDelay(2*r._responseTimer.delay)},2e3,!1)}}),r.on("ready",function(e){e.on("message",function(e){switch(r._log.debug("Incoming: ",e),e.type){case"render_hints":r._processHintResults(e&&e.subscriber&&e.subscriber.hints||[]);break;default:r._log.warn("Unknown message type: ",e.type)}}),r._sendAllHints()}),r}return i(t,e),t.prototype._sendAllHints=function(){var e=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(t){var n=e._trackSidsToRenderHints.get(t);n.renderDimensions&&(n.isDimensionDirty=!0),"enabled"in n&&(n.isEnabledDirty=!0)}),this._sendHints()},t.prototype._processHintResults=function(e){var t=this;this._responseTimer.clear(),this._responseTimer.setDelay(2e3),e.forEach(function(e){"OK"!==e.result&&t._log.debug("Server error processing hint:",e)}),this._sendHints()},t.prototype._sendHints=function(){var e=this;if(this._transport&&!this._responseTimer.isSet){var t=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(n){var r=e._trackSidsToRenderHints.get(n);if(r.isEnabledDirty||r.isDimensionDirty){var i={track:n};r.isEnabledDirty&&(i.enabled=r.enabled,r.isEnabledDirty=!1),r.isDimensionDirty&&(i.render_dimensions=r.renderDimensions,r.isDimensionDirty=!1),t.push(i)}}),t.length>0){var n={type:"render_hints",subscriber:{id:c++,hints:t}};this._log.debug("Outgoing: ",n),this._transport.publish(n),this._responseTimer.start()}}},t.prototype.setTrackHint=function(e,t){var n=this._trackSidsToRenderHints.get(e)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in t&&n.enabled!==t.enabled&&(n.enabled=!!t.enabled,n.isEnabledDirty=!0),t.renderDimensions&&!a(t.renderDimensions,n.renderDimensions)&&(n.renderDimensions=t.renderDimensions,n.isDimensionDirty=!0),this._trackSidsToRenderHints.set(e,n),this._sendHints()},t.prototype.clearTrackHint=function(e){this._trackSidsToRenderHints.delete(e)},t}(o);e.exports=u},QB7E:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("3oWx"),s=n("Ye3u"),a=n("xwWy").DEFAULT_LOG_LEVEL,c=n("S3Hu"),u=n("ghd6"),l=u.buildLogLevels,d=u.isDeepEqual,h=function(e){function t(t,n,r){var i;r=Object.assign({logLevel:a,LocalTrackPublicationV2:s},r),i=e.call(this)||this;var o=l(r.logLevel);return Object.defineProperties(i,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:t},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:r.LocalTrackPublicationV2},_log:{value:r.log?r.log.createLog("default",i):new c("default",i,o,r.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:n},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),i}return i(t,e),t.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},t.prototype.setSignalingRegion=function(e){this._signalingRegion||(this._signalingRegion=e)},t.prototype.setBandwidthProfile=function(e){d(this._bandwidthProfile,e)||(this._bandwidthProfile=JSON.parse(JSON.stringify(e)),this._bandwidthProfileRevision++,this.didUpdate())},t.prototype.getParameters=function(){return this._encodingParameters},t.prototype.setParameters=function(e){return this._encodingParameters.update(e),this},t.prototype.update=function(e){return this._publishedRevision>=e.revision||(this._publishedRevision=e.revision,e.tracks.forEach(function(e){var t=this.tracks.get(e.id);t&&t.update(e)},this)),this},t.prototype._createLocalTrackPublicationSignaling=function(e,t,n){return new this._LocalTrackPublicationV2(e,t,n)},t.prototype.addTrack=function(t,n,r){var i=this;e.prototype.addTrack.call(this,t,n,r);var o=this.getPublication(t),s=o.isEnabled,a=o.updatedPriority,c=function(){s===o.isEnabled&&a===o.updatedPriority||(i.didUpdate(),s=o.isEnabled,a=o.updatedPriority)};return o.on("updated",c),this._removeListener(o),this._removeListeners.set(o,function(){return o.removeListener("updated",c)}),this.didUpdate(),this},t.prototype._removeListener=function(e){var t=this._removeListeners.get(e);t&&t()},t.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(e){return e.getState()})}},t.prototype.didUpdate=function(){this._revision++,this.emit("updated")},t.prototype.removeTrack=function(t){var n=e.prototype.removeTrack.call(this,t);return n&&(t.removeClone(n.trackTransceiver),this._removeListener(n),this.didUpdate()),n},t.prototype.setNetworkQualityConfiguration=function(e){this.networkQualityConfiguration.update(e)},t.prototype.setPublisherHint=function(e,t){var n=Array.from(this.tracks.values()).find(function(t){return t.sid===e});return n?n.trackTransceiver.setPublisherHint(t):(this._log.warn("track:"+e+" not found"),Promise.resolve("UNKNOWN_TRACK"))},t}(o);e.exports=h},QH9v:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("UpXp"),s=n("ghd6").makeUUID,a=function(e){function t(t,n,r){var i=e.call(this,s(),t,n,r)||this;return Object.defineProperties(i,{_clones:{value:new Set},_dataChannels:{value:new Set}}),i}return i(t,e),t.prototype._addClone=function(e){this._clones.add(e)},t.prototype.removeClone=function(e){this._clones.delete(e)},t.prototype.addDataChannel=function(e){return this._dataChannels.add(e),this},t.prototype.clone=function(){var e=this,n=new t(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(n),n.once("stopped",function(){return e.removeClone(n)}),n},t.prototype.removeDataChannel=function(e){return this._dataChannels.delete(e),this},t.prototype.send=function(e){return this._dataChannels.forEach(function(t){try{t.send(e)}catch(n){}}),this._clones.forEach(function(t){try{t.send(e)}catch(n){}}),this},t.prototype.stop=function(){this._dataChannels.forEach(function(e){return e.close()}),this._clones.forEach(function(e){return e.stop()}),e.prototype.stop.call(this)},t}(o);e.exports=a},QsSX:function(e,t,n){var r=n("+qE3"),i=n("zMHY"),o=n("MCLT"),s=n("KGUp"),a=n("HOot");function c(e,t,n){r.EventEmitter.call(this),i.checkIsFunction(e,"Expected fn to be a function."),i.checkIsArray(t,"Expected args to be an array."),i.checkIsFunction(n,"Expected callback to be a function."),this.function_=e,this.arguments_=t,this.callback_=n,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=c.DEFAULT_RETRY_PREDICATE_,this.state_=c.State_.PENDING}o.inherits(c,r.EventEmitter),c.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},c.DEFAULT_RETRY_PREDICATE_=function(e){return!0},c.prototype.isPending=function(){return this.state_==c.State_.PENDING},c.prototype.isRunning=function(){return this.state_==c.State_.RUNNING},c.prototype.isCompleted=function(){return this.state_==c.State_.COMPLETED},c.prototype.isAborted=function(){return this.state_==c.State_.ABORTED},c.prototype.setStrategy=function(e){return i.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=e,this},c.prototype.retryIf=function(e){return i.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=e,this},c.prototype.getLastResult=function(){return this.lastResult_.concat()},c.prototype.getNumRetries=function(){return this.numRetries_},c.prototype.failAfter=function(e){return i.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=e,this},c.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=c.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},c.prototype.start=function(e){i.checkState(!this.isAborted(),"FunctionCall is aborted."),i.checkState(this.isPending(),"FunctionCall already started.");var t=this.strategy_||new a;this.backoff_=e?e(t):new s(t),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=c.State_.RUNNING,this.doCall_(!1)},c.prototype.doCall_=function(e){e&&this.numRetries_++;var t=["call"].concat(this.arguments_);r.EventEmitter.prototype.emit.apply(this,t);var n=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(n))},c.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},c.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var e=Array.prototype.slice.call(arguments);this.lastResult_=e,r.EventEmitter.prototype.emit.apply(this,["callback"].concat(e));var t=e[0];t&&this.retryPredicate_(t)?this.backoff_.backoff(t):(this.state_=c.State_.COMPLETED,this.doCallback_())}},c.prototype.handleBackoff_=function(e,t,n){this.emit("backoff",e,t,n)},e.exports=c},Qvpb:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.createLocalTracks=void 0;var c=n("ghd6"),u=c.asLocalTrack,l=c.buildLogLevels,d=n("2h1k"),h=d.getUserMedia,p=d.MediaStreamTrack,f=n("VR5W"),m=f.LocalAudioTrack,v=f.LocalDataTrack,g=f.LocalVideoTrack,y=n("S3Hu"),_=n("xwWy"),b=_.DEFAULT_LOG_LEVEL,w=_.DEFAULT_LOGGER_NAME,k=n("cV4H"),S=0;t.createLocalTracks=function(e){return i(this,void 0,void 0,function(){var t,n,i,c,d,f,_,T,C,O,E,P;return o(this,function(o){switch(o.label){case 0:if(n=r({audio:t=!(e&&("audio"in e||"video"in e)),getUserMedia:h,loggerName:w,logLevel:b,LocalAudioTrack:m,LocalDataTrack:v,LocalVideoTrack:g,MediaStreamTrack:p,Log:y,video:t},e),i="[createLocalTracks #"+ ++S+"]",c=l(n.logLevel),d=new n.Log("default",i,c,n.loggerName),delete(f=Object.assign({log:d},n)).name,!1===n.audio&&!1===n.video)return d.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(n.tracks)return d.info("Adding user-provided LocalTracks"),d.debug("LocalTracks:",n.tracks),[2,n.tracks];(_={audio:"object"==typeof n.audio&&n.audio.name?{name:n.audio.name}:{},video:"object"==typeof n.video&&n.video.name?{name:n.video.name}:{}}).audio.isCreatedByCreateLocalTracks=!0,_.video.isCreatedByCreateLocalTracks=!0,"object"==typeof n.audio&&"boolean"==typeof n.audio.workaroundWebKitBug1208516&&(_.audio.workaroundWebKitBug1208516=n.audio.workaroundWebKitBug1208516),"object"==typeof n.video&&"boolean"==typeof n.video.workaroundWebKitBug1208516&&(_.video.workaroundWebKitBug1208516=n.video.workaroundWebKitBug1208516),"object"==typeof n.audio&&delete n.audio.name,"object"==typeof n.video&&delete n.video.name,T={audio:n.audio,video:n.video},C="object"==typeof n.audio&&n.audio.workaroundWebKitBug180748,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,C?k(d,n.getUserMedia,T):n.getUserMedia(T)];case 2:return O=o.sent(),E=a(a([],s(O.getAudioTracks())),s(O.getVideoTracks())),d.info("Call to getUserMedia successful; got MediaStreamTracks:",E),[2,E.map(function(e){return u(e,r(r({},_[e.kind]),f))})];case 3:throw P=o.sent(),d.warn("Call to getUserMedia failed:",P),P;case 4:return[2]}})})}},ROvb:function(e,t,n){"use strict";var r=n("2h1k").RTCSessionDescription,i=n("9dY8"),o=i.createPtToCodecName,s=i.getMediaSections;function a(e){var t=o(e);e=function(e,t){return Array.from(t.keys()).reduce(function(e,n){var r=new RegExp("^a=rtpmap:"+n+" rtx.+$","gm");return(e.match(r)||[]).slice("rtx"===t.get(n)?1:0).reduce(function(e,t){var r=new RegExp("\r\n"+t),i=new RegExp("\r\na=fmtp:"+n+" apt=[0-9]+");return e.replace(r,"").replace(i,"")},e)},e)}(e,t);var n=function(e){var t=new Map;return e.forEach(function(e,n){var r=t.get(e)||new Set;return t.set(e,r.add(n))}),t}(t),r=n.get("rtx")||new Set,i=new Set,s=function(e,t){var n=Array.from(e).reduce(function(e,t){var n=t[0],r=t[1],i=e.get(r)||new Set;return e.set(r,i.add(n))},new Map);return Array.from(n).reduce(function(e,n){var r=n[0],i=Array.from(n[1]);return i.length>1?(i.forEach(function(e){t.add(e)}),e):e.set(r,i[0])},new Map)}(function(e,t,n,r){return Array.from(n).reduce(function(n,i){var o=new RegExp("a=fmtp:"+i+" apt=(\\d+)"),s=e.match(o);if(!s)return r.add(i),n;var a=Number.parseInt(s[1]);return t.has(a)?"rtx"===t.get(a)?(r.add(i),n):n.set(i,a):(r.add(i),n)},new Map)}(e,t,r,i),i),a=Array.from(i);return["h264","vp8","vp9"].reduce(function(e,t){var r=n.get(t)||new Set;return Array.from(r).reduce(function(e,t){return s.has(t)?e:e.add(t)},e)},new Set).forEach(function(t){if(a.length){var n=a.shift();e=function(e,t,n){return e.endsWith("\r\n")?e+"a=fmtp:"+t+" apt="+n+"\r\n":e+"\r\na=fmtp:"+t+" apt="+n}(e=c(e,n),n,t)}}),a.forEach(function(t){e=function(e,t){var n=new RegExp("a=rtpmap:"+t+".*\r\n","gm");return e.replace(n,"")}(e=c(e,t),t)}),e}function c(e,t){var n=new RegExp("a=fmtp:"+t+".*\r\n","gm");return e.replace(n,"")}e.exports=function(e){var t,n,i={type:e.type};return"rollback"!==e.type&&(i.sdp=(n=s(t=e.sdp),[t.split("\r\nm=")[0]].concat(n.map(a)).join("\r\n"))),new r(i)}},"Rj+V":function(e,t,n){"use strict";var r=n("MCLT").inherits,i=n("z1nD");function o(e){var t=new i(e);return Object.setPrototypeOf(t,o.prototype),t}r(o,i),e.exports=o},S3Hu:function(e,t,n){"use strict";var r,i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n("cmf6").getLogger,a=n("xwWy"),c=a.DEFAULT_LOG_LEVEL,u=a.DEFAULT_LOGGER_NAME,l=n("xwWy").typeErrors,d=function(){function e(t,n,r,i,o){if("string"!=typeof t)throw l.INVALID_TYPE("moduleName","string");if(!n)throw l.REQUIRED_ARGUMENT("component");"object"!=typeof r&&(r={}),o=o||s,v(r),Object.defineProperties(this,{_component:{value:n},_logLevels:{value:r},_warnings:{value:new Set},_loggerName:{get:function(){var e=i&&"string"==typeof i?i:u;return this._logLevelsEqual||(e=e+"-"+t),e}},_logger:{get:function(){var e=o(this._loggerName),n=this._logLevels[t]||c;return e.setDefaultLevel(n="off"===n?"silent":n),e}},_logLevelsEqual:{get:function(){return 1===new Set(Object.values(this._logLevels)).size}},logLevel:{get:function(){return e.getLevelByName(r[t]||c)}},name:{get:n.toString.bind(n)}})}return e.getLevelByName=function(t){return isNaN(t)?(m(t=t.toUpperCase()),e[t]):parseInt(t,10)},e.prototype.createLog=function(t,n){var r=this._loggerName;return this._logLevelsEqual||(r=r.substring(0,r.lastIndexOf("-"))),new e(t,n,this._logLevels,r)},e.prototype.setLevels=function(e){return v(e),Object.assign(this._logLevels,e),this},e.prototype.log=function(t,n){var r=e._levels[t];if(!r)throw l.INVALID_VALUE("logLevel",p);r=r.toLowerCase();var s=[(new Date).toISOString(),r,this.name];return(this._logger[r]||function(){}).apply(void 0,o([],i(s.concat(n)))),this},e.prototype.debug=function(){return this.log(e.DEBUG,[].slice.call(arguments))},e.prototype.deprecated=function(e){var t=function(e){if((r=r||new Map).has(e))return r.get(e);var t=new Set;return r.set(e,t),t}(this._component.constructor);return t.has(e)?this:(t.add(e),this.warn(e))},e.prototype.info=function(){return this.log(e.INFO,[].slice.call(arguments))},e.prototype.warn=function(){return this.log(e.WARN,[].slice.call(arguments))},e.prototype.warnOnce=function(e){return this._warnings.has(e)?this:(this._warnings.add(e),this.warn(e))},e.prototype.error=function(){return this.log(e.ERROR,[].slice.call(arguments))},e.prototype.throw=function(t,n){throw t.clone&&(t=t.clone(n)),this.log(e.ERROR,t),t},e}();Object.defineProperties(d,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var h={},p=[],f=d._levels.map(function(e,t){return h[e]=!0,p.push(t),e});function m(e){if(!(e in h))throw l.INVALID_VALUE("level",f)}function v(e){Object.keys(e).forEach(function(t){m(e[t].toUpperCase())})}e.exports=d},"SAu+":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=function(e){function t(n){var r=this,i=[].slice.call(arguments,1);r=e.apply(this,s([],o(i)))||this,Object.setPrototypeOf(r,t.prototype);var a=Error.apply(r,i);return a.name="TwilioError",Object.defineProperty(r,"code",{value:n,enumerable:!0}),Object.getOwnPropertyNames(a).forEach(function(e){Object.defineProperty(this,e,{value:a[e],enumerable:!0})},r),r}return i(t,e),t.prototype.toString=function(){return this.name+" "+this.code+(this.message?": "+this.message:"")},t}(Error);e.exports=a},STyX:function(e,t,n){"use strict";var r=function(){function e(e,t,n,r){Object.defineProperties(this,{availableSend:{enumerable:!0,value:n},recv:{enumerable:!0,value:t},rtt:{enumerable:!0,value:r},send:{enumerable:!0,value:e}})}return e.of=function(t,n){var r=(n.timestamp-t.timestamp)/1e3;return new e(r>0?(n.bytesSent-t.bytesSent)/r*8:0,r>0?(n.bytesReceived-t.bytesReceived)/r*8:0,n.availableOutgoingBitrate,n.currentRoundTripTime)},e}();e.exports=r},"T/xC":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("gEVb"),s=n("FjKE"),a=n("Czg6"),c=n("xwWy").reconnectBackoffConfig,u=n("Y1/N"),l=n("xwWy"),d=l.SDK_NAME,h=l.SDK_VERSION,p=l.SDP_FORMAT,f=n("ghd6"),m=f.createBandwidthProfilePayload,v=f.createMediaSignalingPayload,g=f.createSubscribePayload,y=f.getUserAgent,_=f.isNonArrayObject,b=n("5wwa"),w=b.createTwilioError,k=b.RoomCompletedError,S=b.SignalingConnectionError,T=b.SignalingServerBusyError,C={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},O=function(e){function t(t,n,r,i,o,u){var l;return u=Object.assign({Backoff:a,TwilioConnection:s,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:y()},u),l=e.call(this,"connecting",C)||this,Object.defineProperties(l,{_accessToken:{value:n},_automaticSubscription:{value:u.automaticSubscription},_bandwidthProfile:{value:u.bandwidthProfile},_dominantSpeaker:{value:u.dominantSpeaker},_adaptiveSimulcast:{value:u.adaptiveSimulcast},_eventObserver:{value:u.eventObserver,writable:!1},_renderHints:{value:u.renderHints},_iceServersStatus:{value:Array.isArray(u.iceServers)?"overrode":"acquire"},_localParticipant:{value:r},_name:{value:t},_networkQuality:{value:_(u.networkQuality)||u.networkQuality},_options:{value:u},_peerConnectionManager:{value:i},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:u.Backoff.exponential(c)},_session:{value:null,writable:!0},_trackPriority:{value:u.trackPriority},_trackSwitchOff:{value:u.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:u.userAgent},_wsServer:{value:o}}),function(e){function t(){if("disconnected"!==e.state){e._twilioConnection&&e._twilioConnection.removeListener("message",r);var t=e._options,i=t.TwilioConnection,o=new i(e._wsServer,Object.assign({helloBody:"connecting"===e.state&&"acquire"===e._iceServersStatus?e._createIceMessage():e._createConnectOrSyncOrDisconnectMessage()},t));o.once("close",function(e){e===i.CloseReason.LOCAL?n():n(new Error(e))}),o.on("message",r),e._twilioConnection=o}}function n(n){if("disconnected"!==e.state)if(n){var r=e._getReconnectTimer();if(r)"connected"===e.state&&e.preempt("syncing"),r.then(t);else{var i=n.message===s.CloseReason.BUSY?new T:new S;e.disconnect(i)}}else e.disconnect()}function r(t){if("disconnected"!==e.state)if("error"!==t.type)switch(e.state){case"connected":switch(t.type){case"connected":case"synced":case"update":return void e.emit("message",t);case"disconnected":return void e.disconnect("completed"===t.status?new k:null);default:return}case"connecting":switch(t.type){case"iced":return void e._options.onIced(t.ice_servers).then(function(){e._sendConnectOrSyncOrDisconnectMessage()});case"connected":return e._setSession(t.session,t.options.session_timeout),e.emit("connected",t),void e.preempt("connected");case"synced":case"update":return void e._updatesReceived.push(t);case"disconnected":return void e.disconnect("completed"===t.status?new k:null);default:return}case"syncing":switch(t.type){case"connected":case"update":return void e._updatesReceived.push(t);case"synced":return e._clearReconnectTimer(),e.emit("message",t),void e.preempt("connected");case"disconnected":return void e.disconnect("completed"===t.status?new k:null);default:return}default:return}else e.disconnect(w(t.code,t.message))}e.on("stateChanged",function t(n){switch(n){case"connected":var i=e._updatesToSend.splice(0);return i.length&&e.publish(function(e){return e.reduce(function(e,t){return(!e.participant&&t.participant||e.participant&&t.participant&&t.participant.revision>e.participant.revision)&&(e.participant=t.participant),!e.peer_connections&&t.peer_connections?e.peer_connections=E(t.peer_connections):e.peer_connections&&t.peer_connections&&(e.peer_connections=E(e.peer_connections.concat(t.peer_connections))),e},{})}(i)),void e._updatesReceived.splice(0).forEach(function(t){return e.emit("message",t)});case"disconnected":return e._twilioConnection.removeListener("message",r),void e.removeListener("stateChanged",t);case"syncing":default:return}});var i=e._options;"overrode"===e._iceServersStatus?(0,i.onIced)(i.iceServers).then(t):t()}(l),l}return i(t,e),t.prototype._createConnectOrSyncOrDisconnectMessage=function(){if("connected"===this.state)return null;if("disconnected"===this.state)return{session:this._session,type:"disconnect",version:2};var e={connecting:"connect",syncing:"sync"}[this.state],t={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:e,version:2};return"connect"===t.type?(t.ice_servers=this._iceServersStatus,t.publisher={name:d,sdk_version:h,user_agent:this._userAgent},this._bandwidthProfile&&(t.bandwidth_profile=m(this._bandwidthProfile)),t.media_signaling=v(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints),t.subscribe=g(this._automaticSubscription),t.format=p,t.token=this._accessToken):"sync"===t.type?(t.session=this._session,t.token=this._accessToken):"update"===t.type&&(t.session=this._session),t},t.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:1}},t.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var e=this._createConnectOrSyncOrDisconnectMessage();e&&this._twilioConnection.sendMessage(e)},t.prototype.disconnect=function(e){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[e]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0)},t.prototype.publish=function(e){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:2},e)),!0;case"connecting":case"syncing":return this._updatesToSend.push(e),!0;case"disconnected":default:return!1}},t.prototype.publishEvent=function(e,t,n,r){this._eventObserver.emit("event",{group:e,name:t,level:n,payload:r})},t.prototype.sync=function(){return"connected"===this.state&&(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0)},t.prototype._setSession=function(e,t){this._session=e,this._sessionTimeoutMS=1e3*t},t.prototype._getReconnectTimer=function(){var e=this;return 0===this._sessionTimeoutMS?null:(this._sessionTimer||(this._sessionTimer=new u(function(){e._sessionTimer&&(e._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(t){e._reconnectBackoff.once("ready",t),e._reconnectBackoff.backoff()}))},t.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},t}(o);function E(e){return Array.from(e.reduce(function(e,t){var n=e.get(t.id)||t;return(!n.description&&t.description||n.description&&t.description&&t.description.revision>n.description.revision)&&(n.description=t.description),(!n.ice&&t.ice||n.ice&&t.ice&&t.ice.revision>n.ice.revision)&&(n.ice=t.ice),e.set(n.id,n),e},new Map).values())}e.exports=O},T5BQ:function(e,t,n){"use strict";var r=n("xwWy"),i=r.ICE_ACTIVITY_CHECK_PERIOD_MS,o=r.ICE_INACTIVITY_THRESHOLD_MS,s=function(){function e(e,t){t=Object.assign({activityCheckPeriodMs:i,inactivityThresholdMs:o},t),Object.defineProperties(this,{_activityCheckPeriodMs:{value:t.activityCheckPeriodMs},_inactivityThresholdMs:{value:t.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:e},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return e.prototype._getActivePairStat=function(e){return Array.from(e.values()).find(function(e){return"candidate-pair"===e.type&&e.nominated})||{bytesReceived:0,timestamp:Math.round((new Date).getTime())}},e.prototype._getIceConnectionStats=function(){var e=this;return this._peerConnection.getStats().then(function(t){return e._getActivePairStat(t)}).catch(function(){return null})},e.prototype._scheduleInactivityCallback=function(e){var t=this;e&&null===this._onIceConnectionStateChanged?(this._onIceConnectionStateChanged=function(){"disconnected"===t._peerConnection.iceConnectionState&&e()},this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged)):!e&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged),this._onIceConnectionStateChanged=null)},e.prototype.start=function(e){var t=this;this.stop(),this._timer=setInterval(function(){t._getIceConnectionStats().then(function(n){n&&(t._lastActivity&&t._lastActivity.bytesReceived===n.bytesReceived||(t._lastActivity=n,t._scheduleInactivityCallback(null)),n.timestamp-t._lastActivity.timestamp>=t._inactivityThresholdMs&&("disconnected"===t._peerConnection.iceConnectionState?e():null===t._onIceConnectionStateChanged&&t._scheduleInactivityCallback(e)))})},this._activityCheckPeriodMs)},e.prototype.stop=function(){this._scheduleInactivityCallback(null),null!==this._timer&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},e}();e.exports=s},TM7a:function(e,t,n){"use strict";e.exports=function(e,t,n){n="number"==typeof n?n:250;var r=e.createMediaStreamSource(t),i=e.createAnalyser();i.fftSize=2048,r.connect(i);var o=new Uint8Array(i.fftSize),s=!1;return setTimeout(function(){s=!0},n),function e(){return s?Promise.resolve(!0):(i.getByteTimeDomainData(o),o.some(function(e){return 128!==e&&0!==e})?Promise.resolve(!1):function(e){return e="number"==typeof e?e:0,new Promise(function(t){return setTimeout(t,e)})}().then(e))}().then(function(e){return r.disconnect(),e},function(e){throw r.disconnect(),e})}},TTpt:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=n("mAYT"),c=n("6frX"),u=n("8vSI"),l=n("Vh62"),d=n("m8+h"),h=n("Ds+w"),p=n("6vXP"),f=n("ghd6"),m=0,v=function(e){function t(t,n){var r=e.call(this)||this,i=function(e){var t=e.map(function(e){return[e.id,e]}),n=t.filter(function(e){return"audio"===e[1].kind}),r=t.filter(function(e){return"video"===e[1].kind});return{audioTracks:n,dataTracks:t.filter(function(e){return"data"===e[1].kind}),tracks:t,videoTracks:r}}((n=Object.assign({RemoteAudioTrack:c,RemoteAudioTrackPublication:u,RemoteDataTrack:l,RemoteDataTrackPublication:d,RemoteVideoTrack:h,RemoteVideoTrackPublication:p,tracks:[]},n)).tracks),o=n.log.createLog("default",r),s=new Map(i.audioTracks),a=new Map(i.dataTracks),f=new Map(i.tracks),v=new Map(i.videoTracks);return Object.defineProperties(r,{_RemoteAudioTrack:{value:n.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:n.RemoteAudioTrackPublication},_RemoteDataTrack:{value:n.RemoteDataTrack},_RemoteDataTrackPublication:{value:n.RemoteDataTrackPublication},_RemoteVideoTrack:{value:n.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:n.RemoteVideoTrackPublication},_audioTracks:{value:s},_dataTracks:{value:a},_instanceId:{value:++m},_clientTrackSwitchOffControl:{value:n.clientTrackSwitchOffControl},_contentPreferencesMode:{value:n.contentPreferencesMode},_log:{value:o},_signaling:{value:t},_tracks:{value:f},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:v},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return t.identity}},networkQualityLevel:{enumerable:!0,get:function(){return t.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return t.networkQualityStats}},sid:{enumerable:!0,get:function(){return t.sid}},state:{enumerable:!0,get:function(){return t.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map}}),r._tracks.forEach(g.bind(null,r)),t.on("networkQualityLevelChanged",function(){return r.emit("networkQualityLevelChanged",r.networkQualityLevel,r.networkQualityStats&&(r.networkQualityStats.audio||r.networkQualityStats.video)?r.networkQualityStats:null)}),function(e,t){var n=e._log;"disconnected"!==e.state&&t.on("stateChanged",function r(i){n.debug("Transitioned to state:",i),e.emit(i,e),"disconnected"===i&&(n.debug("Removing Track event reemitters"),t.removeListener("stateChanged",r),e._tracks.forEach(function(t){var n=e._trackEventReemitters.get(t.id);t&&n&&n.forEach(function(e,n){t.removeListener(n,e)})}),t.tracks.forEach(function(t){var n=e._tracks.get(t.id),r=e._trackEventReemitters.get(t.id);n&&r&&r.forEach(function(e,t){n.removeListener(t,e)})}),e._trackEventReemitters.clear(),e.tracks.forEach(function(t){e._trackPublicationEventReemitters.get(t.trackSid).forEach(function(e,n){t.removeListener(n,e)})}),e._trackPublicationEventReemitters.clear())})}(r,t),o.info("Created a new Participant"+(r.identity?": "+r.identity:"")),r}return i(t,e),t.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},t.prototype._getTrackPublicationEvents=function(){return[]},t.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},t.prototype._addTrack=function(e,t){var n=this._log;return this._tracks.has(t)?null:(this._tracks.set(t,e),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[e.kind].set(t,e),g(this,e,t),n.info("Added a new "+f.trackClass(e)+":",t),n.debug(f.trackClass(e)+":",e),e)},t.prototype._addTrackPublication=function(e){var t=this._log;return this.tracks.has(e.trackSid)?null:(this.tracks.set(e.trackSid,e),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[e.kind].set(e.trackSid,e),function(e,t){var n=new Map;"disconnected"!==e.state&&(e._getTrackPublicationEvents().forEach(function(r){var i=o(r,2),a=i[0],c=i[1];n.set(a,function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e.emit.apply(e,s(s([c],o(n)),[t]))}),t.on(a,n.get(a))}),e._trackPublicationEventReemitters.set(t.trackSid,n))}(this,e),t.info("Added a new "+f.trackPublicationClass(e)+":",e.trackSid),t.debug(f.trackPublicationClass(e)+":",e),e)},t.prototype._handleTrackSignalingEvents=function(){var e=this,t=e._log,n=e._clientTrackSwitchOffControl,r=e._contentPreferencesMode,i=this;if("disconnected"!==this.state){var s=this._RemoteAudioTrack,a=this._RemoteAudioTrackPublication,c=this._RemoteVideoTrack,u=this._RemoteVideoTrackPublication,l=this._RemoteDataTrack,d=this._RemoteDataTrackPublication,h=this._signaling;h.on("trackAdded",p),h.on("trackRemoved",f),h.tracks.forEach(p),h.on("stateChanged",function e(n){"disconnected"===n?(t.debug("Removing event listeners"),h.removeListener("stateChanged",e),h.removeListener("trackAdded",p),h.removeListener("trackRemoved",f)):"connected"===n&&(t.info("reconnected"),setTimeout(function(){return i.emit("reconnected")},0))})}function p(e){var n=new(0,{audio:a,data:d,video:u}[e.kind])(e,{log:t});i._addTrackPublication(n);var r=e.isSubscribed;r&&m(e),i._trackSignalingUpdatedEventCallbacks.set(e.sid,function(){if(r!==e.isSubscribed){if(r=e.isSubscribed)return void m(e);!function(e){var t=o(Array.from(i._tracks.entries()).find(function(t){return o(t,2)[1].sid===e.sid}),2),n=t[0],r=t[1],s=i.tracks.get(e.sid);r&&i._removeTrack(r,s,n)}(e)}}),e.on("updated",i._trackSignalingUpdatedEventCallbacks.get(e.sid))}function f(e){e.isSubscribed&&e.setTrackTransceiver(null);var t=i._trackSignalingUpdatedEventCallbacks.get(e.sid);t&&(e.removeListener("updated",t),i._trackSignalingUpdatedEventCallbacks.delete(e.sid));var n=i.tracks.get(e.sid);n&&i._removeTrackPublication(n)}function m(e){var o=e.isEnabled,a=e.name,u=e.kind,d=e.sid,p=e.trackTransceiver,f=e.isSwitchedOff,m={audio:s,video:c,data:l}[u],v=i.tracks.get(d);if(m&&u===p.kind){var g={log:t,name:a,clientTrackSwitchOffControl:n,contentPreferencesMode:r},y="data"===u?new m(d,p,g):new m(d,p,o,f,function(e){return h.updateSubscriberTrackPriority(d,e)},function(t){e.isSubscribed&&h.updateTrackRenderHint(d,t)},g);i._addTrack(y,v,p.id)}}},t.prototype._removeTrack=function(e,t){if(!this._tracks.has(t))return null;this._tracks.delete(t),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[e.kind].delete(t),(this._trackEventReemitters.get(t)||new Map).forEach(function(t,n){e.removeListener(n,t)});var n=this._log;return n.info("Removed a "+f.trackClass(e)+":",t),n.debug(f.trackClass(e)+":",e),e},t.prototype._removeTrackPublication=function(e){if(!(e=this.tracks.get(e.trackSid)))return null;this.tracks.delete(e.trackSid),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[e.kind].delete(e.trackSid),(this._trackPublicationEventReemitters.get(e.trackSid)||new Map).forEach(function(t,n){e.removeListener(n,t)});var t=this._log;return t.info("Removed a "+f.trackPublicationClass(e)+":",e.trackSid),t.debug(f.trackPublicationClass(e)+":",e),e},t.prototype.toJSON=function(){return f.valueToJSON(this)},t}(a);function g(e,t,n){var r=new Map;"disconnected"!==e.state&&(e._getTrackEvents().forEach(function(n){var i=n[0],a=n[1];r.set(i,function(){var t=[a].concat([].slice.call(arguments));return e.emit.apply(e,s([],o(t)))}),t.on(i,r.get(i))}),e._trackEventReemitters.set(n,r))}e.exports=v},UBwA:function(e,t,n){"use strict";var r=function(){function e(e){var t=this;void 0===e&&(e=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){t._emitVisible("visible"===document.visibilityState)}}});for(var n=0;n<e;n++)this._listeners.push([])}return e.prototype.clear=function(){for(var e=this._listeners.length,t=0;t<e;t++)this._listeners[t]=[]},e.prototype._listenerCount=function(){return this._listeners.reduce(function(e,t){return e+t.length},0)},e.prototype._emitVisible=function(e){for(var t=this,n=Promise.resolve(),r=function(r){n=n.then(function(){return t._emitVisiblePhase(r,e)})},i=1;i<=this._listeners.length;i++)r(i);return n},e.prototype._emitVisiblePhase=function(e,t){return Promise.all(this._listeners[e-1].map(function(e){var n=e(t);return n instanceof Promise?n:Promise.resolve(n)}))},e.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},e.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},e.prototype.onVisibilityChange=function(e,t){if("number"!=typeof e||e<=0||e>this._listeners.length)throw new Error("invalid phase: ",e);return this._listeners[e-1].push(t),1===this._listenerCount()&&this._start(),this},e.prototype.offVisibilityChange=function(e,t){if("number"!=typeof e||e<=0||e>this._listeners.length)throw new Error("invalid phase: ",e);var n=this._listeners[e-1],r=n.indexOf(t);return-1!==r&&(n.splice(r,1),0===this._listenerCount()&&this._stop()),this},e}();e.exports=new r(2)},UQcK:function(e,t,n){"use strict";e.exports=function(e){Object.defineProperties(this,{track:{enumerable:!0,value:e,writable:!0}})}},"UZ/N":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("2xLa"),s=function(e){function t(t,n){var r=e.call(this,n.id,t,n)||this;return Object.defineProperties(r,{lastReport:{enumerable:!0,value:null,writable:!0}}),r}return i(t,e),t.prototype.next=function(e,t){var n=this.lastStats;this.lastStats=t,this.trackId=e;var r=o.of(e,n,t);return this.lastReport=r,r},t}(n("akGs"));e.exports=s},Um2Z:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){var r=e.call(this,t,"track_priority",n)||this;return Object.defineProperties(r,{_enqueuedPriorityUpdates:{value:new Map}}),r.on("ready",function(e){Array.from(r._enqueuedPriorityUpdates.keys()).forEach(function(t){e.publish({type:"track_priority",track:t,subscribe:r._enqueuedPriorityUpdates.get(t)})})}),r}return i(t,e),t.prototype.sendTrackPriorityUpdate=function(e,t,n){if("subscribe"!==t)throw new Error("only subscribe priorities are supported, found: "+t);this._enqueuedPriorityUpdates.set(e,n),this._transport&&this._transport.publish({type:"track_priority",track:e,subscribe:n})},t}(n("zbom"));e.exports=o},UpXp:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n,r,i){var o=e.call(this,t,"data")||this;return Object.defineProperties(o,{maxPacketLifeTime:{enumerable:!0,value:n},maxRetransmits:{enumerable:!0,value:r},ordered:{enumerable:!0,value:i}}),o}return i(t,e),t}(n("Jhn5"));e.exports=o},VR5W:function(e,t,n){"use strict";e.exports={LocalAudioTrack:n("gJbR"),LocalVideoTrack:n("2NPH"),LocalDataTrack:n("Rj+V")}},VUT2:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t){var n=e.call(this)||this;return Object.defineProperties(n,{_dataChannel:{value:t},_messageQueue:{value:[]}}),t.addEventListener("open",function(){n._messageQueue.splice(0).forEach(function(e){return n._publish(e)})}),t.addEventListener("message",function(e){var t=e.data;try{var r=JSON.parse(t);n.emit("message",r)}catch(i){}}),n.publish({type:"ready"}),n}return i(t,e),t.prototype._publish=function(e){var t=JSON.stringify(e);try{this._dataChannel.send(t)}catch(n){}},t.prototype.publish=function(e){var t=this._dataChannel;return"closing"!==t.readyState&&"closed"!==t.readyState&&("connecting"===t.readyState?(this._messageQueue.push(e),!0):(this._publish(e),!0))},t}(n("+qE3").EventEmitter);e.exports=o},VgEY:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("+qE3").EventEmitter,s=["signaling","room","media","quality","video-processor","preflight"],a=["debug","error","info","warning"],c=function(e){function t(t,n,r,i){void 0===i&&(i=null);var o=e.call(this)||this;return o.on("event",function(e){var o=e.name,c=e.group,u=e.level,l=e.payload;if("string"!=typeof o)throw r.error("Unexpected name: ",o),new Error("Unexpected name: ",o);if(!s.includes(c))throw r.error("Unexpected group: ",c),new Error("Unexpected group: ",c);if(!a.includes(u))throw r.error("Unexpected level: ",u),new Error("Unexpected level: ",u);var d=Date.now(),h=d-n,p=Object.assign({elapsedTime:h,level:u},l||{});t.publish(c,o,p);var f=Object.assign({elapsedTime:h,group:c,level:u,name:o,timestamp:d},l?{payload:l}:{});r[{debug:"debug",error:"error",info:"info",warning:"warn"}[u]]("event",f),i&&"signaling"===c&&i.emit("event",f)}),o}return i(t,e),t}(o);e.exports=c},Vh62:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=n("NCuz"),c=n("xwWy"),u=c.typeErrors,l=c.trackPriority,d=function(e){function t(t,n,r){var i=e.call(this,n.id,"data",r)||this;return Object.defineProperties(i,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:n.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:n.maxRetransmits},ordered:{enumerable:!0,value:n.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:null===n.maxPacketLifeTime&&null===n.maxRetransmits},sid:{enumerable:!0,value:t}}),n.on("message",function(e){i.emit("message",e,i)}),i}return i(t,e),t.prototype.setPriority=function(e){var t=s([null],o(Object.values(l)));if(!t.includes(e))throw u.INVALID_VALUE("priority",t);return this._priority=e,this},t.prototype._setEnabled=function(){},t.prototype._setSwitchedOff=function(e){this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit(e?"switchedOff":"switchedOn",this))},t}(a);e.exports=d},VueP:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};function s(e,t,n,r){var i=[];return e.forEach(function(e){0!==r.length&&!r.includes(e.type)||0!==n.length&&!n.includes(e.kind)||"number"!=typeof e[t]||i.push(e[t])}),i}function a(e){return[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}].reduce(function(t,n){var r=[n.key];n.altKeys&&(r=r.concat(n.altKeys));var i=r.find(function(t){return t in e});return i&&typeof e[i]===n.type&&(t[n.key]=e[i]),t},{})}Object.defineProperty(t,"__esModule",{value:!0}),t.getCombinedConnectionStats=void 0,t.getCombinedConnectionStats=function(e){var t=e.publisher,n=e.subscriber;return r(this,void 0,void 0,function(){var e,r,c,u,l,d,h,p,f,m,v,g,y,_,b;return i(this,function(i){switch(i.label){case 0:return[4,Promise.all([t,n].map(function(e){return e.getStats()}))];case 1:return e=o.apply(void 0,[i.sent(),2]),r=e[0],u=s(c=e[1],"timestamp",["audio"],["inbound-rtp"]),l=u.length>0?u[0]:0,d=s(c,"jitter",["audio"],["inbound-rtp"]).reduce(function(e,t){return Math.max(e,t)},0),h=s(c,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(e,t){return e+t},0),p=s(c,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(e,t){return e+t},0),f=s(r,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(e,t){return Math.max(e,t)},0),m=s(c,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(e,t){return Math.max(e,t)},0),v=1e3*(m||f),g=s(r,"bytesSent",[],["candidate-pair"]).reduce(function(e,t){return e+t},0),y=s(c,"bytesReceived",[],["candidate-pair"]).reduce(function(e,t){return e+t},0),_=function(e){var t=null,n=[];e.forEach(function(e){"transport"===e.type&&e.selectedCandidatePairId?t=e.selectedCandidatePairId:"candidate-pair"===e.type&&n.push(e)});var r=n.find(function(e){return e.selected||t&&e.id===t});if(!r)return null;var i=r,o=e.get(i.localCandidateId),s=e.get(i.remoteCandidateId);return o&&s?{localCandidate:a(o),remoteCandidate:a(s)}:null}(c),b=[],c.forEach(function(e){"local-candidate"!==e.type&&"remote-candidate"!==e.type||b.push(a(e))}),[2,{timestamp:l,jitter:d,packets:h,packetsLost:p,roundTripTime:v,bytesSent:g,bytesReceived:y,selectedIceCandidatePairStats:_,iceCandidateStats:b}]}})})}},"W/pi":function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.makeStat=void 0,t.makeStat=function(e){return e&&e.length?{min:Math.min.apply(Math,i([],r(e))),max:Math.max.apply(Math,i([],r(e))),average:e.reduce(function(e,t){return e+t},0)/e.length}:null}},WHMX:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n,r,i,o,s){var a=e.call(this,n,r,i,o)||this;return Object.defineProperties(a,{_isSwitchedOff:{value:s,writable:!0}}),a.setSid(t),a}return i(t,e),Object.defineProperty(t.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),t.prototype.subscribeFailed=function(e){return this.error||(this._error=e,this.emit("updated")),this},t.prototype.setPriority=function(e){return this._priority!==e&&(this._priority=e,this.emit("updated")),this},t.prototype.setSwitchedOff=function(e){return this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit("updated")),this},t}(n("Ivmz"));e.exports=o},XI6i:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(n("hkYD"));e.exports=o},"Y1/N":function(e,t,n){"use strict";var r=function(){function e(e,t,n){void 0===n&&(n=!0),Object.defineProperties(this,{_delay:{value:t,writable:!0},_fn:{value:e},_timeout:{value:null,writable:!0}}),n&&this.start()}return Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),e.prototype.setDelay=function(e){this._delay=e},e.prototype.start=function(){var e=this;this.isSet||(this._timeout=setTimeout(function(){var t=e._fn;e.clear(),t()},this._delay))},e.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},e.prototype.reset=function(){this.clear(),this.start()},e}();e.exports=r},Ye3u:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("shdM"),s=n("5wwa").createTwilioError,a=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return i(t,e),t.prototype.getState=function(){return{enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority}},t.prototype.update=function(e){switch(e.state){case"ready":this.setSid(e.sid);break;case"failed":var t=e.error;this.publishFailed(s(t.code,t.message))}return this},t}(o);e.exports=a},ZfiD:function(e,t,n){"use strict";var r=n("STyX"),i=function(){function e(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new r(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return e.prototype.next=function(e){var t=this.lastStats;if(this.lastStats=e,t){var n=t.id===e.id?r.of(t,e):new r(0,0);this.lastReport=n}return this.lastReport},e}();e.exports=i},aQcx:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("2h1k").getUserMedia,s=n("BWbm"),a=s.guessBrowser,c=s.isIOSChrome,u=n("ghd6"),l=u.capitalize,d=u.defer,h=u.isUserMediaTrack,p=u.waitForSometime,f=u.waitForEvent,m=n("xwWy").typeErrors.ILLEGAL_INVOKE,v=n("m0JW"),g=n("+OFx"),y=n("UBwA"),_=n("jxCJ"),b=n("cV4H"),w=n("O22K");function k(e){var t=e._log,n=e.kind,r={audio:v,video:g}[n],i=e._dummyEl,o=e.mediaStreamTrack,s=null;function a(){return Promise.race([f(o,"unmute"),p(50)]).then(function(){return n=e.mediaStreamTrack.muted,o=e.isStopped&&!!e._workaroundWebKitBug1208516Cleanup,Promise.resolve().then(function(){return"visible"===document.visibilityState&&!s&&(n||o||i.play().then(function(){return r(i)}).then(function(e){return e?t.warn("Silence detected"):t.info("Non-silence detected"),e}).catch(function(e){t.warn("Failed to detect silence:",e)}).finally(function(){i.pause()}))});var n,o}).then(function(r){return r&&!s&&(s=d(),e._restart().finally(function(){i=e._dummyEl,l(),o=e.mediaStreamTrack,u(),s.resolve(),s=null}).catch(function(e){t.error("failed to restart track: ",e)})),(s&&s.promise||Promise.resolve()).finally(function(){return _.resolveDeferred(n)})}).catch(function(e){t.error("error in maybeRestart: "+e.message)})}function c(){var t=e._log,n=e.kind;t.info("Muted"),t.debug("LocalMediaTrack:",e),_.startDeferred(n)}function u(){o.addEventListener("ended",a),o.addEventListener("mute",c),o.addEventListener("unmute",a)}function l(){o.removeEventListener("ended",a),o.removeEventListener("mute",c),o.removeEventListener("unmute",a)}var h=function(e){return!!e&&a()};return y.onVisibilityChange(1,h),u(),function(){y.offVisibilityChange(1,h),l()}}e.exports=function(e){return function(e){function t(t,n){var r=this,i=("safari"===a()||c())&&h(t)&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState;n=Object.assign({getUserMedia:o,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:i,gUMSilentTrackWorkaround:b},n);var s=new w(t),u=s.kind;return r=e.call(this,s,n)||this,Object.defineProperties(r,{_constraints:{value:"object"==typeof n[u]?n[u]:{},writable:!0},_getUserMedia:{value:n.getUserMedia},_gUMSilentTrackWorkaround:{value:n.gUMSilentTrackWorkaround},_workaroundWebKitBug1208516:{value:n.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:n.isCreatedByCreateLocalTracks},_trackSender:{value:s},id:{enumerable:!0,value:s.id},isEnabled:{enumerable:!0,get:function(){return s.enabled}},isStopped:{enumerable:!0,get:function(){return"ended"===s.readyState}}}),r._workaroundWebKitBug1208516&&(r._workaroundWebKitBug1208516Cleanup=k(r)),r}return i(t,e),t.prototype._end=function(){this._didCallEnd||(e.prototype._end.call(this),this._didCallEnd=!0,this.emit("stopped",this))},t.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),e.prototype._initialize.call(this)},t.prototype._reacquireTrack=function(e){var t,n=this,r=n._getUserMedia,i=n._gUMSilentTrackWorkaround,o=n._log,s=n.mediaStreamTrack.kind;o.info("Re-acquiring the MediaStreamTrack"),o.debug("Constraints:",e);var a=Object.assign({audio:!1,video:!1},((t={})[s]=e,t));return(this._workaroundWebKitBug1208516Cleanup?i(o,r,a):r(a)).then(function(e){return e.getTracks()[0]})},t.prototype._restart=function(e){var t=this,n=this._log;return e=e||this._constraints,this._stop(),this._reacquireTrack(e).catch(function(t){throw n.error("Failed to re-acquire the MediaStreamTrack:",{error:t,constraints:e}),t}).then(function(r){return n.info("Re-acquired the MediaStreamTrack"),n.debug("MediaStreamTrack:",r),t._constraints=Object.assign({},e),t._setMediaStreamTrack(r)})},t.prototype._setMediaStreamTrack=function(e){var t=this;return e.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){t._unprocessedTrack=e}):this._trackSender.setMediaStreamTrack(e).catch(function(n){t._log.warn("setMediaStreamTrack failed:",{error:n,mediaStreamTrack:e})})).then(function(){t._initialize(),t._getAllAttachedElements().forEach(function(e){return t._attach(e)})})},t.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},t.prototype.enable=function(e){return(e="boolean"!=typeof e||e)!==this.mediaStreamTrack.enabled&&(this._log.info((e?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=e,this.emit(e?"enabled":"disabled",this)),this},t.prototype.disable=function(){return this.enable(!1)},t.prototype.restart=function(e){var t=this,n=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(m("restart","can only be called on a Local"+l(n)+"Track that is created using createLocalTracks or createLocal"+l(n)+"Track."));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var r=this._restart(e);return this._workaroundWebKitBug1208516&&(r=r.finally(function(){t._workaroundWebKitBug1208516Cleanup=k(t)})),r},t.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},t}(e)}},akGs:function(e,t,n){"use strict";e.exports=function(e,t,n){Object.defineProperties(this,{id:{enumerable:!0,value:e,writable:!0},trackId:{enumerable:!0,value:t,writable:!0},lastStats:{enumerable:!0,value:n,writable:!0}})}},b9Z9:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=null;return"number"==typeof n.frameWidthReceived&&"number"==typeof n.frameHeightReceived&&(i={},Object.defineProperties(i,{width:{value:n.frameWidthReceived,enumerable:!0},height:{value:n.frameHeightReceived,enumerable:!0}})),Object.defineProperties(r,{dimensions:{value:i,enumerable:!0},frameRate:{value:"number"==typeof n.frameRateReceived?n.frameRateReceived:null,enumerable:!0}}),r}return i(t,e),t}(n("i99/"));e.exports=o},cV4H:function(e,t,n){"use strict";var r=n("TM7a");e.exports=function(e,t,i,o,s){o="number"==typeof o?o:3;var a=0,c=n("/+gY"),u={},l=c.getOrCreate(u);return function n(){return t(i).then(function(t){return(i.audio?r(l,t,s).catch(function(t){return e.warn("Encountered an error while detecting silence",t),!0}):Promise.resolve(!1)).then(function(r){return r?o<=0?(e.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),t):(e.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++a+"."),t.getTracks().forEach(function(e){return e.stop()}),o--,n()):(e.info("Got a non-silent audio MediaStreamTrack; returning it."),t)})})}().then(function(e){return c.release(u),e},function(e){throw c.release(u),e})}},cmf6:function(e,t){var n=function(){},r="undefined",i=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"];function s(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(e){return"debug"===e&&(e="log"),typeof console!==r&&("trace"===e&&i?a:void 0!==console[e]?s(console,e):void 0!==console.log?s(console,"log"):n)}function u(e,t){for(var r=0;r<o.length;r++){var i=o[r];this[i]=r<e?n:this.methodFactory(i,e,t)}this.log=this.debug}function l(e,t,n){return function(){typeof console!==r&&(u.call(this,t,n),this[e].apply(this,arguments))}}function d(e,t,n){return c(e)||l.apply(this,arguments)}function h(e,t,n){var i,s=this,a="loglevel";function c(){var e;if(typeof window!==r&&a){try{e=window.localStorage[a]}catch(i){}if(typeof e===r)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(a)+"=");-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(i){}return void 0===s.levels[e]&&(e=void 0),e}}"string"==typeof e?a+=":"+e:"symbol"==typeof e&&(a=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=n||d,s.getLevel=function(){return i},s.setLevel=function(t,n){if("string"==typeof t&&void 0!==s.levels[t.toUpperCase()]&&(t=s.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(i=t,!1!==n&&function(e){var t=(o[e]||"silent").toUpperCase();if(typeof window!==r&&a){try{return void(window.localStorage[a]=t)}catch(n){}try{window.document.cookie=encodeURIComponent(a)+"="+t+";"}catch(n){}}}(t),u.call(s,t,e),typeof console===r&&t<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){c()||s.setLevel(e,!1)},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var l=c();null==l&&(l=null==t?"WARN":t),s.setLevel(l,!1)}var p=new h,f={};p.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new h(e,p.getLevel(),p.methodFactory)),t};var m=typeof window!==r?window.log:void 0;p.noConflict=function(){return typeof window!==r&&window.log===p&&(window.log=m),p},p.getLoggers=function(){return f},p.default=p,e.exports=p},"d+6x":function(e,t,n){"use strict";var r=function(){function e(e,t){var n=this,r=(t=Object.assign({navigator:navigator,window:window},t)).navigator,i=r.connection||{type:null},o=i.type,s=i.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var t=o!==n.type&&n.isOnline;o=n.type,t&&e()}},_target:{value:i}}:{_events:{value:["online"]},_listener:{value:e},_target:{value:t.window}};Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return"boolean"!=typeof r.onLine||r.onLine}},type:{enumerable:!0,get:function(){return i.type||null}},_listener:s._listener,_events:s._events,_target:s._target})}return e.prototype.start=function(){var e=this;this._events.forEach(function(t){e._target.addEventListener(t,e._listener)})},e.prototype.stop=function(){var e=this;this._events.forEach(function(t){e._target.removeEventListener(t,e._listener)})},e}();e.exports=r},d6fC:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=n("Czg6"),c=n("2h1k"),u=c.RTCIceCandidate,l=c.RTCPeerConnection,d=c.RTCSessionDescription,h=c.getStats,p=n("BWbm"),f=n("xwWy"),m=f.DEFAULT_ICE_GATHERING_TIMEOUT_MS,v=f.DEFAULT_LOG_LEVEL,g=f.DEFAULT_SESSION_TIMEOUT_SEC,y=f.iceRestartBackoffConfig,_=n("9dY8"),b=_.addOrRewriteNewTrackIds,w=_.addOrRewriteTrackIds,k=_.createCodecMapForMediaSection,S=_.disableRtx,T=_.enableDtxForOpus,C=_.filterLocalCodecs,O=_.getMediaSections,E=_.removeSSRCAttributes,P=_.revertSimulcast,x=_.setCodecPreferences,R=_.setSimulcast,j=n("Y1/N"),A=n("5wwa"),L=A.MediaClientLocalDescFailedError,I=A.MediaClientRemoteDescFailedError,D=n("ghd6"),M=D.buildLogLevels,N=D.getPlatform,V=D.isChromeScreenShareTrack,U=D.oncePerTick,F=D.defer,H=n("uqca"),B=n("T5BQ"),W=n("lBno"),z=n("7bK7"),q=n("gEVb"),$=n("S3Hu"),G=n("tC0a"),Q=n("ROvb"),K=p.guessBrowser(),Y=N(),J=/android/.test(Y),Z="chrome"===K,X="firefox"===K,ee="safari"===K,te=0,ne={open:["closed","updating"],updating:["closed","open"],closed:[]},re=function(e){function t(t,n,r,i){var o=e.call(this,"open",ne)||this,s=ae(i=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:V,iceServers:[],logLevel:v,offerOptions:{},revertSimulcast:P,sessionTimeout:1e3*g,setCodecPreferences:x,setSimulcast:R,Backoff:a,IceConnectionMonitor:B,RTCIceCandidate:u,RTCPeerConnection:l,RTCSessionDescription:d,Timeout:j},i)),c=M(i.logLevel),h=i.RTCPeerConnection;!0===i.enableDscp&&(i.chromeSpecificConstraints=i.chromeSpecificConstraints||{},i.chromeSpecificConstraints.optional=i.chromeSpecificConstraints.optional||[],i.chromeSpecificConstraints.optional.push({googDscp:!0}));var p=i.log?i.log.createLog("webrtc",o):new $("webrtc",o,c,i.loggerName),f=new h(s,i.chromeSpecificConstraints);i.dummyAudioMediaStreamTrack&&f.addTrack(i.dummyAudioMediaStreamTrack),Object.defineProperties(o,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:i.enableDscp},_encodingParameters:{value:n},_isChromeScreenShareTrack:{value:i.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new i.Timeout(function(){return o._handleIceGatheringTimeout()},m,!1)},_iceRestartBackoff:{value:i.Backoff.exponential(y)},_instanceId:{value:++te},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:p},_eventObserver:{value:i.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new i.IceConnectionMonitor(f)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:i.offerOptions},_onEncodingParametersChanged:{value:U(function(){o._needsAnswer||le(o)})},_peerConnection:{value:f},_preferredAudioCodecs:{value:r.audio},_preferredVideoCodecs:{value:r.video},_shouldApplyDtx:{value:r.audio.every(function(e){return"opus"!==e.codec})||r.audio.some(function(e){return"opus"===e.codec&&e.dtx})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new i.Timeout(function(){p.debug("ICE reconnect timed out"),o.close()},i.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new H},_setCodecPreferences:{value:X&&J&&r.video[0]&&"h264"!==r.video[0].codec.toLowerCase()?function(e){return e}:i.setCodecPreferences},_setSimulcast:{value:i.setSimulcast},_revertSimulcast:{value:i.revertSimulcast},_RTCIceCandidate:{value:i.RTCIceCandidate},_RTCPeerConnection:{value:i.RTCPeerConnection},_RTCSessionDescription:{value:i.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:t}}),n.on("changed",o._onEncodingParametersChanged),f.addEventListener("connectionstatechange",o._handleConnectionStateChange.bind(o)),f.addEventListener("datachannel",o._handleDataChannelEvent.bind(o)),f.addEventListener("icecandidate",o._handleIceCandidateEvent.bind(o)),f.addEventListener("iceconnectionstatechange",o._handleIceConnectionStateChange.bind(o)),f.addEventListener("icegatheringstatechange",o._handleIceGatheringStateChange.bind(o)),f.addEventListener("signalingstatechange",o._handleSignalingStateChange.bind(o)),f.addEventListener("track",o._handleTrackEvent.bind(o)),o._iceRestartBackoff.on("ready",function(){return o._initiateIceRestart()});var _=o;return o.on("stateChanged",function e(t){"closed"===t&&(_.removeListener("stateChanged",e),_._dataChannels.forEach(function(e,t){_.removeDataTrackSender(t)}))}),o}return i(t,e),t.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},t.prototype.setEffectiveAdaptiveSimulcast=function(e){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",e),this._preferredVideoCodecs.forEach(function(t){"adaptiveSimulcast"in t&&(t.adaptiveSimulcast=e)})},Object.defineProperty(t.prototype,"_shouldApplySimulcast",{get:function(){return!(!Z&&!ee)&&this._preferredVideoCodecs.some(function(e){return"vp8"===e.codec.toLowerCase()&&e.simulcast&&!1!==e.adaptiveSimulcast})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){return"failed"===this.iceConnectionState?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&"disconnected"===this._peerConnection.iceConnectionState||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isApplicationSectionNegotiated",{get:function(){return"closed"===this._peerConnection.signalingState||!!this._peerConnection.localDescription&&O(this._peerConnection.localDescription.sdp,"application").length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var e=this._preferredVideoCodecs.find(function(e){return"adaptiveSimulcast"in e});return e&&!0===e.adaptiveSimulcast},enumerable:!1,configurable:!0}),t.prototype._maybeUpdateEncodings=function(e,t,n){if(void 0===n&&(n=!1),"video"!==e.kind)return!1;var r=p.guessBrowser();return!!("safari"===r||"chrome"===r&&this._isAdaptiveSimulcastEnabled)&&(this._updateEncodings(e,t,n),!0)},t.prototype._updateEncodings=function(e,t,n){if(this._isChromeScreenShareTrack(e)){var r=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];t.forEach(function(e,t){var i=r[t];i?(e.scaleResolutionDownBy=i.scaleResolutionDownBy,n&&delete e.active):(e.active=!1,delete e.scaleResolutionDownBy)})}else{var i=e.getSettings(),o=i.width*i.height,s=[{pixels:518400,maxActiveLayers:3},{pixels:129600,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}].find(function(e){return o>=e.pixels}),a=Math.min(t.length,s.maxActiveLayers);t.forEach(function(e,t){t<a?(e.scaleResolutionDownBy=1<<a-t-1,n&&(e.active=!0)):(e.active=!1,delete e.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",t.map(function(e,t){return"["+t+": "+e.active+", "+(e.scaleResolutionDownBy||0)+"]"}).join(", "))},t.prototype._addIceCandidate=function(e){var t=this;return Promise.resolve().then(function(){return e=new t._RTCIceCandidate(e),t._peerConnection.addIceCandidate(e)}).catch(function(n){t._log.warn("Failed to add RTCIceCandidate "+(e?'"'+e.candidate+'"':"null")+": "+n.message)})},t.prototype._addIceCandidates=function(e){return Promise.all(e.map(this._addIceCandidate,this)).then(function(){})},t.prototype._addOrUpdateTransceiver=function(e){var t=this,n=function(e,t){var n={audio:e._preferredAudioCodecs.map(function(e){return e.codec.toLowerCase()}),video:e._preferredVideoCodecs.map(function(e){return e.codec.toLowerCase()})}[t],r=e._recycledTransceivers[t],i=n.find(function(t){return e._localCodecs.has(t)});if(!i)return r.shift();var o=r.find(function(t){var n=e._remoteCodecMaps.get(t.mid);return n&&n.has(i)});return o&&r.splice(r.indexOf(o),1),o}(this,e.kind);if(n&&n.sender){var r=n.sender.track?n.sender.track.id:null;return r&&this._log.warn("Reusing transceiver: "+n.mid+"] "+r+" => "+e.id),this._replaceTrackPromises.set(n,n.sender.replaceTrack(e).then(function(){n.direction="sendrecv"},function(){}).finally(function(){t._replaceTrackPromises.delete(n)})),n}return this._peerConnection.addTransceiver(e)},t.prototype._checkIceBox=function(e){var t=se(e);if(!t)return Promise.resolve();var n=this._remoteCandidates.setUfrag(t);return this._addIceCandidates(n)},t.prototype._answer=function(e){var t=this;return Promise.resolve().then(function(){return t._negotiationRole||(t._negotiationRole="answerer"),t._setRemoteDescription(e)}).catch(function(){throw new I}).then(function(){return t._peerConnection.createAnswer()}).then(function(n){n=X?new t._RTCSessionDescription({sdp:S(n.sdp),type:n.type}):Q(n);var r=E(n.sdp,["mslabel","label"]);if(t._shouldApplySimulcast){var i=r;r=t._setSimulcast(i,t._trackIdsToAttributes),r=t._revertSimulcast(r,i,e.sdp)}return r=r.replace(/42e015/g,"42e01f"),t._setLocalDescription({type:n.type,sdp:r})}).then(function(){return t._checkIceBox(e)}).then(function(){return t._queuedDescription&&t._updateDescription(t._queuedDescription)}).then(function(){return t._queuedDescription=null,t._maybeReoffer(t._peerConnection.localDescription)}).catch(function(e){var n=e instanceof I?e:new L;throw t._publishMediaWarning({message:"Failed to _answer",code:n.code,error:e}),n})},t.prototype._close=function(){return this._iceConnectionMonitor.stop(),"closed"!==this._peerConnection.signalingState&&(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0)},t.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},t.prototype._handleDataChannelEvent=function(e){var t=this,n=e.channel,r=new W(n);this._dataTrackReceivers.add(r),n.addEventListener("close",function(){t._dataTrackReceivers.delete(r)}),this.emit("trackAdded",r)},t.prototype._handleGlare=function(e){var t=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return t._trackIdsToAttributes=new Map(t._appliedTrackIdsToAttributes),t._setLocalDescription({type:"rollback"})}).then(function(){return t._needsAnswer=!1,t._answer(e)}).then(function(e){return e?Promise.resolve():t._offer()})},t.prototype._publishMediaWarning=function(e){this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:e.message,code:e.code,context:JSON.stringify({error:e.error.message,sdp:e.sdp})}})},t.prototype._handleIceCandidateEvent=function(e){e.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(e.candidate));var t={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};e.candidate||(t.ice.complete=!0),this._isIceLite&&e.candidate||(t.ice.revision=this._localCandidatesRevision++,this.emit("candidates",t))},t.prototype._handleIceConnectionStateChange=function(){var e=this,t=this._peerConnection.iceConnectionState,n=["connected","completed"].includes(t),r=this._log;r.debug('ICE connection state is "'+t+'"'),n&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),"failed"===this._lastIceConnectionState||"failed"!==t||this._shouldRestartIce||this._isRestartingIce?["disconnected","failed"].includes(this._lastIceConnectionState)&&n&&r.debug("ICE reconnected"):(r.warn("ICE failed"),this._initiateIceRestartBackoff()),"connected"===t?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){e._iceConnectionMonitor.stop(),e._shouldRestartIce||e._isRestartingIce||(r.warn("ICE Connection Monitor detected inactivity"),e._isIceConnectionInactive=!0,e._initiateIceRestartBackoff(),e.emit("iceConnectionStateChanged"),e.emit("connectionStateChanged"))})):["disconnected","completed"].includes(t)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=t,this.emit("iceConnectionStateChanged")},t.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},t.prototype._handleIceGatheringStateChange=function(){var e=this._peerConnection.iceGatheringState,t=this._log;t.debug('ICE gathering state is "'+e+'"');var n=this._iceGatheringTimeout;"gathering"!==e||this._didGenerateLocalCandidates||n.isSet||(t.debug("Starting ICE gathering timeout: "+n.delay),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},t.prototype._handleSignalingStateChange=function(){"stable"===this._peerConnection.signalingState&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},t.prototype._handleTrackEvent=function(e){var t=this,n=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new G,this._trackMatcher.update(n);var r=e.track,i=this._trackMatcher.match(e)||r.id,o=new z(i,r);this._mediaTrackReceivers.forEach(function(e){e.track.id===o.track.id&&t._mediaTrackReceivers.delete(e)}),this._mediaTrackReceivers.add(o),r.addEventListener("ended",function(){return t._mediaTrackReceivers.delete(o)}),this.emit("trackAdded",o)},t.prototype._initiateIceRestart=function(){if("closed"!==this._peerConnection.signalingState){var e=this._log;e.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var t=this._iceReconnectTimeout;t.isSet||(e.debug("Starting ICE reconnect timeout: "+t.delay),this._iceReconnectTimeout.start()),this.offer().catch(function(t){e.error("offer failed in _initiateIceRestart with: "+t.message)})}},t.prototype._initiateIceRestartBackoff=function(){"closed"===this._peerConnection.signalingState||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff())},t.prototype._maybeReoffer=function(e){var t=this._shouldOffer;if(e&&e.sdp){var n=this._peerConnection.getSenders().filter(function(e){return e.track});t=["audio","video"].reduce(function(t,r){var i=O(e.sdp,r,"(sendrecv|sendonly)"),o=n.filter(ce.bind(null,r));return t||i.length<o.length},t);var r=this._dataChannels.size>0,i=O(e.sdp,"application").length>0;t=t||r&&!i}return(t?this._offer():Promise.resolve()).then(function(){return t})},t.prototype._offer=function(){var e=this,t=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,t.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return e._peerConnection.createOffer(t)}).catch(function(t){var n=new L;throw e._publishMediaWarning({message:"Failed to create offer",code:n.code,error:t}),n}).then(function(t){t=X?new e._RTCSessionDescription({sdp:S(t.sdp),type:t.type}):Q(t);var n=E(t.sdp,["mslabel","label"]);n=e._peerConnection.remoteDescription?C(n,e._peerConnection.remoteDescription.sdp):n;var r=e._setCodecPreferences(n,e._preferredAudioCodecs,e._preferredVideoCodecs);return e._shouldOffer=!1,e._negotiationRole||(e._negotiationRole="offerer"),e._shouldApplySimulcast&&(e._localDescriptionWithoutSimulcast={type:"offer",sdp:r},r=e._setSimulcast(r,e._trackIdsToAttributes)),e._setLocalDescription({type:"offer",sdp:r})})},t.prototype._getMediaTrackSenderId=function(e){var t=Array.from(this._rtpSenders.keys()).find(function(t){return t.track.id===e});return t?t.id:e},t.prototype._addOrRewriteLocalTrackIds=function(e){var t=this,n=this._peerConnection.getTransceivers().filter(function(e){var t=e.sender;return!e.stopped&&t&&t.track}),r=n.filter(function(e){return e.mid}),i=new Map(r.map(function(e){return[e.mid,t._getMediaTrackSenderId(e.sender.track.id)]})),o=w(e.sdp,i),s=n.filter(function(e){return!e.mid}),a=new Map(["audio","video"].map(function(e){return[e,s.filter(function(t){return t.sender.track.kind===e}).map(function(e){return t._getMediaTrackSenderId(e.sender.track.id)})]})),c=b(o,i,a);return new this._RTCSessionDescription({sdp:c,type:e.type})},t.prototype._rollbackAndApplyOffer=function(e){var t=this;return this._setLocalDescription({type:"rollback"}).then(function(){return t._setLocalDescription(e)})},t.prototype._setLocalDescription=function(e){var t=this;return"rollback"!==e.type&&this._shouldApplyDtx&&(e=new this._RTCSessionDescription({sdp:T(e.sdp),type:e.type})),this._peerConnection.setLocalDescription(e).catch(function(n){t._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+e.type+'" failed with the error "'+n.message+'".',n);var r=new L,i={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+e.type+'" failed',code:r.code,error:n};throw e.sdp&&(t._log.warn("The SDP was "+e.sdp),i.sdp=e.sdp),t._publishMediaWarning(i),r}).then(function(){"rollback"!==e.type&&(t._localDescription=t._addOrRewriteLocalTrackIds(e),t._shouldApplyDtx&&(t._localDescription=new t._RTCSessionDescription({sdp:T(t._localDescription.sdp,[]),type:t._localDescription.type})),t._localCandidates=[],"offer"===e.type?t._descriptionRevision++:"answer"===e.type&&(t._lastStableDescriptionRevision=t._descriptionRevision,ue(t)),t._localUfrag=se(e),t.emit("description",t.getState()))})},t.prototype._setRemoteDescription=function(e){var t=this;return e.sdp&&(e.sdp=this._setCodecPreferences(e.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),e.sdp=this._shouldApplyDtx?T(e.sdp):T(e.sdp,[]),X&&(e.sdp=e.sdp.replace(/a=msid:[^ ]+ /g,"a=msid:- ")),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(e.sdp))),e=new this._RTCSessionDescription(e),Promise.resolve().then(function(){if("answer"===e.type&&t._localDescriptionWithoutSimulcast){var n=t._preferredVideoCodecs.find(function(e){return"adaptiveSimulcast"in e}),r=t._revertSimulcast(t._localDescription.sdp,t._localDescriptionWithoutSimulcast.sdp,e.sdp,!!n&&!1===n.adaptiveSimulcast);if(t._localDescriptionWithoutSimulcast=null,r!==t._localDescription.sdp)return t._rollbackAndApplyOffer({type:t._localDescription.type,sdp:r})}}).then(function(){return t._peerConnection.setRemoteDescription(e)}).then(function(){"answer"===e.type&&(t._isRestartingIce&&(t._log.debug("An ICE restart was in-progress and is now completed"),t._isRestartingIce=!1),ue(t))},function(n){throw t._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+e.type+'" failed with the error "'+n.message+'".',n),e.sdp&&t._log.warn("The SDP was "+e.sdp),n})},t.prototype._updateDescription=function(e){var t=this;switch(e.type){case"answer":case"pranswer":if(e.revision!==this._descriptionRevision||"have-local-offer"!==this._peerConnection.signalingState)return Promise.resolve();this._descriptionRevision=e.revision;break;case"close":return this._close();case"create-offer":return e.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=e,Promise.resolve()):(this._descriptionRevision=e.revision,this._offer());case"offer":return e.revision<=this._lastStableDescriptionRevision||"closed"===this._peerConnection.signalingState?Promise.resolve():"have-local-offer"===this._peerConnection.signalingState?this._needsAnswer&&0===this._lastStableDescriptionRevision?(this._queuedDescription=e,Promise.resolve()):(this._descriptionRevision=e.revision,this._handleGlare(e)):(this._descriptionRevision=e.revision,this._answer(e).then(function(){}))}var n=e.revision;return Promise.resolve().then(function(){return t._setRemoteDescription(e)}).catch(function(n){var r=new I;throw t._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+e.type+'" failed',code:r.code,error:n,sdp:e.sdp}),r}).then(function(){return t._lastStableDescriptionRevision=n,t._needsAnswer=!1,t._checkIceBox(e)}).then(function(){return t._queuedDescription&&t._updateDescription(t._queuedDescription)}).then(function(){return t._queuedDescription=null,t._maybeReoffer(t._peerConnection.localDescription).then(function(){})})},t.prototype._updateIce=function(e){var t=this._remoteCandidates.update(e);return this._addIceCandidates(t)},t.prototype.addDataTrackSender=function(e){if(!this._dataChannels.has(e))try{var t={ordered:e.ordered};null!==e.maxPacketLifeTime&&(t.maxPacketLifeTime=e.maxPacketLifeTime),null!==e.maxRetransmits&&(t.maxRetransmits=e.maxRetransmits);var n=this._peerConnection.createDataChannel(e.id,t);e.addDataChannel(n),this._dataChannels.set(e,n)}catch(r){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+e.id+'": '+r.message)}},t.prototype._handleQueuedPublisherHints=function(){var e=this;"stable"===this._peerConnection.signalingState&&this._mediaTrackSenderToPublisherHints.forEach(function(t,n){var r=t.deferred,i=t.encodings;e._mediaTrackSenderToPublisherHints.delete(n),e._setPublisherHint(n,i).then(function(e){return r.resolve(e)}).catch(function(e){return r.reject(e)})})},t.prototype._setPublisherHint=function(e,t){var n=this;if(X)return Promise.resolve("COULD_NOT_APPLY_HINT");this._mediaTrackSenderToPublisherHints.has(e)&&(this._mediaTrackSenderToPublisherHints.get(e).deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(e));var r=this._rtpSenders.get(e);if(!r)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if("closed"===this._peerConnection.signalingState)return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if("stable"!==this._peerConnection.signalingState){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var i=F();return this._mediaTrackSenderToPublisherHints.set(e,{deferred:i,encodings:t}),i.promise}var o=r.getParameters();return null!==t&&t.forEach(function(e){var t=e.enabled,r=e.layer_index;o.encodings.length>r?(n._log.debug("layer:"+r+", active:"+o.encodings[r].active+" => "+t),o.encodings[r].active=t):n._log.warn("invalid layer:"+r+", active:"+t)}),this._maybeUpdateEncodings(r.track,o.encodings,null===t),r.setParameters(o).then(function(){return"OK"}).catch(function(e){return n._log.error("Failed to apply publisher hints:",e),"COULD_NOT_APPLY_HINT"})},t.prototype.addMediaTrackSender=function(e){var t=this;if("closed"!==this._peerConnection.signalingState&&!this._rtpSenders.has(e)){var n=this._addOrUpdateTransceiver(e.track).sender;e.addSender(n,function(n){return t._setPublisherHint(e,n)}),this._rtpNewSenders.add(n),this._rtpSenders.set(e,n)}},t.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},t.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},t.prototype.getState=function(){if(!this._localDescription)return null;var e={type:this._localDescription.type,revision:"answer"===this._localDescription.type?this._lastStableDescriptionRevision:this._descriptionRevision};return this._localDescription.sdp&&(e.sdp=this._localDescription.sdp),{description:e,id:this.id}},t.prototype.offer=function(){var e=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(t){return e.transition("updating",t),(e._needsAnswer||e._isRestartingIce?Promise.resolve():e._offer()).then(function(){e.tryTransition("open",t)},function(n){throw e.tryTransition("open",t),n})})},t.prototype.removeDataTrackSender=function(e){var t=this._dataChannels.get(e);t&&(e.removeDataChannel(t),this._dataChannels.delete(e),t.close())},t.prototype.removeMediaTrackSender=function(e){var t=this._rtpSenders.get(e);t&&("closed"!==this._peerConnection.signalingState&&this._peerConnection.removeTrack(t),e.removeSender(t),this._mediaTrackSenderToPublisherHints.has(e)&&(this._mediaTrackSenderToPublisherHints.get(e).deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(e)),this._rtpNewSenders.delete(t),this._rtpSenders.delete(e))},t.prototype.setConfiguration=function(e){"function"==typeof this._peerConnection.setConfiguration&&this._peerConnection.setConfiguration(ae(e))},t.prototype.setIceReconnectTimeout=function(e){return this._iceReconnectTimeout.setDelay(e),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},t.prototype.update=function(e){var t=this;return this.bracket("updating",function(n){if("closed"===t.state)return Promise.resolve();t.transition("updating",n);var r=[];return e.ice&&r.push(t._updateIce(e.ice)),e.description&&r.push(t._updateDescription(e.description)),Promise.all(r).then(function(){t.tryTransition("open",n)},function(e){throw t.tryTransition("open",n),e})})},t.prototype.getStats=function(){var e=this;return h(this._peerConnection).then(function(t){return function(e,t){return Object.assign(t,{remoteAudioTrackStats:t.remoteAudioTrackStats.map(function(t){return oe(e,t)}),remoteVideoTrackStats:t.remoteVideoTrackStats.map(function(t){return oe(e,t)}),localAudioTrackStats:t.localAudioTrackStats.map(function(t){return ie(e,t)}),localVideoTrackStats:t.localVideoTrackStats.map(function(t){return ie(e,t)})})}(e,t)})},t}(q);function ie(e,t){var n=e._getMediaTrackSenderId(t.trackId);return Object.assign(t,{trackId:n})}function oe(e,t){var n=s([],o(e._mediaTrackReceivers)).find(function(e){return e.track.id===t.trackId});return Object.assign(t,{trackId:n?n.id:null})}function se(e){if(e.sdp){var t=e.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(t)return t[1]}return null}function ae(e){return Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},e)}function ce(e,t){var n=t.track;return n&&n.kind===e&&"ended"!==n.readyState}function ue(e){!function(e){e._recycledTransceivers.audio=[],e._recycledTransceivers.video=[],e._peerConnection.getTransceivers().forEach(function(t){(function(e,t){return!e.stopped&&!t._replaceTrackPromises.has(e)&&["inactive","recvonly"].includes(e.direction)})(t,e)&&e._recycledTransceivers[t.receiver.track.kind].push(t)})}(e),function(e){var t=e._peerConnection.localDescription;t&&t.sdp&&O(t.sdp).forEach(function(t){k(t).forEach(function(t,n){return e._localCodecs.add(n)})})}(e),function(e){var t=e._peerConnection.remoteDescription;t&&t.sdp&&O(t.sdp).forEach(function(t){var n=t.match(/^a=mid:(.+)$/m);if(n&&n[1]){var r=n[1],i=k(t);e._remoteCodecMaps.set(r,i)}})}(e),le(e).then(function(){e._handleQueuedPublisherHints()})}function le(e){var t=e._encodingParameters,n=new Map([["audio",t.maxAudioBitrate],["video",t.maxVideoBitrate]]),r=[];return e._peerConnection.getSenders().filter(function(e){return e.track}).forEach(function(t){var i=n.get(t.track.kind),o=t.getParameters();null===i||0===i?function(e){Array.isArray(e.encodings)&&e.encodings.forEach(function(e){return delete e.maxBitrate})}(o):e._isChromeScreenShareTrack(t.track)?e._log.warn("Not setting maxBitrate for "+t.track.kind+" Track "+t.track.id+" because it appears to be screen share track: "+t.track.label):function(e,t){X?e.encodings=[{maxBitrate:t}]:e.encodings.forEach(function(e){e.maxBitrate=t})}(o,i),!X&&e._enableDscp&&o.encodings.length>0&&(o.encodings[0].networkPriority="high");var s=e._rtpNewSenders.has(t);e._maybeUpdateEncodings(t.track,o.encodings,s),e._rtpNewSenders.delete(t);var a=t.setParameters(o).catch(function(n){e._log.warn("Error while setting encodings parameters for "+t.track.kind+" Track "+t.track.id+": "+(n.message||n.name))});r.push(a)}),Promise.all(r)}e.exports=re},d75R:function(e,t,n){var r=n("MCLT");function i(e){Error.call(this,e),this.message=e}function o(e){Error.call(this,e),this.message=e}r.inherits(i,Error),i.prototype.name="IllegalArgumentError",r.inherits(o,Error),o.prototype.name="IllegalStateError",e.exports.IllegalStateError=o,e.exports.IllegalArgumentError=i},"dI/0":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(){function e(e){Object.defineProperties(this,{_callback:{value:e}})}return e.prototype.observe=function(){},e.prototype.unobserve=function(){},e.prototype.makeVisible=function(e){var t=this._makeFakeEntry(e,!0);this._callback([t])},e.prototype.makeInvisible=function(e){var t=this._makeFakeEntry(e,!1);this._callback([t])},e.prototype._makeFakeEntry=function(e,t){return{target:e,isIntersecting:t}},e}(),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(o),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.resize=function(e){var t=this._makeFakeEntry(e,!0);this._callback([t])},t}(o);e.exports={NullIntersectionObserver:s,NullResizeObserver:a,NullObserver:o}},deyy:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return i(t,e),t.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(n("mb7l"));e.exports=o},eqpY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTurnCredentials=void 0;var r=n("FjKE"),i=n("xwWy").ICE_VERSION,o=n("5wwa"),s=o.createTwilioError,a=o.SignalingConnectionError,c=n("+qE3");t.getTurnCredentials=function(e,t){return new Promise(function(n,o){var u=new c.EventEmitter,l=new r(t,{networkMonitor:null,eventObserver:u,helloBody:{edge:"roaming",preflight:!0,token:e,type:"ice",version:i}}),d=!1;l.once("close",function(){d||(d=!0,o(new a))}),l.on("message",function(e){var t=e.code,r=e.message,i=e.type;"iced"!==i&&"error"!==i||d||(d=!0,"iced"===i?n(e.ice_servers):o(s(t,r)),l.close())})})}},gBrb:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return Object.defineProperties(t,{_revision:{value:1,writable:!0}}),t}return i(t,e),t.prototype.update=function(e){return e.revision<this._revision?this:(this._revision=e.revision,this.enable(e.is_recording))},t}(n("wl3V"));e.exports=o},gEVb:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=n("+qE3").EventEmitter,c=n("ghd6"),u=function(e){function t(t,n){var r,i=e.call(this)||this,o=null,s=t;return n=function(e){var t=new Map;for(var n in e)t.set(n,new Set(e[n]));return t}(n),Object.defineProperties(i,{_lock:{get:function(){return o},set:function(e){o=e}},_reachableStates:{value:(r=n,Array.from(r.keys()).reduce(function(e,t){return e.set(t,d(r,t))},new Map))},_state:{get:function(){return s},set:function(e){s=e}},_states:{value:n},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return null!==o}},state:{enumerable:!0,get:function(){return s}}}),i.on("stateChanged",function(e){i._whenDeferreds.forEach(function(t){t.when(e,t.resolve,t.reject)})}),i}return i(t,e),t.prototype._whenPromise=function(e){var t=this;if("function"!=typeof e)return Promise.reject(new Error("when() executor must be a function"));var n=c.defer();return n.when=e,this._whenDeferreds.add(n),n.promise.then(function(e){return t._whenDeferreds.delete(n),e},function(e){throw t._whenDeferreds.delete(n),e})},t.prototype.bracket=function(e,t){var n,r=this;function i(e){if(r.hasLock(n)&&r.releaseLockCompletely(n),e)throw e}return this.takeLock(e).then(function(e){return t(n=e)}).then(function(e){return i(),e},i)},t.prototype.hasLock=function(e){return this._lock===e},t.prototype.preempt=function(e,t,n){if(!l(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');var r;this.isLocked&&(r=this._lock,this._lock=null);var i=null;t&&(i=this.takeLockSync(t));var o=i?null:this.takeLockSync("preemption");return this.transition(e,i||o,n),r&&r.resolve(),o&&this.releaseLock(o),i},t.prototype.releaseLock=function(e){if(!this.isLocked)throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock");0===e.depth?(this._lock=null,e.resolve()):e.depth--},t.prototype.releaseLockCompletely=function(e){if(!this.isLocked)throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock");e.depth=0,this._lock=null,e.resolve()},t.prototype.takeLock=function(e){var t=this;if("object"==typeof e){var n=e;return new Promise(function(e){e(t.takeLockSync(n))})}var r=e;if(this.isLocked){var i=this.takeLock.bind(this,r);return this._lock.promise.then(i)}return Promise.resolve(this.takeLockSync(r))},t.prototype.takeLockSync=function(e){var t="string"==typeof e?null:e,n=t?t.name:e;if(t&&!this.hasLock(t)||!t&&this.isLocked)throw new Error("Could not take the lock for "+n+" because the lock for "+this._lock.name+" was not released");if(t)return t.depth++,t;var r=function(e){var t=c.defer();return t.name=e,t.depth=0,t}(n);return this._lock=r,r},t.prototype.transition=function(e,t,n){if(n=n||[],this.isLocked){if(!t)throw new Error("You must provide the key in order to transition");if(!this.hasLock(t))throw new Error("Could not transition using the key for "+t.name+" because "+this._lock.name+" has the lock")}else if(t)throw new Error("Key provided for "+t.name+", but the StateMachine was not locked (possibly due to preemption)");if(!l(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');this._state=e,this.emit.apply(this,s([],o(["stateChanged",e].concat(n))))},t.prototype.tryTransition=function(e,t,n){try{this.transition(e,t,n)}catch(r){return!1}return!0},t.prototype.when=function(e){var t=this;return this.state===e?Promise.resolve(this):l(this._reachableStates,this.state,e)?this._whenPromise(function(n,r,i){n===e?r(t):l(t._reachableStates,n,e)||i(h(n,e))}):Promise.reject(h(this.state,e))},t}(a);function l(e,t,n){return e.get(t).has(n)}function d(e,t,n){return n=n||new Set,e.get(t).forEach(function(t){n.has(t)||(n.add(t),d(e,t,n).forEach(n.add,n))}),n}function h(e,t){return new Error('"'+t+'" cannot be reached from "'+e+'"')}e.exports=u},gJbR:function(e,t,n){"use strict";var r=n("MCLT").inherits,i=n("jU82");function o(e,t){var n=new i(e,t);return Object.setPrototypeOf(n,o.prototype),n}r(o,i),e.exports=o},ghd6:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=n("xwWy"),c=a.typeErrors,u=a.trackPriority,l=n("BWbm"),d=n("6kkQ").sessionSID;function h(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent:"Unknown"}function p(e,t,n,r){if(!(r in t)&&!r.match(/^on[a-z]+$/)){var i;try{i=typeof e[r]}catch(a){}"function"===i&&(t[r]=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this[n])[r].apply(e,s([],o(t)))})}}function f(e){return"object"==typeof e&&!Array.isArray(e)}function m(e){Object.getOwnPropertyNames(e).forEach(function(t){t.startsWith("_")&&v(e,t)})}function v(e,t){var n=Object.getOwnPropertyDescriptor(e,t);n.enumerable=!1,Object.defineProperty(e,t,n)}function g(e,t){void 0===t&&(t=[]),t.forEach(function(t){e.hasOwnProperty(t)&&v(e,t)})}function y(e){return e.map(_)}function _(e){return Array.isArray(e)?y(e):e instanceof Set?y(s([],o(e))):e instanceof Map?s([],o(e.entries())).reduce(function(e,t){var n,r=o(t,2);return Object.assign(((n={})[r[0]]=_(r[1]),n),e)},{}):e&&"object"==typeof e?Object.entries(e).reduce(function(e,t){var n,r=o(t,2);return Object.assign(((n={})[r[0]]=_(r[1]),n),e)},{}):e}function b(e){return S(e,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:k},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function w(e){return S(e,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function k(e){return S(e,[{prop:u.PRIORITY_HIGH,type:"object",transform:w},{prop:u.PRIORITY_LOW,type:"object",transform:w},{prop:u.PRIORITY_STANDARD,type:"object",transform:w}])}function S(e,t){return t.reduce(function(t,n){var r,i=n.prop,o=n.payloadProp,s=n.transform;return typeof e[i]===n.type?Object.assign(((r={})[void 0===o?i:o]=(void 0===s?function(e){return e}:s)(e[i]),r),t):t},{})}t.constants=a,t.createBandwidthProfilePayload=function(e){return S(e,[{prop:"video",type:"object",transform:b}])},t.createMediaSignalingPayload=function(e,t,n,r,i,o){var s={transports:[{type:"data-channel"}]};return Object.assign(e?{active_speaker:s}:{},t?{network_quality:s}:{},o?{render_hints:s}:{},i?{publisher_hints:s}:{},n?{track_priority:s}:{},r?{track_switch_off:s}:{})},t.createRoomConnectEventPayload=function(e){function t(e){return e?"true":"false"}var n={sessionSID:d,iceServers:(e.iceServers||[]).length,audioTracks:(e.tracks||[]).filter(function(e){return"audio"===e.kind}).length,videoTracks:(e.tracks||[]).filter(function(e){return"video"===e.kind}).length,dataTracks:(e.tracks||[]).filter(function(e){return"data"===e.kind}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(r){var i=o(r,2),s=i[0],a=i[1];n[a=a||s]=t(!!e[s])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(t){var r=o(t,2),i=r[0],s=r[1];s=s||i,"number"==typeof e[i]?n[s]=e[i]:isNaN(Number(e[i]))||(n[s]=Number(e[i]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(t){var r=o(t,2),i=r[0],s=r[1];s=s||i,"string"==typeof e[i]?n[s]=e[i]:"number"==typeof e[i]&&"name"===i&&(n[s]=e[i].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(t){t in e&&(n[t]=JSON.stringify(e[t]))}),"networkQuality"in e&&(n.networkQualityConfiguration={},f(e.networkQuality)?["local","remote"].forEach(function(t){"number"==typeof e.networkQuality[t]&&(n.networkQualityConfiguration[t]=e.networkQuality[t])}):(n.networkQualityConfiguration.remote=0,n.networkQualityConfiguration.local=e.networkQuality?1:0)),e.bandwidthProfile&&e.bandwidthProfile.video){var r=e.bandwidthProfile.video||{};n.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(e){"number"==typeof r[e]||"string"==typeof r[e]?n.bandwidthProfileOptions[e]=r[e]:"boolean"==typeof r[e]?n.bandwidthProfileOptions[e]=t(r[e]):"object"==typeof r[e]&&(n.bandwidthProfileOptions[e]=JSON.stringify(r[e]))})}return{group:"room",name:"connect",level:"info",payload:n}},t.createSubscribePayload=function(e){return{rules:[{type:e?"include":"exclude",all:!0}],revision:1}},t.asLocalTrack=function(e,t){if(e instanceof t.LocalAudioTrack||e instanceof t.LocalVideoTrack||e instanceof t.LocalDataTrack)return e;if(e instanceof t.MediaStreamTrack)return"audio"===e.kind?new t.LocalAudioTrack(e,t):new t.LocalVideoTrack(e,t);throw c.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")},t.asLocalTrackPublication=function(e,t,n,r){return new(0,{audio:r.LocalAudioTrackPublication,video:r.LocalVideoTrackPublication,data:r.LocalDataTrackPublication}[e.kind])(t,e,n,r)},t.capitalize=function(e){return e[0].toUpperCase()+e.slice(1)},t.deprecateEvents=function(e,t,n,r){var i=new Set;t.on("newListener",function o(s){n.has(s)&&!i.has(s)&&(r.deprecated(e+"#"+s+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+(n.get(s)?" Use "+e+"#"+n.get(s)+" instead.":"")),i.add(s)),i.size>=n.size&&t.removeListener("newListener",o)})},t.difference=function(e,t){e=Array.isArray(e)?new Set(e):new Set(e.values()),t=Array.isArray(t)?new Set(t):new Set(t.values());var n=new Set;return e.forEach(function(e){t.has(e)||n.add(e)}),n},t.filterObject=function(e,t){return Object.keys(e).reduce(function(n,r){return e[r]!==t&&(n[r]=e[r]),n},{})},t.flatMap=function(e,t){var n=e instanceof Map||e instanceof Set?Array.from(e.values()):e;return t=t||function(e){return e},n.reduce(function(e,n){var r=t(n);return e.concat(r)},[])},t.getPlatform=function(){var e=h(),t=o(e.match(/\(([^)]+)\)/)||[],2)[1];return o((void 0===t?"unknown":t).split(";").map(function(e){return e.trim()}),1)[0].toLowerCase()},t.getUserAgent=h,t.hidePrivateProperties=m,t.hidePrivateAndCertainPublicPropertiesInClass=function(e,t){return function(e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,s([],o(n)))||this;return m(i),g(i,t),i}return i(n,e),n}(e)},t.isDeepEqual=function e(t,n){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(null===t)return null===n;if(null===n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});if("object"==typeof t){var r=Object.keys(t).sort(),i=Object.keys(n).sort();return!Array.isArray(n)&&e(r,i)&&r.every(function(r){return e(t[r],n[r])})}return!1},t.isNonArrayObject=f,t.inRange=function(e,t,n){return t<=e&&e<=n},t.makeUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},t.oncePerTick=function(e){var t=null;function n(){t=null,e()}return function(){t&&clearTimeout(t),t=setTimeout(n)}},t.promiseFromEvents=function(e,t,n,r){return new Promise(function(i,a){function c(){var e=[].slice.call(arguments);r&&t.removeListener(r,u),i.apply(void 0,s([],o(e)))}function u(){var e=[].slice.call(arguments);t.removeListener(n,c),a.apply(void 0,s([],o(e)))}t.once(n,c),r&&t.once(r,u),e()})},t.getOrNull=function(e,t){return t.split(".").reduce(function(e,t){return e?e[t]:null},e)},t.defer=function(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e},t.delegateMethods=function(e,t,n){for(var r in e)p(e,t,n,r)},t.proxyProperties=function(e,t,n){Object.getOwnPropertyNames(e).forEach(function(e){!function(e,t,n,r){r in t||(r.match(/^on[a-z]+$/)?(Object.defineProperty(t,r,{value:null,writable:!0}),n.addEventListener(r.slice(2),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.dispatchEvent.apply(t,s([],o(e)))})):Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[r]}}))}(0,t,n,e)})},t.legacyPromise=function(e,t,n){return t?e.then(function(e){t(e)},function(e){n(e)}):e},t.buildLogLevels=function(e){return"string"==typeof e?{default:e,media:e,signaling:e,webrtc:e}:e},t.trackClass=function(e,t){return(t=t?"Local":"")+(e.kind||"").replace(/\w{1}/,function(e){return e.toUpperCase()})+"Track"},t.trackPublicationClass=function(e,t){return(t=t?"Local":"")+(e.kind||"").replace(/\w{1}/,function(e){return e.toUpperCase()})+"TrackPublication"},t.valueToJSON=_,t.withJitter=function(e,t){var n=Math.random();return e-t+Math.floor(2*t*n+.5)},t.isChromeScreenShareTrack=function(e){return"chrome"===l.guessBrowser()&&"video"===e.kind&&"displaySurface"in e.getSettings()},t.isUserMediaTrack=function(e){return"string"==typeof e.getSettings().deviceId},t.waitForSometime=function(e){return void 0===e&&(e=10),new Promise(function(t){return setTimeout(t,e)})},t.waitForEvent=function(e,t){return new Promise(function(n){e.addEventListener(t,function r(i){e.removeEventListener(t,r),n(i)})})}},hkYD:function(e,t,n){"use strict";var r=n("7C7v"),i=n("kltW");e.exports=function(e){var t=e.sendStats,n=void 0===t?null:t,o=e.recvStats,s=void 0===o?null:o;Object.defineProperties(this,{send:{value:e.send,enumerable:!0},recv:{value:e.recv,enumerable:!0},sendStats:{value:n?new r(n):null,enumerable:!0},recvStats:{value:s?new i(s):null,enumerable:!0}})}},"i99/":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return Object.defineProperties(r,{bytesReceived:{value:"number"==typeof n.bytesReceived?n.bytesReceived:null,enumerable:!0},packetsReceived:{value:"number"==typeof n.packetsReceived?n.packetsReceived:null,enumerable:!0}}),r}return i(t,e),t}(n("0iCT"));e.exports=o},iWhl:function(e,t,n){"use strict";var r=n("BWbm").flatMap,i=n("BWbm").guessBrowser,o=null,s=null;function a(e){return e&&function(){if("boolean"==typeof o)return o;if("undefined"==typeof RTCPeerConnection)return o=!1;try{new RTCPeerConnection({sdpSemantics:"foo"}),o=!1}catch(e){o=!0}return o}()?{"plan-b":"planb","unified-plan":"unified"}[e]:function(){if(!s)if("undefined"!=typeof RTCPeerConnection&&"addTransceiver"in RTCPeerConnection.prototype)try{(new RTCPeerConnection).addTransceiver("audio"),s="unified"}catch(e){s="planb"}else s="planb";return s}()}function c(e,t){return(t.match(new RegExp(e,"gm"))||[]).reduce(function(t,n){var r=n.match(new RegExp(e));return r?t.add(r[1]):t},new Set)}function u(e,t){return c(e,t)}function l(e){return u("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",e)}function d(e){return u("^a=msid:.+ +(.+) *$",e)}function h(e,t){return c("^a=ssrc:([0-9]+) +msid:[^ ]+ +"+t+" *$",e)}function p(e,t,n){return t=t||".*",n=n||".*",e.split("\r\nm=").slice(1).map(function(e){return"m="+e}).filter(function(e){var r=new RegExp("m="+t,"gm"),i=new RegExp("a="+n,"gm");return r.test(e)&&i.test(e)})}function f(e){return Array.from(c("^a=ssrc:([0-9]+) +.*$",e))}function m(e,t){var n=p(e),i=new RegExp("^a=msid:[^ ]+ +"+t+" *$","gm"),o=n.filter(function(e){return e.match(i)});return new Set(r(o,f))}function v(e,t,n){return new Map(Array.from(e(n)).map(function(e){return[e,t(n,e)]}))}function g(e){return v(l,h,e)}function y(e){return v(d,m,e)}function _(e,t,n){var r=e(n),i=new Map;r.forEach(function(e,r){if(t.has(r)){var o=Array.from(t.get(r)),s=Array.from(e);o.forEach(function(e,t){var r=s[t];i.set(r,e);var o="a=ssrc:"+e+" $1";n=n.replace(new RegExp("^a=ssrc:"+r+" (.*)$","gm"),o)})}else t.set(r,e)});var o="^(a=ssrc-group:[^ ]+ +)(.*)$";return(n.match(new RegExp(o,"gm"))||[]).forEach(function(e){var t=e.match(new RegExp(o));if(t){var r=t[1],s=t[2].split(" ").map(function(e){return i.get(e)||e}).join(" ");n=n.replace(t[0],r+s)}}),n}t.getSdpFormat=function(e){return{chrome:a(e),firefox:"unified",safari:"undefined"!=typeof RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}[i()]||null},t.getMediaSections=p,t.getPlanBTrackIds=l,t.getUnifiedPlanTrackIds=d,t.getPlanBSSRCs=h,t.getUnifiedPlanSSRCs=m,t.updatePlanBTrackIdsToSSRCs=function(e,t){return _(g,e,t)},t.updateUnifiedPlanTrackIdsToSSRCs=function(e,t){return _(y,e,t)}},iqXr:function(e){e.exports=JSON.parse('{"name":"twilio-video","title":"Twilio Video","description":"Twilio Video JavaScript Library","version":"2.21.0","homepage":"https://twilio.com","author":"Mark Andrus Roberts <mroberts@twilio.com>","contributors":["Ryan Rowland <rrowland@twilio.com>","Manjesh Malavalli <mmalavalli@twilio.com>","Makarand Patwardhan <mpatwardhan@twilio.com>"],"keywords":["twilio","webrtc","library","javascript","video","rooms"],"repository":{"type":"git","url":"https://github.com/twilio/twilio-video.js.git"},"devDependencies":{"@babel/core":"^7.14.2","@babel/preset-env":"^7.14.2","@babel/preset-typescript":"^7.13.0","@types/express":"^4.11.0","@types/node":"^8.5.1","@types/selenium-webdriver":"^3.0.8","@types/ws":"^3.2.1","@typescript-eslint/eslint-plugin":"^4.13.0","@typescript-eslint/parser":"^4.0.0","babel-cli":"^6.26.0","babel-preset-es2015":"^6.24.1","browserify":"^17.0.0","cheerio":"^0.22.0","cors":"^2.8.5","electron":"^9.1.0","envify":"^4.0.0","eslint":"^6.2.1","eslint-config-standard":"^14.0.0","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^9.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","express":"^4.16.2","glob":"^7.1.7","ink-docstrap":"^1.3.2","inquirer":"^7.0.0","is-docker":"^2.0.0","jsdoc":"^3.5.5","jsdoc-babel":"^0.5.0","json-loader":"^0.5.7","karma":"^5.0.2","karma-browserify":"^8.0.0","karma-chrome-launcher":"^2.0.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.3.0","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-spec-reporter":"0.0.32","karma-typescript":"^5.5.1","karma-typescript-es6-transform":"^5.5.1","mocha":"^3.2.0","mock-require":"^3.0.3","ncp":"^2.0.0","node-http-server":"^8.1.2","npm-run-all":"^4.0.2","nyc":"^15.1.0","requirejs":"^2.3.3","rimraf":"^2.6.1","simple-git":"^1.126.0","sinon":"^4.0.1","ts-node":"4.0.1","tslint":"5.8.0","twilio":"^3.49.0","twilio-release-tool":"^1.0.2","typescript":"4.2.2","uglify-js":"^2.8.22","vinyl-fs":"^2.4.4","vinyl-source-stream":"^1.1.0","watchify":"^3.11.1","webrtc-adapter":"^7.7.1"},"engines":{"node":">=0.12"},"license":"BSD-3-Clause","main":"./es5/index.js","types":"./tsdef/index.d.ts","scripts":{"lint:js":"eslint ./lib ./test/*.js ./docker/**/*.js ./test/framework/*.js ./test/lib/*.js ./test/integration/** ./test/unit/** ","lint:ts":"eslint ./tsdef/*.ts ./lib/**/*.ts","lint":"npm-run-all lint:js lint:ts","printVersion":"node --version && npm --version","test:unit":"npm-run-all printVersion build:es5 && nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov --reporter=text mocha -r ts-node/register ./test/unit/*","test:serversiderender":"mocha ./test/serversiderender/index.js","test:integration:adapter":"node ./scripts/karma.js karma/integration.adapter.conf.js","test:integration":"npm run build:es5 && node ./scripts/karma.js karma/integration.conf.js","test:umd:install":"npm install puppeteer@5.5.0","test:umd":"mocha ./test/umd/index.js","test:crossbrowser:build:clean":"rimraf ./test/crossbrowser/lib ./test/crossbrowser/src/browser/index.js","test:crossbrowser:build:lint":"cd ./test/crossbrowser && tslint --project tsconfig.json","test:crossbrowser:build:tsc":"cd ./test/crossbrowser && tsc","test:crossbrowser:build:browser":"cd ./test/crossbrowser && browserify lib/crossbrowser/src/browser/index.js > src/browser/index.js","test:crossbrowser:build":"npm-run-all test:crossbrowser:build:*","test:crossbrowser:test":"cd ./test/crossbrowser && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:crossbrowser":"npm-run-all test:crossbrowser:*","test:sdkdriver:build:clean":"rimraf ./test/lib/sdkdriver/lib ./test/lib/sdkdriver/test/integration/browser/index.js","test:sdkdriver:build:lint":"cd ./test/lib/sdkdriver && tslint --project tsconfig.json","test:sdkdriver:build:tsc":"cd ./test/lib/sdkdriver && tsc --rootDir src","test:sdkdriver:build":"npm-run-all test:sdkdriver:build:*","test:sdkdriver:test:unit":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/unit/spec/**/*.ts","test:sdkdriver:test:integration:browser":"cd ./test/lib/sdkdriver/test/integration && browserify browser/browser.js > browser/index.js","test:sdkdriver:test:integration:run":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:sdkdriver:test:integration":"npm-run-all test:sdkdriver:test:integration:*","test:sdkdriver:test":"npm-run-all test:sdkdriver:test:*","test:sdkdriver":"npm-run-all test:sdkdriver:*","test:framework:angular:install":"cd ./test/framework/twilio-video-angular && rimraf ./node_modules package-lock.json && npm install","test:framework:angular:run":"mocha ./test/framework/twilio-video-angular.js","test:framework:angular":"npm-run-all test:framework:angular:*","test:framework:no-framework:run":"mocha ./test/framework/twilio-video-no-framework.js","test:framework:no-framework":"npm-run-all test:framework:no-framework:*","test:framework:react:install":"cd ./test/framework/twilio-video-react && rimraf ./node_modules package-lock.json && npm install","test:framework:react:test":"node ./scripts/framework.js twilio-video-react","test:framework:react:build":"cd ./test/framework/twilio-video-react && npm run build","test:framework:react:run":"mocha ./test/framework/twilio-video-react.js","test:framework:react":"npm-run-all test:framework:react:*","test:framework:install":"npm install chromedriver && npm install selenium-webdriver && npm install geckodriver && npm install puppeteer","test:framework":"npm-run-all test:framework:install test:framework:no-framework test:framework:react","test":"npm-run-all test:unit test:integration","build:es5":"rimraf ./es5 && tsc tsdef/twilio-video-tests.ts --noEmit --lib es2018,dom && tsc ","build:js":"node ./scripts/build.js ./src/twilio-video.js ./LICENSE.md ./dist/twilio-video.js","build:min.js":"uglifyjs ./dist/twilio-video.js -o ./dist/twilio-video.min.js --comments \\"/^! twilio-video.js/\\" -b beautify=false,ascii_only=true","build":"npm-run-all clean lint docs test:unit test:integration build:es5 build:js build:min.js test:umd","build:quick":"npm-run-all clean lint docs build:es5 build:js build:min.js","docs":"node ./scripts/docs.js ./dist/docs","watch":"tsc -w","clean":"rimraf ./coverage ./es5 ./dist"},"dependencies":{"@twilio/webrtc":"4.6.0","backoff":"^2.5.0","ws":"^7.4.6","xmlhttprequest":"^1.8.0"},"browser":{"ws":"./src/ws.js","xmlhttprequest":"./src/xmlhttprequest.js"}}')},j4sL:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(n("hkYD"));e.exports=o},jU82:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("wxsB"),s=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},t.prototype.attach=function(t){return(t=e.prototype.attach.call(this,t)).muted=!0,t},t.prototype._end=function(){return e.prototype._end.apply(this,arguments)},t.prototype.disable=function(){return e.prototype.disable.apply(this,arguments)},t.prototype.enable=function(){return e.prototype.enable.apply(this,arguments)},t.prototype.restart=function(){return e.prototype.restart.apply(this,arguments)},t.prototype.stop=function(){return e.prototype.stop.apply(this,arguments)},t}(n("aQcx")(o));e.exports=s},jxCJ:function(e,t,n){"use strict";var r=n("ghd6").defer,i=function(){function e(){Object.defineProperties(this,{_audio:{value:r(),writable:!0},_video:{value:r(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return e.prototype.resolveDeferred=function(e){"audio"===e?this._audio.resolve():this._video.resolve()},e.prototype.startDeferred=function(e){"audio"===e?this._audio=r():this._video=r()},e.prototype.whenResolved=function(e){return"audio"===e?this._audio.promise:this._video.promise},e}();e.exports=new i},"k/FX":function(e){e.exports=JSON.parse('{"name":"@twilio/webrtc","version":"4.6.0","description":"WebRTC-related APIs and shims used by twilio-video.js","scripts":{"build":"npm-run-all clean lint test","clean":"rimraf coverage","lint":"eslint ./lib","test:unit":"istanbul cover node_modules/mocha/bin/_mocha -- ./test/unit/index.js","test:integration:native":"karma start karma/integration.conf.js","test:integration:adapter":"karma start karma/integration.adapter.conf.js","test:integration":"npm-run-all test:integration:*","test":"npm-run-all test:*"},"repository":{"type":"git","url":"git+https://github.com/twilio/twilio-webrtc.js.git"},"keywords":["shim","twilio","video","webrtc"],"author":"Manjesh Malavalli <mmalavalli@twilio.com>","contributors":["Mark Roberts <mroberts@twilio.com>","Ryan Rowland <rrowland@twilio.com>","Makarand Patwardhan <mpatwardhan@twilio.com>"],"license":"BSD-3-Clause","main":"./lib/index.js","bugs":{"url":"https://github.com/twilio/twilio-webrtc.js/issues"},"homepage":"https://github.com/twilio/twilio-webrtc.js#readme","devDependencies":{"browserify":"^14.4.0","electron":"9.4.0","envify":"^4.1.0","eslint":"^4.4.1","is-docker":"^2.0.0","istanbul":"^0.4.5","karma":"^6.3.4","karma-browserify":"^8.1.0","karma-chrome-launcher":"^2.2.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.0.1","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^2.0.1","karma-safari-launcher":"~0.1","karma-spec-reporter":"0.0.31","mocha":"^9.1.1","npm-run-all":"^4.0.2","rimraf":"^2.6.1","simple-git":"^2.4.0","twilio-release-tool":"^1.0.0","watchify":"^4.0.0","webrtc-adapter":"^6.4.8"}}')},kThA:function(e,t,n){function r(e){return null!=e}function i(e){if(r((e=e||{}).initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(r(e.maxDelay)&&e.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=e.initialDelay||100,this.maxDelay_=e.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(r(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=e.randomisationFactor||0}n("+qE3"),n("MCLT"),i.prototype.getMaxDelay=function(){return this.maxDelay_},i.prototype.getInitialDelay=function(){return this.initialDelay_},i.prototype.next=function(){var e=this.next_(),t=1+Math.random()*this.randomisationFactor_;return Math.round(e*t)},i.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},i.prototype.reset=function(){this.reset_()},i.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")},e.exports=i},kltW:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(n("5UJR"));e.exports=o},lBno:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("UpXp"),s=n("VUT2"),a=function(e){function t(t){var n=e.call(this,t.label,t.maxPacketLifeTime,t.maxRetransmits,t.ordered)||this;return Object.defineProperties(n,{_dataChannel:{value:t}}),t.binaryType="arraybuffer",t.addEventListener("message",function(e){n.emit("message",e.data)}),t.addEventListener("close",function(){n.emit("close")}),n}return i(t,e),t.prototype.stop=function(){this._dataChannel.close(),e.prototype.stop.call(this)},t.prototype.toDataTransport=function(){return new s(this._dataChannel)},t}(o);e.exports=a},lrhj:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){var r=e.call(this,t,"active_speaker",n)||this;return Object.defineProperties(r,{_loudestParticipantSid:{value:null,writable:!0}}),r.on("ready",function(e){e.on("message",function(e){switch(e.type){case"active_speaker":r._setLoudestParticipantSid(e.participant)}})}),r}return i(t,e),Object.defineProperty(t.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),t.prototype._setLoudestParticipantSid=function(e){this.loudestParticipantSid!==e&&(this._loudestParticipantSid=e,this.emit("updated"))},t}(n("zbom"));e.exports=o},ls7c:function(e,t,n){"use strict";var r=n("8yKx"),i=n("mtX7"),o=n("MCLT").inherits,s=n("iWhl").updateUnifiedPlanTrackIdsToSSRCs,a=n("BWbm"),c="object"==typeof navigator&&navigator.userAgent&&(navigator.userAgent.match(/Firefox\/61/)||navigator.userAgent.match(/Firefox\/62/));function u(e){if(!(this instanceof u))return new u(e);r.call(this),a.interceptEvent(this,"signalingstatechange");var t=new RTCPeerConnection(e);Object.defineProperties(this,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:t},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},localDescription:{enumerable:!0,get:function(){return h(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.signalingState}}});var n,i=this;t.addEventListener("signalingstatechange",function(){if(!i._rollingBack&&i.signalingState!==n){n=i.signalingState;var e=i.dispatchEvent.apply.bind(i.dispatchEvent,i,arguments);i._isClosed?setTimeout(e):e()}}),a.proxyProperties(RTCPeerConnection.prototype,this,t)}function l(e,t,n){var r=t?"setLocalDescription":"setRemoteDescription";return e._rollingBack=!0,e._peerConnection[r](new i({type:"rollback"})).then(n).then(function(t){return e._rollingBack=!1,t},function(t){throw e._rollingBack=!1,t})}function d(e,t,n){if(!e._initiallyNegotiatedDtlsRole&&"offer"!==t.type){var r=t.sdp.match(/a=setup:([a-z]+)/);if(r){var i=r[1];e._initiallyNegotiatedDtlsRole=n?{active:"passive",passive:"active"}[i]:i}}}function h(e,t){return e&&"answer"===e.type&&t?new i({type:e.type,sdp:e.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+t)}):e}o(u,r),Object.defineProperty(u.prototype,"peerIdentity",{enumerable:!0,value:Promise.resolve({idp:"",name:""})}),c&&(u.prototype.addTrack=function(){var e=arguments[0],t=this._peerConnection.addTrack.apply(this._peerConnection,arguments);return t.replaceTrack(e),t}),u.prototype.createAnswer=function(){var e,t=[].slice.call(arguments),n=this;return e=this._peerConnection.createAnswer().then(function(e){return d(n,e),h(e,n._initiallyNegotiatedDtlsRole)}),"function"==typeof t[0]?a.legacyPromise(e,t[0],t[1]):e},u.prototype.createOffer=function(){var e,t=[].slice.call(arguments),n=(t.length>1?t[2]:t[0])||{},r=this;if("have-local-offer"===this.signalingState||"have-remote-offer"===this.signalingState){var o="have-local-offer"===this.signalingState;e=l(this,o,function(){return r.createOffer(n)})}else e=r._peerConnection.createOffer(n);return e=e.then(function(e){return new i({type:e.type,sdp:s(r._tracksToSSRCs,e.sdp)})}),t.length>1?a.legacyPromise(e,t[0],t[1]):e},u.prototype.setLocalDescription=function(){var e,t=[].slice.call(arguments),n=t[0];return n&&"answer"===n.type&&"have-local-offer"===this.signalingState&&(e=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),e?t.length>1?a.legacyPromise(e,t[1],t[2]):e:this._peerConnection.setLocalDescription.apply(this._peerConnection,t)},u.prototype.setRemoteDescription=function(){var e,t=[].slice.call(arguments),n=t[0],r=this;return n&&"have-remote-offer"===this.signalingState&&("answer"===n.type?e=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):"offer"===n.type&&(e=l(this,!1,function(){return r._peerConnection.setRemoteDescription(n)}))),e||(e=this._peerConnection.setRemoteDescription(n)),e=e.then(function(){d(r,n,!0)}),t.length>1?a.legacyPromise(e,t[1],t[2]):e},u.prototype.close=function(){"closed"!==this.signalingState&&(this._isClosed=!0,this._peerConnection.close())},a.delegateMethods(RTCPeerConnection.prototype,u.prototype,"_peerConnection"),e.exports=u},m0JW:function(e,t,n){"use strict";var r=n("TM7a");e.exports=function(e){var t=n("/+gY"),i={},o=t.getOrCreate(i),s=3;return function t(){return s--,r(o,e.srcObject,250).then(function(e){return!!e&&(!(s>0)||t())}).catch(function(){return!0})}().finally(function(){t.release(i)})}},"m8+h":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(n("+EQa"));e.exports=o},mAYT:function(e,t,n){"use strict";var r=n("+qE3").EventEmitter,i=n("ghd6").hidePrivateAndCertainPublicPropertiesInClass;e.exports=i(r,["domain"])},mb7l:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("tjbx"),s=n("xwWy"),a=s.typeErrors,c=s.trackPriority,u=function(e){function t(t,n,r,i){var o=e.call(this,n.name,t.sid,i)||this;return Object.defineProperties(o,{_reemitTrackEvent:{value:function(){return o.emit(o.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:t},_unpublish:{value:r},isTrackEnabled:{enumerable:!0,get:function(){return"data"===this.track.kind||this.track.isEnabled}},kind:{enumerable:!0,value:n.kind},priority:{enumerable:!0,get:function(){return t.updatedPriority}},track:{enumerable:!0,value:n}}),n.on("disabled",o._reemitTrackEvent),n.on("enabled",o._reemitTrackEvent),o}return i(t,e),t.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t.prototype.setPriority=function(e){var t=Object.values(c);if(!t.includes(e))throw a.INVALID_VALUE("priority",t);return this._signaling.setPriority(e),this},t.prototype.unpublish=function(){return this.track.removeListener("disabled",this._reemitTrackEvent),this.track.removeListener("enabled",this._reemitTrackEvent),this._unpublish(this),this},t}(o);e.exports=u},mbHc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var r=function(){function e(){this._end=void 0,this.start()}return e.prototype.start=function(){return this._start=Date.now(),this},e.prototype.stop=function(){return this._end=Date.now(),this},e.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:void 0===this._end?void 0:this._end-this._start}},e}();t.Timer=r},mkGC:function(e,t,n){"use strict";e.exports=function e(t){if(!(this instanceof e))return new e(t);var n=t&&"rollback"===t.type?null:new RTCSessionDescription(t);Object.defineProperties(this,{_description:{get:function(){return n}},sdp:{enumerable:!0,value:n?n.sdp:t.sdp},type:{enumerable:!0,value:n?n.type:t.type}})}},mtX7:function(e,t,n){"use strict";e.exports=RTCSessionDescription},muOY:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){var r=e.call(this,t,"track_switch_off",n)||this;return r.on("ready",function(e){e.on("message",function(e){switch(e.type){case"track_switch_off":r._setTrackSwitchOffUpdates(e.off||[],e.on||[])}})}),r}return i(t,e),t.prototype._setTrackSwitchOffUpdates=function(e,t){this.emit("updated",e,t)},t}(n("zbom"));e.exports=o},mv6w:function(e,t,n){"use strict";var r=function(){function e(e){e=Object.assign({getKey:function(e){return e},getValue:function(e){return e},isLessThanOrEqualTo:function(e,t){return e<=t}},e),Object.defineProperties(this,{_getKey:{value:e.getKey},_getValue:{value:e.getValue},_isLessThanOrEqualTo:{value:e.isLessThanOrEqualTo},_map:{value:new Map}})}return e.prototype.toMap=function(){return new Map(this._map)},e.prototype.updateAndFilter=function(e){return e.filter(this.update,this)},e.prototype.update=function(e){var t=this._getKey(e),n=this._getValue(e);return!(this._map.has(t)&&this._isLessThanOrEqualTo(n,this._map.get(t))||(this._map.set(t,n),0))},e}();e.exports=r},nj3X:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=n("+qE3").EventEmitter,a=n("xwWy"),c=a.DEFAULT_NQ_LEVEL_LOCAL,u=a.DEFAULT_NQ_LEVEL_REMOTE,l=a.MAX_NQ_LEVEL,d=n("ghd6").inRange,h=function(e){function t(t){var n=e.call(this)||this;return t=Object.assign({local:c,remote:u},t),Object.defineProperties(n,{local:{value:d(t.local,c,l)?t.local:c,writable:!0},remote:{value:d(t.remote,u,l)?t.remote:u,writable:!0}}),n}return i(t,e),t.prototype.update=function(e){var t=this;e=Object.assign({local:this.local,remote:this.remote},e),[["local",c,3],["remote",u,3]].forEach(function(n){var r=o(n,3),i=r[0],s=r[1];t[i]="number"==typeof e[i]&&d(e[i],s,r[2])?e[i]:s})},t}(s);e.exports=h},o2QH:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){var r=e.call(this)||this;return t=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},t),Object.defineProperties(r,{maxAudioBitrate:{value:t.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:t.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:n}}),r}return i(t,e),t.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},t.prototype.update=function(e){var t=this;e=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},e),["maxAudioBitrate","maxVideoBitrate"].reduce(function(n,r){return t[r]!==e[r]&&(t[r]=e[r],n=!0),n},!1)&&this.emit("changed")},t}(n("+qE3").EventEmitter);e.exports=o},oOgq:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};e.exports={isAndroid:function(){return/Android/.test(navigator.userAgent)},isIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)},isMobile:function(){return/Mobi/.test(navigator.userAgent)},isNonChromiumEdge:function(e){return"chrome"===e&&/Edge/.test(navigator.userAgent)&&("undefined"==typeof chrome||void 0===chrome.runtime)},mobileWebKitBrowser:function(e){return"safari"!==e?null:"brave"in navigator?"brave":["edge","edg"].find(function(e){return navigator.userAgent.toLowerCase().includes(e)})||null},rebrandedChromeBrowser:function(e){if("chrome"!==e)return null;if("brave"in navigator)return"brave";var t=function(e){for(var t=[],n=[],r=0;r<e.length;r++)if("("===e[r])t.push(r);else if(")"===e[r]&&t.length>0){var i=t.pop();0===t.length&&n.push(e.substring(i,r+1))}return n}(navigator.userAgent).reduce(function(e,t){return e.replace(t,"")},navigator.userAgent).match(/[^\s]+/g)||[];return r(t.map(function(e){return e.split("/")[0].toLowerCase()})).slice(2).find(function(e){return!["chrome","mobile","safari"].includes(e)})||null}}},ok1L:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mosToScore=t.calculateMOS=void 0;var r=94.768;t.calculateMOS=function(e,t,n){var i=e+2*t+10,o=0;switch(!0){case i<160:o=r-i/40;break;case i<1e3:o=r-(i-120)/10}switch(!0){case n<=o/2.5:o=Math.max(o-2.5*n,6.52);break;default:o=0}return 1+.035*o+7e-6*o*(o-60)*(100-o)},t.mosToScore=function(e){return e?e>4.2?5:e>4?4:e>3.6?3:e>3?2:1:0}},oy54:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("+qE3").EventEmitter,s=n("xwWy").DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,a=function(e){function t(t){var n=e.call(this)||this;return Object.defineProperties(n,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:t},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),n.on("add",function(e){n._lastStatsSaveTime=Date.now(),n._lastStatsPublishTime=Date.now(),n._processorInfo=e,n._stats=[],n._reemitEvent("add",n._getEventData())}),n.on("remove",function(){var e=n._getEventData();n._lastStatsSaveTime=null,n._lastStatsPublishTime=null,n._processorInfo=null,n._stats=null,n._reemitEvent("remove",e)}),n.on("start",function(){n._reemitEvent("start",n._getEventData())}),n.on("stop",function(e){n._reemitEvent("stop",Object.assign({message:e},n._getEventData()))}),n.on("stats",function(){return n._maybeEmitStats()}),n}return i(t,e),t.prototype._getEventData=function(){if(!this._processorInfo)return{};var e=this._processorInfo,t=e.processor,n={captureHeight:e.captureHeight,captureWidth:e.captureWidth,inputFrameRate:e.inputFrameRate,isRemoteVideoTrack:e.isRemoteVideoTrack};return n.name=t._name||"VideoProcessor",["assetsPath","blurFilterRadius","fitType","isSimdEnabled","maskBlurRadius","version"].forEach(function(e){var r=t["_"+e];void 0!==r&&(n[e]=r)}),Object.keys(n).forEach(function(e){var t=n[e];"boolean"==typeof t&&(n[e]=t?"true":"false")}),n},t.prototype._maybeEmitStats=function(){if(this._stats&&this._processorInfo){var e=this._processorInfo.processor._benchmark;if(e){var t=Date.now();if(!(t-this._lastStatsSaveTime<1e3)){var n={outputFrameRate:e.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(t){n[t]=e.getAverageDelay(t)}),this._lastStatsSaveTime=t,this._stats.push(n),!(t-this._lastStatsPublishTime<s)){this._lastStatsPublishTime=t;var r=this._stats.splice(0).reduce(function(e,t,r){return Object.keys(n).forEach(function(n){e[n]||(e[n]=0),e[n]=(e[n]*r+t[n])/(r+1)}),e},{});Object.keys(r).forEach(function(e){r[e]=parseFloat(r[e].toFixed(2))}),this._reemitEvent("stats",Object.assign({},r,this._getEventData()))}}}}},t.prototype._reemitEvent=function(e,t){this._log.debug("VideoProcessor:"+e,t),this.emit("event",{name:e,data:t})},t}(o);e.exports=a},pWYA:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=n("+qE3"),a=n("I/VV"),c=function(e){function t(t,n){var r=e.call(this)||this;return Object.defineProperties(r,{_factories:{value:new WeakMap},_manager:{value:t},_signaling:{value:n}}),n.on("updated",function(){return r.emit("updated")}),r}return i(t,e),Object.defineProperty(t.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e=this;this.stop();var t=setTimeout(function(){var n,r;e._timeout===t&&(n=e,r=(n._manager._peerConnections?Array.from(n._manager._peerConnections.values()):[]).map(function(e){return e._peerConnection}).filter(function(e){return"closed"!==e.signalingState}).map(function(e){if(n._factories.has(e))return n._factories.get(e);var t=new a(e);return n._factories.set(e,t),t}).map(function(e){return e.next().catch(function(){return null})}),Promise.all(r).then(function(e){return e.filter(function(e){return e}).map(function(e){return e.summarize()})})).then(function(n){if(e._timeout===t){if(n.length){var r=o(n,1);e._signaling.put(r[0])}e.start()}})},200);this._timeout=t},t.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},t}(s);e.exports=c},q6IO:function(e,t,n){"use strict";e.exports=function(e){var t=e.jitter,n=e.rtt,r=e.level;Object.defineProperties(this,{jitter:{value:void 0===t?null:t,enumerable:!0},rtt:{value:void 0===n?null:n,enumerable:!0},level:{value:void 0===r?null:r,enumerable:!0}})}},qOIT:function(e,t,n){"use strict";var r=function(){function e(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return e.prototype.get=function(){var e=this._samples;return(e[1].numerator-e[0].numerator)/(e[1].denominator-e[0].denominator||1/0)},e.prototype.putSample=function(e,t){var n=this._samples;n.shift(),n.push({denominator:t,numerator:e})},e}();e.exports=r},qRNy:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=n("ghd6"),o=i.difference,s=i.flatMap;function a(){return String(Math.floor(4294967295*Math.random()))}var c=function(){function e(e,t,n){Object.defineProperties(this,{cName:{enumerable:!0,value:n},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:t},trackId:{enumerable:!0,value:e}})}return e.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var e=[a(),a()];e.forEach(function(e){this.primarySSRCs.add(e)},this),this.rtxPairs.size&&e.forEach(function(e){this.rtxPairs.set(a(),e)},this)}},e.prototype.addSSRC=function(e,t,n){t?this.rtxPairs.set(e,t):this.primarySSRCs.add(e),this.isSimulcastEnabled=this.isSimulcastEnabled||n},e.prototype.toSdpLines=function(e){var t=this,n=e?[]:Array.from(this.rtxPairs.entries()).map(function(e){return e.reverse()}),r=Array.from(this.primarySSRCs.values()),i=n.length?s(n):r,o=s(i,function(e){return["a=ssrc:"+e+" cname:"+t.cName,"a=ssrc:"+e+" msid:"+t.streamId+" "+t.trackId]}),a=n.map(function(e){return"a=ssrc-group:FID "+e.join(" ")}),c=["a=ssrc-group:SIM "+r.join(" ")];return a.concat(o).concat(c)},e}();function u(e,t){return(e.match(new RegExp(t,"gm"))||[]).map(function(e){return(e.match(new RegExp(t))||[]).slice(1)})}e.exports=function(e,t){var n=function(e){var t=function(e){return new Set(s(u(e,"^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$")))}(e),n=function(e){return new Map(u(e,"^a=ssrc-group:FID ([0-9]+) ([0-9]+)$").map(function(e){return e.reverse()}))}(e);return function(e){var t=r(s(u(e,"^a=msid:(.+) (.+)$")),2),n=t[0],i=t[1];return s(u(e,"^a=ssrc:(.+) cname:.+$")).map(function(e){return[e,n,i]})}(e).reduce(function(r,i){var o=i[0],s=i[1],a=i[2],u=r.get(a)||new c(a,s,function(e,t,n){return e.match(new RegExp("a=ssrc:"+t+" cname:(.+)"))[1]}(e,o)),l=n.get(o)||null;return u.addSSRC(o,l,t.has(o)),r.set(a,u)},new Map)}(e),i=Array.from(n.keys()),a=Array.from(t.keys()),l=o(i,a),d=o(a,i);s(l,function(e){return n.get(e)}).forEach(function(e){e.addSimulcastSSRCs(),t.set(e.trackId,e)}),a=Array.from(t.keys());var h=o(a,d),p=s(h,function(e){return t.get(e)}),f=!e.match(/a=rtpmap:[0-9]+ rtx/),m=s(p,function(e){return e.toSdpLines(f)}),v=s(new Set(e.split("\r\n").concat(m))),g="a=x-google-flag:conference";return e.match(g)||v.push(g),v.join("\r\n")}},qmcU:function(e,t,n){"use strict";e.exports="function"==typeof MediaStream?MediaStream:function(){throw new Error("MediaStream is not supported")}},r2dn:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return Object.defineProperties(i,{audioLevel:{value:"number"==typeof n.audioInputLevel?n.audioInputLevel:null,enumerable:!0},jitter:{value:"number"==typeof n.jitter?n.jitter:null,enumerable:!0}}),i}return i(t,e),t}(n("zYCr"));e.exports=o},r2pO:function(e,t,n){"use strict";var r=n("8yKx"),i=n("MCLT").inherits,o=n("rskN"),s=n("iWhl"),a=n("BWbm"),c="unified"===s.getSdpFormat(),u=c?s.updateUnifiedPlanTrackIdsToSSRCs:s.updatePlanBTrackIdsToSSRCs;function l(e){if(!(this instanceof l))return new l(e);r.call(this),a.interceptEvent(this,"datachannel"),a.interceptEvent(this,"iceconnectionstatechange"),a.interceptEvent(this,"signalingstatechange"),a.interceptEvent(this,"track");var t=new RTCPeerConnection(e);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:t},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new o},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription}},iceConnectionState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState}},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState}}});var n=this;t.addEventListener("datachannel",function(e){p(e.channel),n.dispatchEvent(e)}),t.addEventListener("iceconnectionstatechange",function(){n._isClosed||n.dispatchEvent.apply(n,arguments)}),t.addEventListener("signalingstatechange",function(){n._isClosed||("stable"===t.signalingState&&(n._appliedTracksToSSRCs=new Map(n._tracksToSSRCs)),n._pendingLocalOffer||n._pendingRemoteOffer||n.dispatchEvent.apply(n,arguments))}),t.addEventListener("track",function(e){n._pendingRemoteOffer=null,n.dispatchEvent(e)}),a.proxyProperties(RTCPeerConnection.prototype,this,t)}function d(e,t,n){var r,i=t?e._pendingLocalOffer:e._pendingRemoteOffer,o=t?"have-local-offer":"have-remote-offer",s=t?"setLocalDescription":"setRemoteDescription";if(!t&&(t?e._pendingRemoteOffer:e._pendingLocalOffer)&&"answer"===n.type)return function(e,t){return e._peerConnection.setLocalDescription(e._pendingLocalOffer).then(function(){return e._pendingLocalOffer=null,e.setRemoteDescription(t)}).then(function(){e._signalingStateLatch.lower()})}(e,n);if("offer"===n.type){if(e.signalingState!==o&&"stable"!==e.signalingState)return Promise.reject(new Error("Cannot set "+(t?"local":"remote")+" offer in state "+e.signalingState));i||"low"!==e._signalingStateLatch.state||e._signalingStateLatch.raise();var a=e.signalingState;return r=n,t?e._pendingLocalOffer=r:e._pendingRemoteOffer=r,e.signalingState!==a?Promise.resolve().then(function(){e.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}return"rollback"===n.type?e.signalingState!==o?Promise.reject(new Error("Cannot rollback "+(t?"local":"remote")+" description in "+e.signalingState)):(t?e._pendingLocalOffer=null:e._pendingRemoteOffer=null,e._rolledBackTracksToSSRCs=new Map(e._tracksToSSRCs),e._tracksToSSRCs=new Map(e._appliedTracksToSSRCs),Promise.resolve().then(function(){e.dispatchEvent(new Event("signalingstatechange"))})):e._peerConnection[s](n)}function h(e,t){return!!e.getTransceivers().find(function(e){return e.receiver&&e.receiver.track&&e.receiver.track.kind===t})}function p(e){return Object.defineProperties(e,{maxPacketLifeTime:{value:65535===e.maxPacketLifeTime?null:e.maxPacketLifeTime},maxRetransmits:{value:65535===e.maxRetransmits?null:e.maxRetransmits}})}i(l,r),l.prototype.addIceCandidate=function(e){var t=this;return"have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return t._peerConnection.addIceCandidate(e)}):this._peerConnection.addIceCandidate(e)},l.prototype.createOffer=function(e){e=Object.assign({},e);var t=this;if(e.offerToReceiveVideo&&!this._audioTransceiver&&(!c||!h(this,"audio"))){delete e.offerToReceiveAudio;try{this._audioTransceiver=c?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(n){return Promise.reject(n)}}if(e.offerToReceiveVideo&&!this._videoTransceiver&&(!c||!h(this,"video"))){delete e.offerToReceiveVideo;try{this._videoTransceiver=c?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(n){return Promise.reject(n)}}return this._peerConnection.createOffer(e).then(function(e){return t._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:e.type,sdp:u(t._tracksToSSRCs,e.sdp)})})},l.prototype.createAnswer=function(e){var t=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return t._signalingStateLatch.lower(),t._peerConnection.createAnswer()}).then(function(e){return t._pendingRemoteOffer=null,t._rolledBackTracksToSSRCs.clear(),c?new RTCSessionDescription({type:e.type,sdp:u(t._tracksToSSRCs,e.sdp)}):e},function(e){throw t._pendingRemoteOffer=null,e}):this._peerConnection.createAnswer(e).then(function(e){return t._rolledBackTracksToSSRCs.clear(),c?new RTCSessionDescription({type:e.type,sdp:u(t._tracksToSSRCs,e.sdp)}):e})},l.prototype.createDataChannel=function(e,t){var n=this._peerConnection.createDataChannel(e,t);return p(n),n},l.prototype.removeTrack=function(e){e.replaceTrack(null),this._peerConnection.removeTrack(e)},l.prototype.setLocalDescription=function(e){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),d(this,!0,e)},l.prototype.setRemoteDescription=function(e){return this._rolledBackTracksToSSRCs.clear(),d(this,!1,e)},l.prototype.close=function(){if(!this._isClosed){this._isClosed=!0,this._peerConnection.close();var e=this;setTimeout(function(){e.dispatchEvent(new Event("iceconnectionstatechange")),e.dispatchEvent(new Event("signalingstatechange"))})}},a.delegateMethods(RTCPeerConnection.prototype,l.prototype,"_peerConnection"),e.exports=l},rskN:function(e,t,n){"use strict";var r=n("BWbm").defer,i={high:new Set(["low"]),low:new Set(["high"])};function o(e){if(!(this instanceof o))return new o(e);var t=e||"low";Object.defineProperties(this,{_state:{set:function(e){if(t!==e){var n=this._whenDeferreds.get(t=e);n.forEach(function(e){e.resolve(this)},this),n.clear()}},get:function(){return t}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])},state:{enumerable:!0,get:function(){return this._state}}})}function s(e,t){return new Error('Cannot transition from "'+e+'" to "'+t+'"')}o.prototype.lower=function(){return this.transition("low")},o.prototype.raise=function(){return this.transition("high")},o.prototype.transition=function(e){if(!i[this.state].has(e))throw s(this.state,e);return this._state=e,this},o.prototype.when=function(e){if(this.state===e)return Promise.resolve(this);if(!i[this.state].has(e))return Promise.reject(s(this.state,e));var t=r();return this._whenDeferreds.get(e).add(t),t.promise},e.exports=o},sJKT:function(e,t,n){"use strict";var r=function(){function e(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return e.prototype.connect=function(){},e.prototype.disconnect=function(){return!!this._connected&&(this._connected=!1,!0)},e.prototype.publish=function(){return this._connected},e}();e.exports=r},sYJf:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},o=function(){function e(e,t){var n=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:t}}),Object.defineProperty(this,"_promise",{value:new Promise(function(t,r){e(function(e){n._isCancelable=!1,t(e)},function(e){n._isCancelable=!1,r(e)},function(){return n._isCanceled})})})}return e.reject=function(t){return new e(function(e,n){n(t)},function(){})},e.resolve=function(t){return new e(function(e){e(t)},function(){})},e.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},e.prototype.catch=function(){var t=[].slice.call(arguments),n=this._promise;return new e(function(e,o){n.catch.apply(n,i([],r(t))).then(e,o)},this._onCancel)},e.prototype.then=function(){var t=[].slice.call(arguments),n=this._promise;return new e(function(e,o){n.then.apply(n,i([],r(t))).then(e,o)},this._onCancel)},e.prototype.finally=function(){var t=[].slice.call(arguments),n=this._promise;return new e(function(e,o){n.finally.apply(n,i([],r(t))).then(e,o)},this._onCancel)},e}();e.exports=o},shdM:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n,r){var i=this;return t=t.clone(),(i=e.call(this,n,t.kind,"data"===t.kind||t.track.enabled,r)||this).setTrackTransceiver(t),Object.defineProperties(i,{_updatedPriority:{value:r,writable:!0},id:{enumerable:!0,value:t.id}}),i}return i(t,e),Object.defineProperty(t.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),t.prototype.enable=function(t){return this.trackTransceiver.track.enabled=t="boolean"!=typeof t||t,e.prototype.enable.call(this,t)},t.prototype.publishFailed=function(e){return function(e,t){return null===e._sid&&!e._error&&(e._error=t,!0)}(this,e)&&this.emit("updated"),this},t.prototype.setPriority=function(e){return this._updatedPriority!==e&&(this._updatedPriority=e,this.emit("updated")),this},t.prototype.setSid=function(t){return this._error?this:e.prototype.setSid.call(this,t)},t.prototype.stop=function(){this.trackTransceiver.stop()},t}(n("Ivmz"));e.exports=o},t472:function(e,t,n){"use strict";var r=n("BWbm"),i=r.guessBrowser,o=r.support,s=n("oOgq"),a=s.isAndroid,c=s.isMobile,u=s.isNonChromiumEdge,l=s.rebrandedChromeBrowser,d=s.mobileWebKitBrowser,h=["crios","edg","edge","electron","headlesschrome"],p=["chrome","firefox"],f=["chrome","safari"],m=[];e.exports=function(){var e=i();if(!e)return!1;var t=l(e),n=d(e),r=a()?p:f;return!!e&&o()&&(!t||h.includes(t))&&!u(e)&&(!n||m.includes(n))&&(!c()||r.includes(e))}},tC0a:function(e,t,n){"use strict";var r=n("9dY8").getMediaSections,i=function(){function e(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return e.prototype.match=function(e){return this._midsToTrackIds.get(e.transceiver.mid)||null},e.prototype.update=function(e){var t=r(e,"(audio|video)");this._midsToTrackIds=t.reduce(function(e,t){var n=t.match(/^a=mid:(.+)$/m)||[],r=t.match(/^a=msid:.+ (.+)$/m)||[],i=n[1],o=r[1];return i&&o?e.set(i,o):e},this._midsToTrackIds)},e}();e.exports=i},tPbP:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("+qE3").EventEmitter,s=n("ghd6").getUserAgent,a=global.window||global,c=a.WebSocket?a.WebSocket:n("vaDk"),u=n("ghd6"),l=function(e){function t(t,n,r,i,o,a){var l=e.call(this)||this;return a=Object.assign({gateway:h(i,o)+"/v1/VideoEvents",maxReconnectAttempts:5,reconnectIntervalMs:50,userAgent:s(),WebSocket:c},a),Object.defineProperties(l,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:u.defer()},_reconnectAttemptsLeft:{value:a.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:a.WebSocket}}),l._readyToConnect.promise.then(function(e){var i=e.roomSid,o=e.participantSid,s=l;l.on("disconnected",function e(c){if(s._session=null,c&&s._reconnectAttemptsLeft>0)return s.emit("reconnecting"),void function(e,t,n,r,i,o,s){var a=Date.now()-e._connectTimestamp,c=s.reconnectIntervalMs-a;c>0?setTimeout(function(){d(e,t,n,r,i,o,s)},c):d(e,t,n,r,i,o,s)}(s,t,n,r,i,o,a);s.removeListener("disconnected",e)}),d(l,t,n,r,i,o,a)}).catch(function(){}),l}return i(t,e),t.prototype.connect=function(e,t){this._readyToConnect.resolve({roomSid:e,participantSid:t})},t.prototype._publish=function(e){e.session=this._session,this._ws.send(JSON.stringify(e))},t.prototype.disconnect=function(){if(null===this._ws||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch(e){}return this.emit("disconnected"),!0},t.prototype.publish=function(e,t,n){return(null===this._ws||this._ws.readyState!==this._WebSocket.CLOSING&&this._ws.readyState!==this._WebSocket.CLOSED)&&(("string"==typeof this._session?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue))({group:e,name:t,payload:n,timestamp:Date.now(),type:"event",version:1}),!0)},t}(o);function d(e,t,n,r,i,o,s){e._connectTimestamp=Date.now(),e._reconnectAttemptsLeft--,e._ws=new s.WebSocket(s.gateway);var a=e._ws;a.addEventListener("close",function(t){1e3!==t.code?e.emit("disconnected",new Error("WebSocket Error "+t.code+": "+t.reason)):e.emit("disconnected")}),a.addEventListener("message",function(t){!function(e,t,n){switch(t.type){case"connected":e._session=t.session,e._reconnectAttemptsLeft=n.maxReconnectAttempts,e._eventQueue.splice(0).forEach(e._publish,e),e.emit("connected");break;case"error":e._ws.close(),e.emit("disconnected",new Error(t.message))}}(e,JSON.parse(t.data),s)}),a.addEventListener("open",function(){var e={type:"connect",token:t,version:1};e.publisher={name:n,sdkVersion:r,userAgent:s.userAgent,participantSid:o,roomSid:i},a.send(JSON.stringify(e))})}function h(e,t){return"prod"===e?"wss://sdkgw."+t+".twilio.com":"wss://sdkgw."+e+"-"+t+".twilio.com"}e.exports=l},thyc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syntheticVideo=void 0,t.syntheticVideo=function(e){var t=void 0===e?{}:e,n=t.width,r=void 0===n?640:n,i=t.height,o=void 0===i?480:i,s=Object.assign(document.createElement("canvas"),{width:r,height:o}),a=s.getContext("2d");a.fillStyle="green",a.fillRect(0,0,s.width,s.height);var c=!1;requestAnimationFrame(function e(){if(!c){var t=Math.round(255*Math.random()),n=Math.round(255*Math.random()),i=Math.round(255*Math.random()),s=Math.round(255*Math.random());a.fillStyle="rgba("+t+", "+n+", "+i+", "+s+")",a.fillRect(Math.random()*r,Math.random()*o,50,50),requestAnimationFrame(e)}});var u=s.captureStream(30).getTracks()[0],l=u.stop;return u.stop=function(){c=!0,l.call(u)},u}},tjbx:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("mAYT"),s=n("ghd6"),a=s.buildLogLevels,c=s.valueToJSON,u=n("xwWy").DEFAULT_LOG_LEVEL,l=n("S3Hu"),d=0,h=function(e){function t(t,n,r){var i=e.call(this)||this;r=Object.assign({logLevel:u},r);var o=a(r.logLevel);return Object.defineProperties(i,{_instanceId:{value:d++},_log:{value:r.log?r.log.createLog("default",i):new l("default",i,o,r.loggerName)},trackName:{enumerable:!0,value:t},trackSid:{enumerable:!0,value:n}}),i}return i(t,e),t.prototype.toJSON=function(){return c(this)},t.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(o);e.exports=h},uBG5:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){var r=e.call(this,t,n.kind)||this;return Object.defineProperties(r,{_track:{value:n,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),r}return i(t,e),t.prototype.stop=function(){this.track.stop(),e.prototype.stop.call(this)},t}(n("Jhn5"));e.exports=o},uqca:function(e,t,n){"use strict";var r=n("mv6w"),i=function(){function e(){Object.defineProperties(this,{_filter:{value:new r({getKey:function(e){return e.ufrag},isLessThanOrEqualTo:function(e,t){return e.revision<=t.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return e.prototype.setUfrag=function(e){this._ufrag=e;var t=this._filter.toMap().get(e);return t?t.candidates:[]},e.prototype.update=function(e){e.candidates=e.candidates||[];var t=this._filter.toMap().get(e.ufrag),n=t?t.candidates:[];return this._filter.update(e)&&this._ufrag===e.ufrag?e.candidates.slice(n.length):[]},e}();e.exports=i},uxdj:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("BWbm"),s=o.guessBrowser,a=o.isIOSChrome,c=n("+OFx"),u=n("aQcx"),l=n("9FmL"),d=n("ghd6").isUserMediaTrack,h=function(e){function t(t,n){var r=this;return n=Object.assign({workaroundSilentLocalVideo:("safari"===s()||a())&&d(t)&&"undefined"!=typeof document&&"function"==typeof document.createElement},n),r=e.call(this,t,n)||this,Object.defineProperties(r,{_workaroundSilentLocalVideo:{value:n.workaroundSilentLocalVideo?p:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0}}),r._workaroundSilentLocalVideo&&(r._workaroundSilentLocalVideoCleanup=r._workaroundSilentLocalVideo(r,document)),r}return i(t,e),t.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},t.prototype._checkIfCanCaptureFrames=function(){return e.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},t.prototype._end=function(){return e.prototype._end.apply(this,arguments)},t.prototype._setSenderMediaStreamTrack=function(e){var t=this,n=this.mediaStreamTrack,r=e?this.processedTrack:n;return this._trackSender.setMediaStreamTrack(r).catch(function(e){return t._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:e,mediaStreamTrack:r})}).then(function(){t._unprocessedTrack=e?n:null})},t.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var t=e.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),t):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},t.prototype.removeProcessor=function(){var t=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var n=e.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return t._updateElementsMediaStreamTrack()}),n},t.prototype.disable=function(){var t=e.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),t},t.prototype.enable=function(t){void 0===t&&(t=!0);var n=e.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=t,t&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),n},t.prototype.restart=function(){var t=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var n=e.prototype.restart.apply(this,arguments);return this.processor&&n.then(function(){t._restartProcessor()}),this._workaroundSilentLocalVideo&&n.finally(function(){t._workaroundSilentLocalVideoCleanup=t._workaroundSilentLocalVideo(t,document)}),n},t.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),e.prototype.stop.apply(this,arguments)},t}(u(l));function p(e,t){var n=e._log,r=e._dummyEl,i=e.mediaStreamTrack;function o(){e.isEnabled&&(n.info("Unmuted, checking silence"),r.play().then(function(){return c(r,t)}).then(function(t){if(t)return n.warn("Silence detected, restarting"),e._stop(),e._restart();n.info("Non-silent frames detected, so no need to restart")}).catch(function(e){n.warn("Failed to detect silence and restart:",e)}).finally(function(){(r=e._dummyEl).paused||r.pause(),i.removeEventListener("unmute",o),(i=e.mediaStreamTrack).addEventListener("unmute",o)}))}return i.addEventListener("unmute",o),function(){i.removeEventListener("unmute",o)}}e.exports=h},vaDk:function(e,t){e.exports=WebSocket},wAda:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("Kg6A"),s=n("QB7E"),a=function(e){function t(t,n){var r;return n=Object.assign({createCancelableRoomSignalingPromise:o},n),r=e.call(this)||this,Object.defineProperties(r,{_createCancelableRoomSignalingPromise:{value:n.createCancelableRoomSignalingPromise},_options:{value:n},_wsServer:{value:t}}),r}return i(t,e),t.prototype._connect=function(e,t,n,r,i){return i=Object.assign({},this._options,i),this._createCancelableRoomSignalingPromise.bind(null,t,this._wsServer,e,n,r,i)},t.prototype.createLocalParticipantSignaling=function(e,t){return new s(e,t)},t}(n("HHTs"));e.exports=a},wl3V:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return Object.defineProperties(t,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),t}return i(t,e),t.prototype.disable=function(){return this.enable(!1)},t.prototype.enable=function(e){return this.isEnabled!==(e="boolean"!=typeof e||e)&&(this._isEnabled=e,this.emit("updated")),this},t}(n("+qE3").EventEmitter);e.exports=o},wxsB:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype._start=function(){e.prototype._start.call(this),this._dummyEl&&(this._dummyEl.srcObject=null,this._dummyEl=null)},t.prototype.attach=function(){return e.prototype.attach.apply(this,arguments)},t.prototype.detach=function(){return e.prototype.detach.apply(this,arguments)},t}(n("B32u"));e.exports=o},xVU0:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){return e.call(this,t.sid,t.name,t.kind,t.enabled,t.priority,n)||this}return i(t,e),t.prototype.update=function(e){return this.enable(e.enabled),this.setPriority(e.priority),this},t}(n("WHMX"));e.exports=o},xwWy:function(e,t,n){"use strict";var r=n("iqXr");e.exports.SDK_NAME=r.name+".js",e.exports.SDK_VERSION=r.version,e.exports.SDP_FORMAT="unified",e.exports.DEFAULT_ENVIRONMENT="prod",e.exports.DEFAULT_REALM="us1",e.exports.DEFAULT_REGION="gll",e.exports.DEFAULT_LOG_LEVEL="warn",e.exports.DEFAULT_LOGGER_NAME="twilio-video",e.exports.WS_SERVER=function(e,t){return t="gll"===t?"global":encodeURIComponent(t),"prod"===e?"wss://"+t+".vss.twilio.com/signaling":"wss://"+t+".vss."+e+".twilio.com/signaling"},e.exports.PUBLISH_MAX_ATTEMPTS=5,e.exports.PUBLISH_BACKOFF_JITTER=10,e.exports.PUBLISH_BACKOFF_MS=20,e.exports.typeErrors={ILLEGAL_INVOKE:function(e,t){return new TypeError("Illegal call to "+e+": "+t)},INVALID_TYPE:function(e,t){return new TypeError(e+" must be "+(["a","e","i","o","u"].includes(t.toLowerCase()[0])?"an":"a")+" "+t)},INVALID_VALUE:function(e,t){return new RangeError(e+" must be one of "+t.join(", "))},REQUIRED_ARGUMENT:function(e){return new TypeError(e+" must be specified")}},e.exports.DEFAULT_FRAME_RATE=24,e.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,e.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,e.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,e.exports.DEFAULT_NQ_LEVEL_LOCAL=1,e.exports.DEFAULT_NQ_LEVEL_REMOTE=0,e.exports.MAX_NQ_LEVEL=3,e.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,e.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,e.exports.iceRestartBackoffConfig={factor:1.1,initialDelay:1,maxDelay:1e3*e.exports.DEFAULT_SESSION_TIMEOUT_SEC,randomisationFactor:.5},e.exports.reconnectBackoffConfig={factor:1.5,initialDelay:80,randomisationFactor:.5},e.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},e.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},e.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},e.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},e.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}},yTCf:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return Object.defineProperties(r,{audioLevel:{value:"number"==typeof n.audioOutputLevel?n.audioOutputLevel:null,enumerable:!0},jitter:{value:"number"==typeof n.jitter?n.jitter:null,enumerable:!0}}),r}return i(t,e),t}(n("i99/"));e.exports=o},z1nD:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("NCuz"),s=n("QH9v"),a=function(e){function t(t){var n,r=new(0,(t=Object.assign({DataTrackSender:s,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},t)).DataTrackSender)(t.maxPacketLifeTime,t.maxRetransmits,t.ordered);return n=e.call(this,r.id,"data",t)||this,Object.defineProperties(n,{_trackSender:{value:r},id:{enumerable:!0,value:r.id},maxPacketLifeTime:{enumerable:!0,value:t.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:t.maxRetransmits},ordered:{enumerable:!0,value:t.ordered},reliable:{enumerable:!0,value:null===t.maxPacketLifeTime&&null===t.maxRetransmits}}),n}return i(t,e),t.prototype.send=function(e){this._trackSender.send(e)},t}(o);e.exports=a},zMHY:function(e,t,n){e.exports=n("HNxM")},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function s(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;s(e)},complete(){}},c=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function u(e){return null!==e&&"object"==typeof e}const l=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let d=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(r(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){t=a instanceof l?h(a.errors):[a]}}if(c(s)){let e=-1,n=s.length;for(;++e<n;){const n=s[e];if(u(n))try{n.unsubscribe()}catch(a){t=t||[],a instanceof l?t=t.concat(h(a.errors)):t.push(a)}}}if(t)throw new l(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function h(e){return e.reduce((e,t)=>e.concat(t instanceof l?t.errors:t),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends d{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof f?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,t,n)}}[p](){return this}static create(e,t,n){const r=new f(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class m extends f{constructor(e,t,n,i){let o;super(),this._parentSubscriber=e;let s=this;r(t)?o=t:t&&(o=t.next,n=t.error,i=t.complete,t!==a&&(s=Object.create(t),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):s(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;s(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const v=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function g(e){return e}let y=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,i=function(e,t,n){if(e){if(e instanceof f)return e;if(e[p])return e[p]()}return e||t||n?new f(e,t,n):new f(a)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof f?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=_(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[v](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?g:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=_(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function _(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const b=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class w extends d{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class k extends f{constructor(e){super(e),this.destination=e}}let S=(()=>{class e extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new k(this)}lift(e){const t=new T(this,this);return t.operator=e,t}next(e){if(this.closed)throw new b;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new b;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new b;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new b;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new w(this,e))}asObservable(){const e=new y;return e.source=this,e}}return e.create=(e,t)=>new T(e,t),e})();class T extends S{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):d.EMPTY}}function C(e){return e&&"function"==typeof e.schedule}function O(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new E(e,t))}}class E{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new P(e,this.project,this.thisArg))}}class P extends f{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const x=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()};function R(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const j=R(),A=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function L(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const I=e=>{if(e&&"function"==typeof e[v])return r=e,e=>{const t=r[v]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(A(e))return x(e);if(L(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,s),e);if(e&&"function"==typeof e[j])return t=e,e=>{const n=t[j]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=u(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,r};function D(e,t){return new y(n=>{const r=new d;let i=0;return r.add(t.schedule(function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function M(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[v]}(e))return function(e,t){return new y(n=>{const r=new d;return r.add(t.schedule(()=>{const i=e[v]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if(L(e))return function(e,t){return new y(n=>{const r=new d;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if(A(e))return D(e,t);if(function(e){return e&&"function"==typeof e[j]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new y(n=>{const r=new d;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[j](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof y?e:new y(I(e))}class N extends f{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class V extends f{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function U(e,t){if(t.closed)return;if(e instanceof y)return e.subscribe(t);let n;try{n=I(e)(t)}catch(r){t.error(r)}return n}function F(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(F((n,r)=>M(e(n,r)).pipe(O((e,i)=>t(n,e,r,i))),n)):("number"==typeof t&&(n=t),t=>t.lift(new H(e,n)))}class H{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new B(e,this.project,this.concurrent))}}class B extends V{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new N(this),n=this.destination;n.add(t);const r=U(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function W(e=Number.POSITIVE_INFINITY){return F(g,e)}function z(e,t){return t?D(e,t):new y(x(e))}function q(){return function(e){return e.lift(new $(e))}}class ${constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new G(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class G extends f{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Q extends y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new d,e.add(this.source.subscribe(new Y(this.getSubject(),this))),e.closed&&(this._connection=null,e=d.EMPTY)),e}refCount(){return q()(this)}}const K=(()=>{const e=Q.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class Y extends k{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function J(){return new S}function Z(e){for(let t in e)if(e[t]===Z)return t;throw Error("Could not find renamed property on target object.")}function X(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(X).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function ee(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const te=Z({__forward_ref__:Z});function ne(e){return e.__forward_ref__=ne,e.toString=function(){return X(this())},e}function re(e){return"function"==typeof(t=e)&&t.hasOwnProperty(te)&&t.__forward_ref__===ne?e():e;var t}class ie extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function oe(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function se(e,t){const n=t?` in ${t}`:"";throw new ie("201",`No provider for ${oe(e)} found${n}`)}function ae(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ce(e){return{providers:e.providers||[],imports:e.imports||[]}}function ue(e){return le(e,he)||le(e,fe)}function le(e,t){return e.hasOwnProperty(t)?e[t]:null}function de(e){return e&&(e.hasOwnProperty(pe)||e.hasOwnProperty(me))?e[pe]:null}const he=Z({"\u0275prov":Z}),pe=Z({"\u0275inj":Z}),fe=Z({ngInjectableDef:Z}),me=Z({ngInjectorDef:Z});var ve=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});let ge;function ye(e){const t=ge;return ge=e,t}function _e(e,t,n){const r=ue(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ve.Optional?null:void 0!==t?t:void se(X(e),"Injector")}function be(e){return{toString:e}.toString()}var we=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),ke=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const Se="undefined"!=typeof globalThis&&globalThis,Te="undefined"!=typeof window&&window,Ce="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Oe="undefined"!=typeof global&&global,Ee=Se||Oe||Te||Ce,Pe={},xe=[],Re=Z({"\u0275cmp":Z}),je=Z({"\u0275dir":Z}),Ae=Z({"\u0275pipe":Z}),Le=Z({"\u0275mod":Z}),Ie=Z({"\u0275loc":Z}),De=Z({"\u0275fac":Z}),Me=Z({__NG_ELEMENT_ID__:Z});let Ne=0;function Ve(e){return be(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===we.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||xe,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||ke.Emulated,id:"c",styles:e.styles||xe,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,o=e.pipes;return n.id+=Ne++,n.inputs=We(e.inputs,t),n.outputs=We(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Ue):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Fe):null,n})}function Ue(e){return qe(e)||function(e){return e[je]||null}(e)}function Fe(e){return function(e){return e[Ae]||null}(e)}const He={};function Be(e){const t={type:e.type,bootstrap:e.bootstrap||xe,declarations:e.declarations||xe,imports:e.imports||xe,exports:e.exports||xe,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&be(()=>{He[e.id]=e.type}),t}function We(e,t){if(null==e)return Pe;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const ze=Ve;function qe(e){return e[Re]||null}function $e(e,t){const n=e[Le]||null;if(!n&&!0===t)throw new Error(`Type ${X(e)} does not have '\u0275mod' property.`);return n}const Ge=20,Qe=10;function Ke(e){return Array.isArray(e)&&"object"==typeof e[1]}function Ye(e){return Array.isArray(e)&&!0===e[1]}function Je(e){return 0!=(8&e.flags)}function Ze(e){return 2==(2&e.flags)}function Xe(e){return 1==(1&e.flags)}function et(e){return null!==e.template}function tt(e,t){return e.hasOwnProperty(De)?e[De]:null}class nt{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function rt(){const e=ot(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Pe)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function it(e,t,n,r){const i=ot(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:Pe,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],c=s[a];o[a]=new nt(c&&c.currentValue,t,s===Pe),e[r]=t}function ot(e){return e.__ngSimpleChanges__||null}let st;function at(e){return!!e.listen}const ct={createRenderer:(e,t)=>void 0!==st?st:"undefined"!=typeof document?document:void 0};function ut(e){for(;Array.isArray(e);)e=e[0];return e}function lt(e,t){return ut(t[e.index])}function dt(e,t){return e.data[t]}function ht(e,t){const n=t[e];return Ke(n)?n:n[0]}function pt(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function ft(e){return 4==(4&e[2])}function mt(e){return 128==(128&e[2])}function vt(e,t){return null==t?null:e[t]}function gt(e){e[18]=0}function yt(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const _t={lFrame:Vt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function bt(){return _t.bindingsEnabled}function wt(){return _t.lFrame.lView}function kt(){return _t.lFrame.tView}function St(e){_t.lFrame.contextLView=e}function Tt(){let e=Ct();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ct(){return _t.lFrame.currentTNode}function Ot(e,t){const n=_t.lFrame;n.currentTNode=e,n.isParent=t}function Et(){return _t.lFrame.isParent}function Pt(){return _t.isInCheckNoChangesMode}function xt(e){_t.isInCheckNoChangesMode=e}function Rt(e,t){const n=_t.lFrame;n.bindingIndex=n.bindingRootIndex=e,jt(t)}function jt(e){_t.lFrame.currentDirectiveIndex=e}function At(){return _t.lFrame.currentQueryIndex}function Lt(e){_t.lFrame.currentQueryIndex=e}function It(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function Dt(e,t,n){if(n&ve.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&ve.Host||(r=It(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=_t.lFrame=Nt();return r.currentTNode=t,r.lView=e,!0}function Mt(e){const t=Nt(),n=e[1];_t.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Nt(){const e=_t.lFrame,t=null===e?null:e.child;return null===t?Vt(e):t}function Vt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Ut(){const e=_t.lFrame;return _t.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Ft=Ut;function Ht(){const e=Ut();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Bt(){return _t.lFrame.selectedIndex}function Wt(e){_t.lFrame.selectedIndex=e}function zt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),o&&(e.viewHooks||(e.viewHooks=[])).push(-n,o),s&&((e.viewHooks||(e.viewHooks=[])).push(n,s),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,s)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function qt(e,t,n){Qt(e,t,3,n)}function $t(e,t,n,r){(3&e[2])===n&&Qt(e,t,n,r)}function Gt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Qt(e,t,n,r){const i=null!=r?r:-1,o=t.length-1;let s=0;for(let a=void 0!==r?65535&e[18]:0;a<o;a++)if("number"==typeof t[a+1]){if(s=t[a],null!=r&&s>=r)break}else t[a]<0&&(e[18]+=65536),(s<i||-1==i)&&(Kt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function Kt(e,t,n,r){const i=n[r]<0,o=n[r+1],s=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const Yt=-1;class Jt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function Zt(e,t,n){const r=at(e);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],c=n[i++];r?e.setAttribute(t,a,c,s):t.setAttributeNS(s,a,c)}else{const s=o,a=n[++i];en(s)?r&&e.setProperty(t,s,a):r?e.setAttribute(t,s,a):t.setAttribute(s,a),i++}}return i}function Xt(e){return 3===e||4===e||6===e}function en(e){return 64===e.charCodeAt(0)}function tn(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||nn(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function nn(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const n=e[o++];if("number"==typeof n){if(n===t){s=-1;break}if(n>t){s=o-1;break}}}for(;o<e.length;){const t=e[o];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function rn(e){return e!==Yt}function on(e){return 32767&e}function sn(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let an=!0;function cn(e){const t=an;return an=e,t}let un=0;function ln(e,t){const n=hn(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,dn(r.data,e),dn(t,null),dn(r.blueprint,null));const i=pn(e,t),o=e.injectorIndex;if(rn(i)){const e=on(i),n=sn(i,t),r=n[1].data;for(let i=0;i<8;i++)t[o+i]=n[e+i]|r[e+i]}return t[o+8]=i,o}function dn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function hn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function pn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return Yt;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Yt}function fn(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Me)&&(r=n[Me]),null==r&&(r=n[Me]=un++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function mn(e,t,n){if(n&ve.Optional)return e;se(t,"NodeInjector")}function vn(e,t,n,r){if(n&ve.Optional&&void 0===r&&(r=null),0==(n&(ve.Self|ve.Host))){const i=e[9],o=ye(void 0);try{return i?i.get(t,r,n&ve.Optional):_e(t,r,n&ve.Optional)}finally{ye(o)}}return mn(r,t,n)}function gn(e,t,n,r=ve.Default,i){if(null!==e){const o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Me)?e[Me]:void 0;return"number"==typeof t?t>=0?255&t:_n:t}(n);if("function"==typeof o){if(!Dt(t,e,r))return r&ve.Host?mn(i,n,r):vn(t,n,r,i);try{const e=o();if(null!=e||r&ve.Optional)return e;se(n)}finally{Ft()}}else if("number"==typeof o){let i=null,s=hn(e,t),a=Yt,c=r&ve.Host?t[16][6]:null;for((-1===s||r&ve.SkipSelf)&&(a=-1===s?pn(e,t):t[s+8],a!==Yt&&Tn(r,!1)?(i=t[1],s=on(a),t=sn(a,t)):s=-1);-1!==s;){const e=t[1];if(Sn(o,s,e.data)){const e=bn(s,t,n,i,r,c);if(e!==yn)return e}a=t[s+8],a!==Yt&&Tn(r,t[1].data[s+8]===c)&&Sn(o,s,t)?(i=e,s=on(a),t=sn(a,t)):s=-1}}}return vn(t,n,r,i)}const yn={};function _n(){return new Cn(Tt(),wt())}function bn(e,t,n,r,i,o){const s=t[1],a=s.data[e+8],c=wn(a,s,n,null==r?Ze(a)&&an:r!=s&&0!=(3&a.type),i&ve.Host&&o===a);return null!==c?kn(t,s,c,a):yn}function wn(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,c=e.directiveStart,u=o>>20,l=i?a+u:e.directiveEnd;for(let d=r?a:a+u;d<l;d++){const e=s[d];if(d<c&&n===e||d>=c&&e.type===n)return d}if(i){const e=s[c];if(e&&et(e)&&e.type===n)return c}return null}function kn(e,t,n,r){let i=e[n];const o=t.data;if(i instanceof Jt){const s=i;s.resolving&&function(e,t){throw new ie("200",`Circular dependency in DI detected for ${e}`)}(oe(o[n]));const a=cn(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?ye(s.injectImpl):null;Dt(e,r,ve.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const r=((s=t).type.prototype.ngOnChanges&&(s.setInput=it),rt);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}var s;i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==c&&ye(c),cn(a),s.resolving=!1,Ft()}}return i}function Sn(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Tn(e,t){return!(e&ve.Self||e&ve.Host&&t)}class Cn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return gn(this._tNode,this._lView,e,void 0,t)}}const On="__parameters__";function En(e,t,n){return be(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(On)?e[On]:Object.defineProperty(e,On,{value:[]})[On];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Pn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ae({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const xn=new Pn("AnalyzeForEntryComponents"),Rn=Function;function jn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),jn(r,t)):t!==e&&t.push(r)}return t}function An(e,t){e.forEach(e=>Array.isArray(e)?An(e,t):t(e))}function Ln(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function In(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Dn={},Mn=/\n/gm,Nn="__source",Vn=Z({provide:String,useValue:Z});let Un;function Fn(e){const t=Un;return Un=e,t}function Hn(e,t=ve.Default){if(void 0===Un)throw new Error("inject() must be called from an injection context");return null===Un?_e(e,void 0,t):Un.get(e,t&ve.Optional?null:void 0,t)}function Bn(e,t=ve.Default){return(ge||Hn)(re(e),t)}function Wn(e){const t=[];for(let n=0;n<e.length;n++){const r=re(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=ve.Default;for(let t=0;t<r.length;t++){const i=r[t],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?e=i.token:n|=o:e=i}t.push(Bn(e,n))}else t.push(Bn(r))}return t}function zn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const qn=zn(En("Inject",e=>({token:e})),-1),$n=zn(En("Optional"),8),Gn=zn(En("SkipSelf"),4);function Qn(e){return e.ngDebugContext}function Kn(e){return e.ngOriginalError}function Yn(e,...t){e.error(...t)}class Jn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Yn}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?Qn(e)?Qn(e):this._findContext(Kn(e)):null}_findOriginalError(e){let t=Kn(e);for(;t&&Kn(t);)t=Kn(t);return t}}function Zn(e,t){e.__ngContext__=t}const Xn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ee))();function er(e){return e instanceof Function?e():e}var tr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});function nr(e,t){return(void 0)(e,t)}function rr(e){const t=e[3];return Ye(t)?t[3]:t}function ir(e){return sr(e[13])}function or(e){return sr(e[4])}function sr(e){for(;null!==e&&!Ye(e);)e=e[4];return e}function ar(e,t,n,r,i){if(null!=r){let o,s=!1;Ye(r)?o=r:Ke(r)&&(s=!0,r=r[0]);const a=ut(r);0===e&&null!==n?null==i?fr(t,n,a):pr(t,n,a,i||null,!0):1===e&&null!==n?pr(t,n,a,i||null,!0):2===e?function(e,t,n){const r=vr(e,t);r&&function(e,t,n,r){at(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function(e,t,n,r,i){const o=n[7];o!==ut(n)&&ar(t,e,r,o,i);for(let s=Qe;s<n.length;s++){const i=n[s];kr(i[1],i,e,t,r,o)}}(t,e,o,n,i)}}function cr(e,t,n){return at(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function ur(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,yt(i,-1)),n.splice(r,1)}function lr(e,t){if(e.length<=Qe)return;const n=Qe+t,r=e[n];if(r){const o=r[17];null!==o&&o!==e&&ur(o,r),t>0&&(e[n-1][4]=r[4]);const s=In(e,Qe+t);kr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function dr(e,t){if(!(256&t[2])){const n=t[11];at(n)&&n.destroyNode&&kr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return hr(e[1],e);for(;t;){let n=null;if(Ke(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)Ke(t)&&hr(t[1],t),t=t[3];null===t&&(t=e),Ke(t)&&hr(t[1],t),n=t&&t[4]}t=n}}(t)}}function hr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof Jt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const e=n[o+1],s="function"==typeof e?e(t):ut(t[e]),a=r[i=n[o+2]],c=n[o+3];"boolean"==typeof c?s.removeEventListener(n[o],a,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),o+=2}else{const e=r[i=n[o+1]];n[o].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&at(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&Ye(t[3])){n!==t[3]&&ur(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function pr(e,t,n,r,i){at(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function fr(e,t,n){at(e)?e.appendChild(t,n):t.appendChild(n)}function mr(e,t,n,r,i){null!==r?pr(e,t,n,r,i):fr(e,t,n)}function vr(e,t){return at(e)?e.parentNode(t):t.parentNode}function gr(e,t,n,r){const i=function(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===ke.None||t===ke.Emulated)return null}return lt(r,n)}(e,t.parent,n)}(e,r,t),o=t[11],s=function(e,t,n){return function(e,t,n){return 40&e.type?lt(e,n):null}(e,0,n)}(r.parent||t[6],0,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)mr(o,i,n[a],s,!1);else mr(o,i,n,s,!1)}function yr(e,t){if(null!==t){const n=t.type;if(3&n)return lt(t,e);if(4&n)return br(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return yr(e,n);{const n=e[t.index];return Ye(n)?br(-1,n):ut(n)}}if(32&n)return nr(t,e)()||ut(e[t.index]);{const n=_r(e,t);return null!==n?Array.isArray(n)?n[0]:yr(rr(e[16]),n):yr(e,t.next)}}return null}function _r(e,t){return null!==t?e[16][6].projection[t.projection]:null}function br(e,t){const n=Qe+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return yr(e,r)}return t[7]}function wr(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;if(s&&0===t&&(a&&Zn(ut(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)wr(e,t,n.child,r,i,o,!1),ar(t,e,i,a,o);else if(32&c){const s=nr(n,r);let c;for(;c=s();)ar(t,e,i,c,o);ar(t,e,i,a,o)}else 16&c?Sr(e,t,r,n,i,o):ar(t,e,i,a,o);n=s?n.projectionNext:n.next}}function kr(e,t,n,r,i,o){wr(n,r,e.firstChild,t,i,o,!1)}function Sr(e,t,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)ar(t,e,i,a[c],o);else wr(e,t,a,s[3],i,o,!0)}function Tr(e,t,n){at(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Cr(e,t,n){at(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Or(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const Er="ng-template";function Pr(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==Or(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function xr(e){return 4===e.type&&e.value!==Er}function Rr(e,t,n){return t===(4!==e.type||n?e.value:Er)}function jr(e,t,n){let r=4;const i=e.attrs||[],o=function(e){for(let t=0;t<e.length;t++)if(Xt(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!Rr(e,c,n)||""===c&&1===t.length){if(Ar(r))return!1;s=!0}}else{const u=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!Pr(e.attrs,u,n)){if(Ar(r))return!1;s=!0}continue}const l=Lr(8&r?"class":c,i,xr(e),n);if(-1===l){if(Ar(r))return!1;s=!0;continue}if(""!==u){let e;e=l>o?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==Or(t,u,0)||2&r&&u!==e){if(Ar(r))return!1;s=!0}}}}else{if(!s&&!Ar(r)&&!Ar(c))return!1;if(s&&Ar(c))continue;s=!1,r=c|1&r}}return Ar(r)||s}function Ar(e){return 0==(1&e)}function Lr(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Ir(e,t,n=!1){for(let r=0;r<t.length;r++)if(jr(e,t[r],n))return!0;return!1}function Dr(e,t){return e?":not("+t.trim()+")":t}function Mr(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const t=e[++n];i+="["+s+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Ar(s)||(t+=Dr(o,i),i=""),r=s,o=o||!Ar(r);n++}return""!==i&&(t+=Dr(o,i)),t}const Nr={};function Vr(e){Ur(kt(),wt(),Bt()+e,Pt())}function Ur(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&qt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&$t(t,r,0,n)}Wt(n)}function Fr(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=e.data[o];Lt(i),n.contentQueries(2,t[o],o)}}}function Hr(e,t,n,r,i,o,s,a,c,u){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,gt(l),l[3]=l[15]=e,l[8]=n,l[10]=s||e&&e[10],l[11]=a||e&&e[11],l[12]=c||e&&e[12]||null,l[9]=u||e&&e[9]||null,l[6]=o,l[16]=2==t.type?e[16]:l,l}function Br(e,t,n,r,i){let o=e.data[t];if(null===o)o=function(e,t,n,r,i){const o=Ct(),s=Et(),a=e.data[t]=function(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(e,t,n,r,i),_t.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const e=function(){const e=_t.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===e?-1:e.injectorIndex}return Ot(o,!0),o}function Wr(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function zr(e,t,n){Mt(t);try{const r=e.viewQuery;null!==r&&yi(1,r,n);const i=e.template;null!==i&&Gr(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Fr(e,t),e.staticViewQueries&&yi(2,e.viewQuery,n);const o=e.components;null!==o&&function(e,t){for(let n=0;n<t.length;n++)pi(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,Ht()}}function qr(e,t,n,r){const i=t[2];if(256==(256&i))return;Mt(t);const o=Pt();try{gt(t),_t.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Gr(e,t,n,2,r);const s=3==(3&i);if(!o)if(s){const n=e.preOrderCheckHooks;null!==n&&qt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&$t(t,n,0,null),Gt(t,0)}if(function(e){for(let t=ir(e);null!==t;t=or(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&yt(r,1),n[2]|=1024}}}(t),function(e){for(let t=ir(e);null!==t;t=or(t))for(let e=Qe;e<t.length;e++){const n=t[e],r=n[1];mt(n)&&qr(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&Fr(e,t),!o)if(s){const n=e.contentCheckHooks;null!==n&&qt(t,n)}else{const n=e.contentHooks;null!==n&&$t(t,n,1),Gt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)Wt(~r);else{const i=r,o=n[++e],s=n[++e];Rt(o,i),s(2,t[i])}}}finally{Wt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)di(e,t[n])}(t,a);const c=e.viewQuery;if(null!==c&&yi(2,c,r),!o)if(s){const n=e.viewCheckHooks;null!==n&&qt(t,n)}else{const n=e.viewHooks;null!==n&&$t(t,n,2),Gt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,yt(t[3],-1))}finally{Ht()}}function $r(e,t,n,r){const i=t[10],o=!Pt(),s=ft(t);try{o&&!s&&i.begin&&i.begin(),s&&zr(e,t,r),qr(e,t,n,r)}finally{o&&!s&&i.end&&i.end()}}function Gr(e,t,n,r,i){const o=Bt(),s=2&r;try{Wt(-1),s&&t.length>Ge&&Ur(e,t,Ge,Pt()),n(r,i)}finally{Wt(o)}}function Qr(e,t,n){bt()&&(function(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||ln(n,t),Zn(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const r=e.data[a],o=et(r);o&&ai(t,n,r);const c=kn(t,e,a,n);Zn(c,t),null!==s&&ci(0,a-i,c,r,0,s),o&&(ht(n.index,t)[8]=c)}}(e,t,n,lt(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=_t.lFrame.currentDirectiveIndex;try{Wt(o);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];jt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||ni(r,i)}}finally{Wt(-1),jt(s)}}(e,t,n))}function Kr(e,t,n=lt){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}function Yr(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Jr(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Jr(e,t,n,r,i,o,s,a,c,u){const l=Ge+r,d=l+i,h=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Nr);return n}(l,d),p="function"==typeof u?u():u;return h[1]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1}}function Zr(e,t,n,r){const i=bi(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&wi(e).push(r,i.length-1))}function Xr(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function ei(e,t,n,r){let i=!1;if(bt()){const o=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Ir(n,s.selectors,!1)&&(i||(i=[]),fn(ln(n,t),e,s.type),et(s)?(ri(e,n),i.unshift(s)):i.push(s))}return i}(e,t,n),s=null===r?null:{"":-1};if(null!==o){i=!0,oi(n,e.data.length,o.length);for(let e=0;e<o.length;e++){const t=o[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,c=Wr(e,t,o.length,null);for(let i=0;i<o.length;i++){const u=o[i];n.mergedAttrs=tn(n.mergedAttrs,u.hostAttrs),si(e,n,t,c,u),ii(c,u,s),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const l=u.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,o=[];let s=null,a=null;for(let c=t.directiveStart;c<n;c++){const e=r[c],n=e.inputs,u=null===i||xr(t)?null:ui(n,i);o.push(u),s=Xr(n,c,s),a=Xr(e.outputs,c,a)}null!==s&&(s.hasOwnProperty("class")&&(t.flags|=16),s.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=s,t.outputs=a}(e,n)}s&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new ie("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,s)}return n.mergedAttrs=tn(n.mergedAttrs,n.attrs),i}function ti(e,t,n,r,i,o){const s=o.hostBindings;if(s){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const o=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function ni(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ri(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function ii(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;et(t)&&(n[""]=e)}}function oi(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function si(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=tt(i.type)),s=new Jt(o,et(i),null);e.blueprint[r]=s,n[r]=s,ti(e,t,0,r,Wr(e,n,i.hostVars,Nr),i)}function ai(e,t,n){const r=lt(t,e),i=Yr(n),o=e[10],s=fi(e,Hr(e,i,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n),null,null));e[t.index]=s}function ci(e,t,n,r,i,o){const s=o[t];if(null!==s){const e=r.setInput;for(let t=0;t<s.length;){const i=s[t++],o=s[t++],a=s[t++];null!==e?r.setInput(n,a,i,o):n[o]=a}}}function ui(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function li(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function di(e,t){const n=ht(t,e);if(mt(n)){const e=n[1];80&n[2]?qr(e,n,e.template,n[8]):n[5]>0&&hi(n)}}function hi(e){for(let n=ir(e);null!==n;n=or(n))for(let e=Qe;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];qr(e,t,e.template,t[8])}else t[5]>0&&hi(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=ht(t[n],e);mt(r)&&r[5]>0&&hi(r)}}function pi(e,t){const n=ht(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),zr(r,n,n[8])}function fi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function mi(e){for(;e;){e[2]|=64;const t=rr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function vi(e,t,n){const r=t[10];r.begin&&r.begin();try{qr(e,t,e.template,n)}catch(i){throw ki(t,i),i}finally{r.end&&r.end()}}function gi(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=pt(n),i=r[1];$r(i,r,i.template,n)}}(e[8])}function yi(e,t,n){Lt(0),t(e,n)}const _i=(()=>Promise.resolve(null))();function bi(e){return e[7]||(e[7]=[])}function wi(e){return e.cleanup||(e.cleanup=[])}function ki(e,t){const n=e[9],r=n?n.get(Jn,null):null;r&&r.handleError(t)}function Si(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],c=t[s],u=e.data[s];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function Ti(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const e=t[s];"number"==typeof e?o=e:1==o?i=ee(i,e):2==o&&(r=ee(r,e+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const Ci=new Pn("INJECTOR",-1);class Oi{get(e,t=Dn){if(t===Dn){const t=new Error(`NullInjectorError: No provider for ${X(e)}!`);throw t.name="NullInjectorError",t}return t}}const Ei=new Pn("Set Injector scope."),Pi={},xi={},Ri=[];let ji;function Ai(){return void 0===ji&&(ji=new Oi),ji}function Li(e,t=null,n=null,r){return new Ii(e,n,t||Ai(),r)}class Ii{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&An(t,n=>this.processProvider(n,e,t)),An([e],e=>this.processInjectorType(e,[],i)),this.records.set(Ci,Mi(void 0,this));const o=this.records.get(Ei);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:X(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Dn,n=ve.Default){this.assertNotDestroyed();const r=Fn(this);try{if(!(n&ve.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(i=e)||"object"==typeof i&&i instanceof Pn)&&ue(e);t=n&&this.injectableDefInScope(n)?Mi(Di(e),Pi):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&ve.Self?Ai():this.parent).get(e,t=n&ve.Optional&&t===Dn?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(X(e)),r)throw o;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t[Nn]&&i.unshift(t[Nn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=X(t);if(Array.isArray(t))i=t.map(X).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):X(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Mn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{Fn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(X(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=re(e)))return!1;let r=de(e);const i=null==r&&e.ngModule||void 0,o=void 0===i?e:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=de(i)),null==r)return!1;if(null!=r.imports&&!s){let e;n.push(o);try{An(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];An(r,e=>this.processProvider(e,n,r||Ri))}}this.injectorDefTypes.add(o);const a=tt(o)||(()=>new o);this.records.set(o,Mi(a,Pi));const c=r.providers;if(null!=c&&!s){const t=e;An(c,e=>this.processProvider(e,t,c))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=Vi(e=re(e))?e:re(e&&e.provide);const i=function(e,t,n){return Ni(e)?Mi(void 0,e.useValue):Mi(function(e,t,n){let r;if(Vi(e)){const t=re(e);return tt(t)||Di(t)}if(Ni(e))r=()=>re(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...Wn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>Bn(re(e.useExisting));else{const t=re(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return tt(t)||Di(t);r=()=>new t(...Wn(e.deps))}var i;return r}(e),Pi)}(e);if(Vi(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=Mi(void 0,Pi,!0),t.factory=()=>Wn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===Pi&&(t.value=xi,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}function Di(e){const t=ue(e),n=null!==t?t.factory:tt(e);if(null!==n)return n;if(e instanceof Pn)throw new Error(`Token ${X(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${X(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[he]||e[fe]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Mi(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Ni(e){return null!==e&&"object"==typeof e&&Vn in e}function Vi(e){return"function"==typeof e}const Ui=function(e,t,n){return function(e,t=null,n=null,r){const i=Li(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let Fi=(()=>{class e{static create(e,t){return Array.isArray(e)?Ui(e,t,""):Ui(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=Dn,e.NULL=new Oi,e.\u0275prov=ae({token:e,providedIn:"any",factory:()=>Bn(Ci)}),e.__NG_ELEMENT_ID__=-1,e})();function Hi(e,t){zt(pt(e)[1],Tt())}let Bi=null;function Wi(){if(!Bi){const e=Ee.Symbol;if(e&&e.iterator)Bi=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Bi=n)}}}return Bi}function zi(e){return!!qi(e)&&(Array.isArray(e)||!(e instanceof Map)&&Wi()in e)}function qi(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function $i(e,t,n,r,i,o,s,a){const c=wt(),u=kt(),l=e+Ge,d=u.firstCreatePass?function(e,t,n,r,i,o,s,a,c){const u=t.consts,l=Br(t,e,4,s||null,vt(u,a));ei(t,n,l,vt(u,c)),zt(t,l);const d=l.tViews=Jr(2,l,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,l),d.queries=t.queries.embeddedTView(l)),l}(l,u,c,t,n,r,i,o,s):u.data[l];Ot(d,!1);const h=c[11].createComment("");gr(u,c,h,d),Zn(h,c),fi(c,c[l]=li(h,c,h,d)),Xe(d)&&Qr(u,c,d),null!=s&&Kr(c,d,a)}function Gi(e,t=ve.Default){const n=wt();return null===n?Bn(e,t):gn(Tt(),n,re(e),t)}function Qi(e,t,n){const r=wt();return function(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}(r,_t.lFrame.bindingIndex++,t)&&function(e,t,n,r,i,o,s,a){const c=lt(t,n);let u,l=t.inputs;var d;null!=l&&(u=l[r])?(Si(e,n,u,r,i),Ze(t)&&function(e,t){const n=ht(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(d=r)?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d,i=null!=s?s(i,t.value||"",r):i,at(o)?o.setProperty(c,r,i):en(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}(kt(),function(){const e=_t.lFrame;return dt(e.tView,e.selectedIndex)}(),r,e,t,r[11],n),Qi}function Ki(e,t,n,r,i){const o=i?"class":"style";Si(e,n,t.inputs[o],o,r)}function Yi(e,t,n,r){const i=wt(),o=kt(),s=Ge+e,a=i[11],c=i[s]=cr(a,t,_t.lFrame.currentNamespace),u=o.firstCreatePass?function(e,t,n,r,i,o,s){const a=t.consts,c=Br(t,e,2,i,vt(a,o));return ei(t,n,c,vt(a,s)),null!==c.attrs&&Ti(c,c.attrs,!1),null!==c.mergedAttrs&&Ti(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(s,o,i,0,t,n,r):o.data[s];Ot(u,!0);const l=u.mergedAttrs;null!==l&&Zt(a,c,l);const d=u.classes;null!==d&&Cr(a,c,d);const h=u.styles;null!==h&&Tr(a,c,h),64!=(64&u.flags)&&gr(o,i,c,u),0===_t.lFrame.elementDepthCount&&Zn(c,i),_t.lFrame.elementDepthCount++,Xe(u)&&(Qr(o,i,u),function(e,t,n){if(Je(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}(o,u,i)),null!==r&&Kr(i,u)}function Ji(){let e=Tt();Et()?_t.lFrame.isParent=!1:(e=e.parent,Ot(e,!1));const t=e;_t.lFrame.elementDepthCount--;const n=kt();n.firstCreatePass&&(zt(n,e),Je(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Ki(n,t,wt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Ki(n,t,wt(),t.stylesWithoutHost,!1)}function Zi(e,t,n,r){Yi(e,t,n,r),Ji()}function Xi(){return wt()}function eo(e){return!!e&&"function"==typeof e.then}function to(e,t,n=!1,r){const i=wt(),o=kt(),s=Tt();return function(e,t,n,r,i,o,s=!1,a){const c=Xe(r),u=e.firstCreatePass&&wi(e),l=bi(t);let d=!0;if(3&r.type){const h=lt(r,t),p=a?a(h):Pe,f=p.target||h,m=l.length,v=a?e=>a(ut(e[r.index])).target:r.index;if(at(n)){let s=null;if(!a&&c&&(s=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const e=i[o];if(e===n&&i[o+1]===r){const e=t[7],n=i[o+2];return e.length>n?e[n]:null}"string"==typeof e&&(o+=2)}return null}(e,t,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,d=!1;else{o=ro(r,t,0,o,!1);const e=n.listen(p.name||f,i,o);l.push(o,e),u&&u.push(i,v,m,m+1)}}else o=ro(r,t,0,o,!0),f.addEventListener(i,o,s),l.push(o),u&&u.push(i,v,m,s)}else o=ro(r,t,0,o,!1);const h=r.outputs;let p;if(d&&null!==h&&(p=h[i])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(o),s=l.length;l.push(o,e),u&&u.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,e,t,n,r),to}function no(e,t,n,r){try{return!1!==n(r)}catch(i){return ki(e,i),!1}}function ro(e,t,n,r,i){return function n(o){if(o===Function)return r;const s=2&e.flags?ht(e.index,t):t;0==(32&t[2])&&mi(s);let a=no(t,0,r,o),c=n.__ngNextListenerFn__;for(;c;)a=no(t,0,c,o)&&a,c=c.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function io(e=1){return function(e){return(_t.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,_t.lFrame.contextLView))[8]}(e)}function oo(e,t=""){const n=wt(),r=kt(),i=e+Ge,o=r.firstCreatePass?Br(r,i,1,t,null):r.data[i],s=n[i]=function(e,t){return at(e)?e.createText(t):e.createTextNode(t)}(n[11],t);gr(r,n,s,o),Ot(o,!1)}const so=void 0;var ao=["en",[["a","p"],["AM","PM"],so],[["AM","PM"],so,so],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],so,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],so,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",so,"{1} 'at' {0}",so],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let co={};function uo(e){return e in co||(co[e]=Ee.ng&&Ee.ng.common&&Ee.ng.common.locales&&Ee.ng.common.locales[e]),co[e]}var lo=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});const ho="en-US";let po=ho;function fo(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(po=e.toLowerCase().replace(/_/g,"-"))}class mo{}class vo{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${X(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let go=(()=>{class e{}return e.NULL=new vo,e})();function yo(...e){}function _o(e,t){return new wo(lt(e,t))}const bo=function(){return _o(Tt(),wt())};let wo=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=bo,e})();function ko(e){return e instanceof wo?e.nativeElement:e}class So{}let To=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Co(),e})();const Co=function(){const e=wt(),t=ht(Tt().index,e);return function(e){return e[11]}(Ke(t)?t:e)};let Oo=(()=>{class e{}return e.\u0275prov=ae({token:e,providedIn:"root",factory:()=>null}),e})();class Eo{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Po=new Eo("11.2.14");class xo{constructor(){}supports(e){return zi(e)}create(e){return new jo(e)}}const Ro=(e,t)=>t;class jo{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Ro}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const o=!n||t&&t.currentIndex<Do(n,r,i)?t:n,s=Do(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);const e=s-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;t<=o&&o<e&&(i[n]=r+1)}i[o.previousIndex]=t-e}}s!==a&&e(o,s,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!zi(e))throw new Error(`Error trying to diff '${X(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),o=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Wi()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),o=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new Ao(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Io),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Io),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Ao{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Lo{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Io{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Lo,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Do(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class Mo{constructor(){}supports(e){return e instanceof Map||qi(e)}create(){return new No}}class No{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||qi(e)))throw new Error(`Error trying to diff '${X(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Vo(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Vo{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Uo(){return new Fo([new xo])}let Fo=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Uo()),deps:[[e,new Gn,new $n]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=ae({token:e,providedIn:"root",factory:Uo}),e})();function Ho(){return new Bo([new Mo])}let Bo=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Ho()),deps:[[e,new Gn,new $n]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=ae({token:e,providedIn:"root",factory:Ho}),e})();function Wo(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(ut(o)),Ye(o))for(let e=Qe;e<o.length;e++){const t=o[e],n=t[1].firstChild;null!==n&&Wo(t[1],t,n,r)}const s=n.type;if(8&s)Wo(e,t,n.child,r);else if(32&s){const e=nr(n,t);let i;for(;i=e();)r.push(i)}else if(16&s){const e=_r(t,n);if(Array.isArray(e))r.push(...e);else{const n=rr(t[16]);Wo(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class zo{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Wo(t,e,t.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Ye(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(lr(e,n),In(t,n))}this._attachedToViewContainer=!1}dr(this._lView[1],this._lView)}onDestroy(e){Zr(this._lView[1],this._lView,null,e)}markForCheck(){mi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){vi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){xt(!0);try{vi(e,t,n)}finally{xt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,kr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class qo extends zo{constructor(e){super(e),this._view=e}detectChanges(){gi(this._view)}checkNoChanges(){!function(e){xt(!0);try{gi(e)}finally{xt(!1)}}(this._view)}get context(){return null}}const $o=function(e=!1){return function(e,t,n){if(!n&&Ze(e)){const n=ht(e.index,t);return new zo(n,n)}return 47&e.type?new zo(t[16],t):null}(Tt(),wt(),e)};let Go=(()=>{class e{}return e.__NG_ELEMENT_ID__=$o,e.__ChangeDetectorRef__=!0,e})();const Qo=[new Mo],Ko=new Fo([new xo]),Yo=new Bo(Qo),Jo=function(){return ts(Tt(),wt())};let Zo=(()=>{class e{}return e.__NG_ELEMENT_ID__=Jo,e})();const Xo=Zo,es=class extends Xo{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Hr(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),zr(t,n,e),new zo(n)}};function ts(e,t){return 4&e.type?new es(t,e,_o(e,t)):null}class ns{}class rs{}const is=function(){return ls(Tt(),wt())};let os=(()=>{class e{}return e.__NG_ELEMENT_ID__=is,e})();const ss=os,as=class extends ss{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return _o(this._hostTNode,this._hostLView)}get injector(){return new Cn(this._hostTNode,this._hostLView)}get parentInjector(){const e=pn(this._hostTNode,this._hostLView);if(rn(e)){const t=sn(e,this._hostLView),n=on(e);return new Cn(t[1].data[n+8],t)}return new Cn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=cs(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Qe}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const o=n||this.parentInjector;if(!i&&null==e.ngModule&&o){const e=o.get(ns,null);e&&(i=e)}const s=e.create(o,r,void 0,i);return this.insert(s.hostView,t),s}insert(e,t){const n=e._lView,r=n[1];if(Ye(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new as(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),o=this._lContainer;!function(e,t,n,r){const i=Qe+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-Qe?(t[4]=n[i],Ln(n,Qe+r,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,o,i);const s=br(i,o),a=n[11],c=vr(a,o[7]);return null!==c&&function(e,t,n,r,i,o){r[0]=i,r[6]=t,kr(e,r,n,1,i,o)}(r,o[6],a,n,c,s),e.attachToViewContainerRef(),Ln(us(o),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=cs(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=lr(this._lContainer,t);n&&(In(us(this._lContainer),t),dr(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=lr(this._lContainer,t);return n&&null!=In(us(this._lContainer),t)?new zo(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function cs(e){return e[8]}function us(e){return e[8]||(e[8]=[])}function ls(e,t){let n;const r=t[e.index];if(Ye(r))n=r;else{let i;if(8&e.type)i=ut(r);else{const n=t[11];i=n.createComment("");const r=lt(e,t);pr(n,vr(n,r),i,function(e,t){return at(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=li(r,t,i,e),fi(t,n)}return new as(n,e,t)}const ds={};class hs extends go{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=qe(e);return new ms(t,this.ngModule)}}function ps(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const fs=new Pn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Xn});class ms extends mo{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(Mr).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return ps(this.componentDef.inputs)}get outputs(){return ps(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const o=e.get(n,ds,i);return o!==ds||r===ds?o:t.get(n,r,i)}}}(e,r.injector):e,o=i.get(So,ct),s=i.get(Oo,null),a=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(e,t,n){if(at(e))return e.selectRootElement(t,n===ke.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):cr(o.createRenderer(null,this.componentDef),c,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,d={components:[],scheduler:Xn,clean:_i,playerHandler:null,flags:0},h=Jr(0,null,null,1,0,null,null,null,null,null),p=Hr(null,h,d,l,null,null,o,a,s,i);let f,m;Mt(p);try{const e=function(e,t,n,r,i,o){const s=n[1];n[20]=e;const a=Br(s,20,2,"#host",null),c=a.mergedAttrs=t.hostAttrs;null!==c&&(Ti(a,c,!0),null!==e&&(Zt(i,e,c),null!==a.classes&&Cr(i,e,a.classes),null!==a.styles&&Tr(i,e,a.styles)));const u=r.createRenderer(e,t),l=Hr(n,Yr(t),null,t.onPush?64:16,n[20],a,r,u,null,null);return s.firstCreatePass&&(fn(ln(a,n),s,t.type),ri(s,a),oi(a,n.length,1)),fi(n,l),n[20]=l}(u,this.componentDef,p,o,a);if(u)if(n)Zt(a,u,["ng-version",Po.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!Ar(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&Zt(a,u,e),t&&t.length>0&&Cr(a,u,t.join(" "))}if(m=dt(h,Ge),void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}f=function(e,t,n,r,i){const o=n[1],s=function(e,t,n){const r=Tt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),si(e,r,t,Wr(e,t,1,null),n));const i=kn(t,e,r.directiveStart,r);Zn(i,t);const o=lt(r,t);return o&&Zn(o,t),i}(o,n,t);if(r.components.push(s),e[8]=s,i&&i.forEach(e=>e(s,t)),t.contentQueries){const e=Tt();t.contentQueries(1,s,e.directiveStart)}const a=Tt();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Wt(a.index),ti(n[1],a,0,a.directiveStart,a.directiveEnd,t),ni(t,s)),s}(e,this.componentDef,p,d,[Hi]),zr(h,p,null)}finally{Ht()}return new vs(this.componentType,f,_o(m,p),p,m)}}class vs extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new qo(r),this.componentType=e}get injector(){return new Cn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const gs=new Map;class ys extends ns{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new hs(this);const n=$e(e),r=e[Ie]||null;r&&fo(r),this._bootstrapComponents=er(n.bootstrap),this._r3Injector=Li(e,t,[{provide:ns,useValue:this},{provide:go,useValue:this.componentFactoryResolver}],X(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Fi.THROW_IF_NOT_FOUND,n=ve.Default){return e===Fi||e===ns||e===Ci?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class _s extends rs{constructor(e){super(),this.moduleType=e,null!==$e(e)&&function(e){const t=new Set;!function e(n){const r=$e(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${X(t)} vs ${X(t.name)}`)}(i,gs.get(i),n),gs.set(i,n));const o=er(r.imports);for(const s of o)t.has(s)||(t.add(s),e(s))}(e)}(e)}create(e){return new ys(this.moduleType,e)}}function bs(e){return t=>{setTimeout(e,void 0,t)}}const ws=class extends S{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,i,o;let s=e,a=t||(()=>null),c=n;if(e&&"object"==typeof e){const t=e;s=null===(r=t.next)||void 0===r?void 0:r.bind(t),a=null===(i=t.error)||void 0===i?void 0:i.bind(t),c=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(a=bs(a),s&&(s=bs(s)),c&&(c=bs(c)));const u=super.subscribe({next:s,error:a,complete:c});return e instanceof d&&e.add(u),u}};function ks(){return this._results[Wi()]()}class Ss{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Wi(),n=Ss.prototype;n[t]||(n[t]=ks)}get changes(){return this._changes||(this._changes=new ws)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=jn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ts{constructor(e){this.queryList=e,this.matches=null}clone(){return new Ts(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cs{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new Cs(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Is(e,t).matches&&this.queries[t].setDirty()}}class Os{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class Es{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new Es(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Ps{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Ps(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,xs(t,i)),this.matchTNodeWithReadOption(e,t,wn(t,e,i,!1,!1))}else n===Zo?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,wn(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===wo||r===os||r===Zo&&4&t.type)this.addMatch(t.index,-2);else{const n=wn(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function xs(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function Rs(e,t,n,r){return-1===n?function(e,t){return 11&e.type?_o(e,t):4&e.type?ts(e,t):null}(t,e):-2===n?function(e,t,n){return n===wo?_o(t,e):n===Zo?ts(t,e):n===os?ls(t,e):void 0}(e,t,r):kn(e,e[1],n,t)}function js(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,o=n.matches,s=[];for(let e=0;e<o.length;e+=2){const i=o[e];s.push(i<0?null:Rs(t,r[i],o[e+1],n.metadata.read))}i.matches=s}return i.matches}function As(e,t,n,r){const i=e.queries.getByIndex(n),o=i.matches;if(null!==o){const s=js(e,t,i,n);for(let e=0;e<o.length;e+=2){const n=o[e];if(n>0)r.push(s[e/2]);else{const i=o[e+1],s=t[-n];for(let e=Qe;e<s.length;e++){const t=s[e];t[17]===t[3]&&As(t[1],t,i,r)}if(null!==s[9]){const e=s[9];for(let t=0;t<e.length;t++){const n=e[t];As(n[1],n,i,r)}}}}}return r}function Ls(e){const t=wt(),n=kt(),r=At();Lt(r+1);const i=Is(n,r);if(e.dirty&&ft(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?As(n,t,r,[]):js(n,t,i,r);e.reset(o,ko),e.notifyOnChanges()}return!0}return!1}function Is(e,t){return e.queries.getByIndex(t)}const Ds=new Pn("Application Initializer");let Ms=(()=>{class e{constructor(e){this.appInits=e,this.resolve=yo,this.reject=yo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();eo(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Bn(Ds,8))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const Ns=new Pn("AppId"),Vs={provide:Ns,useFactory:function(){return`${Us()}${Us()}${Us()}`},deps:[]};function Us(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Fs=new Pn("Platform Initializer"),Hs=new Pn("Platform ID"),Bs=new Pn("appBootstrapListener");let Ws=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const zs=new Pn("LocaleId"),qs=new Pn("DefaultCurrencyCode");class $s{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Gs=function(e){return new _s(e)},Qs=Gs,Ks=function(e){return Promise.resolve(Gs(e))},Ys=function(e){const t=Gs(e),n=er($e(e).declarations).reduce((e,t)=>{const n=qe(t);return n&&e.push(new ms(n)),e},[]);return new $s(t,n)},Js=Ys,Zs=function(e){return Promise.resolve(Ys(e))};let Xs=(()=>{class e{constructor(){this.compileModuleSync=Qs,this.compileModuleAsync=Ks,this.compileModuleAndAllComponentsSync=Js,this.compileModuleAndAllComponentsAsync=Zs}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const ea=(()=>Promise.resolve(0))();function ta(e){"undefined"==typeof Zone?ea.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class na{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ws(!1),this.onMicrotaskEmpty=new ws(!1),this.onStable=new ws(!1),this.onError=new ws(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=Ee.requestAnimationFrame,t=Ee.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ee,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,oa(e),ia(e)},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),oa(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return sa(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),aa(e)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return sa(e),n.invoke(i,o,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),aa(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,oa(e),ia(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!na.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(na.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,ra,yo,yo);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const ra={};function ia(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function oa(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function sa(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function aa(e){e._nesting--,ia(e)}class ca{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ws,this.onMicrotaskEmpty=new ws,this.onStable=new ws,this.onError=new ws}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let ua=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{na.assertNotInAngularZone(),ta(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ta(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(Bn(na))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),la=(()=>{class e{constructor(){this._applications=new Map,pa.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return pa.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();class da{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let ha,pa=new da,fa=!0,ma=!1;const va=new Pn("AllowMultipleToken");class ga{constructor(e,t){this.name=e,this.token=t}}function ya(e,t,n=[]){const r=`Platform: ${t}`,i=new Pn(r);return(t=[])=>{let o=_a();if(!o||o.injector.get(va,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:Ei,useValue:"platform"});!function(e){if(ha&&!ha.destroyed&&!ha.injector.get(va,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ha=e.get(ba);const t=e.get(Fs,null);t&&t.forEach(e=>e())}(Fi.create({providers:e,name:r}))}return function(e){const t=_a();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function _a(){return ha&&!ha.destroyed?ha:null}let ba=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new ca:("zone.js"===e?void 0:e)||new na({enableLongStackTrace:(ma=!0,fa),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:na,useValue:n}];return n.run(()=>{const t=Fi.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),o=i.injector.get(Jn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{o.handleError(e)}});i.onDestroy(()=>{Sa(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return eo(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,n,()=>{const e=i.injector.get(Ms);return e.runInitializers(),e.donePromise.then(()=>(fo(i.injector.get(zs,ho)||ho),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=wa({},t);return function(e,t,n){const r=new _s(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(ka);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${X(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Bn(Fi))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();function wa(e,t){return Array.isArray(t)?t.reduce(wa,e):Object.assign(Object.assign({},e),t)}let ka=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),s=new y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{na.assertNotInAngularZone(),ta(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{na.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return C(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof y?e[0]:W(t)(z(e,n))}(o,s.pipe(e=>{return q()((t=J,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,K);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof mo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ns),i=n.create(Fi.NULL,[],t||n.selector,r),o=i.location.nativeElement,s=i.injector.get(ua,null),a=s&&i.injector.get(la);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Sa(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Sa(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Bs,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Bn(na),Bn(Fi),Bn(Jn),Bn(go),Bn(Ms))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();function Sa(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Ta{}class Ca{}const Oa={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ea=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Oa}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n("zn8P")(t).then(e=>e[r]).then(e=>Pa(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>Pa(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(Bn(Xs),Bn(Ca,8))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();function Pa(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const xa=ya(null,"core",[{provide:Hs,useValue:"unknown"},{provide:ba,deps:[Fi]},{provide:la,deps:[]},{provide:Ws,deps:[]}]),Ra=[{provide:ka,useClass:ka,deps:[na,Fi,Jn,go,Ms]},{provide:fs,deps:[na],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Ms,useClass:Ms,deps:[[new $n,Ds]]},{provide:Xs,useClass:Xs,deps:[]},Vs,{provide:Fo,useFactory:function(){return Ko},deps:[]},{provide:Bo,useFactory:function(){return Yo},deps:[]},{provide:zs,useFactory:function(e){return fo(e=e||"undefined"!=typeof $localize&&$localize.locale||ho),e},deps:[[new qn(zs),new $n,new Gn]]},{provide:qs,useValue:"USD"}];let ja=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(Bn(ka))},e.\u0275mod=Be({type:e}),e.\u0275inj=ce({providers:Ra}),e})(),Aa=null;function La(){return Aa}const Ia=new Pn("DocumentToken");let Da=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({factory:Ma,token:e,providedIn:"platform"}),e})();function Ma(){return Bn(Va)}const Na=new Pn("Location Initialized");let Va=(()=>{class e extends Da{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=La().getLocation(),this._history=La().getHistory()}getBaseHrefFromDOM(){return La().getBaseHref(this._doc)}onPopState(e){La().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){La().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){Ua()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){Ua()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Bn(Ia))},e.\u0275prov=ae({factory:Fa,token:e,providedIn:"platform"}),e})();function Ua(){return!!window.history.pushState}function Fa(){return new Va(Bn(Ia))}function Ha(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Ba(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Wa(e){return e&&"?"!==e[0]?"?"+e:e}let za=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({factory:qa,token:e,providedIn:"root"}),e})();function qa(e){const t=Bn(Ia).location;return new Ga(Bn(Da),t&&t.origin||"")}const $a=new Pn("appBaseHref");let Ga=(()=>{class e extends za{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Ha(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+Wa(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+Wa(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+Wa(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(Bn(Da),Bn($a,8))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),Qa=(()=>{class e extends za{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=Ha(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+Wa(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+Wa(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(Bn(Da),Bn($a,8))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),Ka=(()=>{class e{constructor(e,t){this._subject=new ws,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=Ba(Ja(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+Wa(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Ja(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Wa(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Wa(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(Bn(za),Bn(Da))},e.normalizeQueryParams=Wa,e.joinWithSlash=Ha,e.stripTrailingSlash=Ba,e.\u0275prov=ae({factory:Ya,token:e,providedIn:"root"}),e})();function Ya(){return new Ka(Bn(za),Bn(Da))}function Ja(e){return e.replace(/\/index.html$/,"")}var Za=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({});class Xa{}let ec=(()=>{class e extends Xa{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=uo(t);if(n)return n;const r=t.split("-")[0];if(n=uo(r),n)return n;if("en"===r)return ao;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[lo.PluralCase]}(t||this.locale)(e)){case Za.Zero:return"zero";case Za.One:return"one";case Za.Two:return"two";case Za.Few:return"few";case Za.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(Bn(zs))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();function tc(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}let nc=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new rc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ic("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ic("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(Gi(os),Gi(Zo))},e.\u0275dir=ze({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class rc{constructor(){this.$implicit=null,this.ngIf=null}}function ic(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${X(t)}'.`)}let oc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Be({type:e}),e.\u0275inj=ce({providers:[{provide:Xa,useClass:ec}]}),e})(),sc=(()=>{class e{}return e.\u0275prov=ae({token:e,providedIn:"root",factory:()=>new ac(Bn(Ia),window)}),e})();class ac{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=cc(this.window.history)||cc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function cc(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class uc extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new uc,Aa||(Aa=e)}getProperty(e,t){return e[t]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=dc||(dc=document.querySelector("base"),dc)?dc.getAttribute("href"):null;return null==t?null:(n=t,lc||(lc=document.createElement("a")),lc.setAttribute("href",n),"/"===lc.pathname.charAt(0)?lc.pathname:"/"+lc.pathname);var n}resetBaseElement(){dc=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return tc(document.cookie,e)}}let lc,dc=null;const hc=new Pn("TRANSITION_ID"),pc=[{provide:Ds,useFactory:function(e,t,n){return()=>{n.get(Ms).donePromise.then(()=>{const n=La();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[hc,Ia,Fi],multi:!0}];class fc{static init(){var e;e=new fc,pa=e}addToWindow(e){Ee.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Ee.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ee.getAllAngularRootElements=()=>e.getAllRootElements(),Ee.frameworkStabilizers||(Ee.frameworkStabilizers=[]),Ee.frameworkStabilizers.push(e=>{const t=Ee.getAllAngularTestabilities();let n=t.length,r=!1;const i=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?La().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const mc=new Pn("EventManagerPlugins");let vc=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(Bn(mc),Bn(na))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();class gc{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=La().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let yc=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),_c=(()=>{class e extends yc{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(bc),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(bc))}}return e.\u0275fac=function(t){return new(t||e)(Bn(Ia))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();function bc(e){La().remove(e)}const wc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},kc=/%COMP%/g;function Sc(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?Sc(e,i,n):(i=i.replace(kc,e),n.push(i))}return n}function Tc(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Cc=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Oc(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case ke.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new Ec(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case ke.ShadowDom:return new Pc(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Sc(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Bn(vc),Bn(_c),Bn(Ns))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();class Oc{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(wc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=wc[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=wc[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(tr.DashCase|tr.Important)?e.style.setProperty(t,n,r&tr.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&tr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Tc(n)):this.eventManager.addEventListener(e,t,Tc(n))}}class Ec extends Oc{constructor(e,t,n,r){super(e),this.component=n;const i=Sc(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(kc,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(kc,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class Pc extends Oc{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Sc(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const e=document.createElement("style");e.textContent=i[o],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let xc=(()=>{class e extends gc{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(Bn(Ia))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const Rc=["alt","control","meta","shift"],jc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ac={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Lc={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Ic=(()=>{class e extends gc{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>La().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let o="";if(Rc.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Ac.hasOwnProperty(t)&&(t=Ac[t]))}return jc[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Rc.forEach(r=>{r!=n&&(0,Lc[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(Bn(Ia))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const Dc=ya(xa,"browser",[{provide:Hs,useValue:"browser"},{provide:Fs,useValue:function(){uc.makeCurrent(),fc.init()},multi:!0},{provide:Ia,useFactory:function(){return function(e){st=e}(document),document},deps:[]}]),Mc=[[],{provide:Ei,useValue:"root"},{provide:Jn,useFactory:function(){return new Jn},deps:[]},{provide:mc,useClass:xc,multi:!0,deps:[Ia,na,Hs]},{provide:mc,useClass:Ic,multi:!0,deps:[Ia]},[],{provide:Cc,useClass:Cc,deps:[vc,_c,Ns]},{provide:So,useExisting:Cc},{provide:yc,useExisting:_c},{provide:_c,useClass:_c,deps:[Ia]},{provide:ua,useClass:ua,deps:[na]},{provide:vc,useClass:vc,deps:[mc,na]},[]];let Nc=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:Ns,useValue:t.appId},{provide:hc,useExisting:Ns},pc]}}}return e.\u0275fac=function(t){return new(t||e)(Bn(e,12))},e.\u0275mod=Be({type:e}),e.\u0275inj=ce({providers:Mc,imports:[oc,ja]}),e})();function Vc(...e){let t=e[e.length-1];return C(t)?(e.pop(),D(e,t)):z(e)}function Uc(e,t){return F(e,t,1)}function Fc(e,t){return function(n){return n.lift(new Hc(e,t))}}"undefined"!=typeof window&&window;class Hc{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Bc(e,this.predicate,this.thisArg))}}class Bc extends f{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}class Wc{}class zc{}class qc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),i=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof qc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new qc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof qc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const i=e.value;if(i){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===i.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class $c{encodeKey(e){return Gc(e)}encodeValue(e){return Gc(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function Gc(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Qc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new $c,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(e=>{const r=e.indexOf("="),[i,o]=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(e=>{t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Qc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(e.value);-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function Kc(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Yc(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Jc(e){return"undefined"!=typeof FormData&&e instanceof FormData}class Zc{constructor(e,t,n,r){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new qc),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new Qc,this.urlWithParams=t}serializeBody(){return null===this.body?null:Kc(this.body)||Yc(this.body)||Jc(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Jc(this.body)?null:Yc(this.body)?this.body.type||null:Kc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),a)),e.setParams&&(c=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),c)),new Zc(t,n,i,{params:c,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Xc=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({});class eu{constructor(e,t=200,n="OK"){this.headers=e.headers||new qc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class tu extends eu{constructor(e={}){super(e),this.type=Xc.ResponseHeader}clone(e={}){return new tu({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class nu extends eu{constructor(e={}){super(e),this.type=Xc.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new nu({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ru extends eu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function iu(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let ou=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof Zc)r=e;else{let i,o;i=n.headers instanceof qc?n.headers:new qc(n.headers),n.params&&(o=n.params instanceof Qc?n.params:new Qc({fromObject:n.params})),r=new Zc(e,t,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Vc(r).pipe(Uc(e=>this.handler.handle(e)));if(e instanceof Zc||"events"===n.observe)return i;const o=i.pipe(Fc(e=>e instanceof nu));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(O(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return o.pipe(O(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return o.pipe(O(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return o.pipe(O(e=>e.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new Qc).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,iu(n,t))}post(e,t,n={}){return this.request("POST",e,iu(n,t))}put(e,t,n={}){return this.request("PUT",e,iu(n,t))}}return e.\u0275fac=function(t){return new(t||e)(Bn(Wc))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();class su{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const au=new Pn("HTTP_INTERCEPTORS");let cu=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const uu=/^\)\]\}',?\n/;class lu{}let du=(()=>{class e{constructor(){}build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),hu=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new y(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const r=e.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const t=1223===n.status?204:n.status,r=n.statusText||"OK",o=new qc(n.getAllResponseHeaders()),s=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return i=new tu({headers:o,status:t,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),c=null;204!==i&&(c=void 0===n.response?n.responseText:n.response),0===i&&(i=c?200:0);let u=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof c){const e=c;c=c.replace(uu,"");try{c=""!==c?JSON.parse(c):null}catch(l){c=e,u&&(u=!1,c={error:l,text:c})}}u?(t.next(new nu({body:c,headers:r,status:i,statusText:s,url:a||void 0})),t.complete()):t.error(new ru({error:c,headers:r,status:i,statusText:s,url:a||void 0}))},a=e=>{const{url:r}=o(),i=new ru({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});t.error(i)};let c=!1;const u=r=>{c||(t.next(o()),c=!0);let i={type:Xc.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===e.responseType&&n.responseText&&(i.partialText=n.responseText),t.next(i)},l=e=>{let n={type:Xc.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),e.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),t.next({type:Xc.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),e.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(Bn(lu))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const pu=new Pn("XSRF_COOKIE_NAME"),fu=new Pn("XSRF_HEADER_NAME");class mu{}let vu=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=tc(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(Bn(Ia),Bn(Hs),Bn(pu))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),gu=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(Bn(mu),Bn(fu))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),yu=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(au,[]);this.chain=e.reduceRight((e,t)=>new su(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(Bn(zc),Bn(Fi))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),_u=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:gu,useClass:cu}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:pu,useValue:t.cookieName}:[],t.headerName?{provide:fu,useValue:t.headerName}:[]]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Be({type:e}),e.\u0275inj=ce({providers:[gu,{provide:au,useExisting:gu,multi:!0},{provide:mu,useClass:vu},{provide:pu,useValue:"XSRF-TOKEN"},{provide:fu,useValue:"X-XSRF-TOKEN"}]}),e})(),bu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Be({type:e}),e.\u0275inj=ce({providers:[ou,{provide:Wc,useClass:yu},hu,{provide:zc,useExisting:hu},du,{provide:lu,useExisting:du}],imports:[[_u.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})();function wu(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}var ku=n("3h4Y");class Su extends S{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(e){super.next(this._value=e)}}class Tu extends d{constructor(e,t){super()}schedule(e,t=0){return this}}class Cu extends Tu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}class Ou extends Cu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}let Eu=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class Pu extends Eu{constructor(e,t=Eu.now){super(e,()=>Pu.delegate&&Pu.delegate!==this?Pu.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return Pu.delegate&&Pu.delegate!==this?Pu.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}class xu extends Pu{}const Ru=new xu(Ou),ju=new y(e=>e.complete());function Au(e){return e?function(e){return new y(t=>e.schedule(()=>t.complete()))}(e):ju}let Lu=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return Vc(this.value);case"E":return e=this.error,new y(t=>t.error(e));case"C":return Au()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();class Iu extends f{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Iu.dispatch,this.delay,new Du(e,this.destination)))}_next(e){this.scheduleMessage(Lu.createNext(e))}_error(e){this.scheduleMessage(Lu.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(Lu.createComplete()),this.unsubscribe()}}class Du{constructor(e,t){this.notification=e,this.destination=t}}class Mu extends S{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Nu(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new b;if(this.isStopped||this.hasError?o=d.EMPTY:(this.observers.push(e),o=new w(this,e)),r&&e.add(e=new Iu(e,r)),t)for(let s=0;s<i&&!e.closed;s++)e.next(n[s]);else for(let s=0;s<i&&!e.closed;s++)e.next(n[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||Ru).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r}}class Nu{constructor(e,t){this.time=e,this.value=t}}let Vu=(()=>{class e{constructor(e){this.http=e,this.baseUrl="environment.baseUrl",this.$localStreams=new Su({}),this.isAudioMuted=new Mu,this.isVideoMuted=new Mu,this.roomBroadcast=new Mu,this.localParticipantSubject=new Su({}),this.inviteeSubject=new Su({}),this.invitationDetails=new Su({}),this.activeRoomSubject=new Su({}),this.$roomsUpdated=this.roomBroadcast.asObservable()}getAuthToken(e,t){return wu(this,void 0,void 0,function*(){return t=`INVITEE, ${t}`,(yield this.http.get(`${this.baseUrl}communicator-service/api/v1/video/room/token?room=${e}&user=${t}`).toPromise()).token})}getAllRooms(){return this.http.get(`${this.baseUrl}communicator-service/api/v1/video/room/getAllRooms`).toPromise()}createRoom(e){return this.http.get(`${this.baseUrl}communicator-service/api/v1/video/room/create`,{params:{appointmentId:e}})}joinRoom(e,t,n){return wu(this,void 0,void 0,function*(){let r=null;try{const i=yield this.getAuthToken(e,t);r=yield Object(ku.connect)(i,{tracks:n,networkQuality:{local:2,remote:1},preferredVideoCodecs:["H264","VP8"]}),console.log("Local participants : "+r.localParticipant),this.localParticipantSubject.next(r.localParticipant)}catch(i){console.error(`Unable to connect to Room: ${i.message}`)}finally{r&&this.roomBroadcast.next(!0)}return r})}getParticipant(e){return this.http.get(`${this.baseUrl}communicator-service/api/v1/video/room/participants?appointmentId=${e}`)}getOnDemandParticipant(e){return this.http.get(`${this.baseUrl}communicator-service/api/v1/video/on-demand/room/participants?appointmentId=${e}`)}deleteAllParticipant(e){return this.http.delete(`${this.baseUrl}communicator-service/api/v1/video/room/participants?appointmentId=${e}`)}addParticipant(e){return this.inviteeSubject.next(e),this.http.post(`${this.baseUrl}communicator-service/api/v1/pusher/trigger`,e)}addOnDemandParticipant(e){return this.inviteeSubject.next(e),this.http.post(`${this.baseUrl}communicator-service/api/v1/pusher/on-demand/trigger`,e)}deleteParticipant(e){return this.http.put(this.baseUrl+"communicator-service/api/v1/pusher/trigger",e)}deleteOnDemandParticipant(e){return this.http.put(this.baseUrl+"communicator-service/api/v1/pusher/on-demand/trigger",e)}getAppointment(e){return this.http.get(`${this.baseUrl}communicator-service/api/v1/video/room/appointment/${e}`)}getOnDemandAppointment(e){return this.http.get(`${this.baseUrl}communicator-service/api/v1/video/on-demand/room/appointment/${e}`)}nudge(){this.roomBroadcast.next(!0)}setLocalStreams(e){return wu(this,void 0,void 0,function*(){this.$localStreams.next(e)})}postRequestOrCancel(e,t){return this.http.post(`${this.baseUrl}communicator-service/api/v1/pusher/trigger-patient-or-provider?event=${e}`,t)}}return e.\u0275fac=function(t){return new(t||e)(Bn(ou))},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Uu=(()=>{class e{constructor(){this.deviceBroadcast=new Mu,this.deviceGrantedStatus=new Su({}),navigator&&navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=e=>{this.deviceBroadcast.next(this.getDeviceOptions())}),this.$devicesUpdated=this.deviceBroadcast.asObservable(),this.deviceBroadcast.next(this.getDeviceOptions())}isGrantedMediaPermissions(){return wu(this,void 0,void 0,function*(){if(navigator&&navigator.permissions){let t="camera";try{const e=yield navigator.permissions.query({name:t});if(this.deviceGrantedStatus.next(e.state),e)return"granted"===e.state||(yield new Promise(t=>{e.onchange=e=>{"granted"===e.target.state&&t(!0)}}))}catch(e){return!0}}return!0})}getDeviceOptions(){return wu(this,void 0,void 0,function*(){const e=yield this.isGrantedMediaPermissions();if(navigator&&navigator.mediaDevices&&e){let e=yield this.tryGetDevices();return e.every(e=>!e.label)&&(e=yield this.tryGetDevices()),e}return null})}tryGetDevices(){return wu(this,void 0,void 0,function*(){const e=yield navigator.mediaDevices.enumerateDevices();return["audioinput","audiooutput","videoinput"].reduce((t,n)=>t[n]=e.filter(e=>e.kind===n),[])})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Fu extends f{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Hu extends f{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Bu(e,t,n,r,i=new Hu(e,n,r)){if(!i.closed)return t instanceof y?t.subscribe(i):I(t)(i)}const Wu={};class zu{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new qu(e,this.resultSelector))}}class qu extends Fu{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Wu),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(Bu(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===Wu?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const $u=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();function Gu(...e){return W(1)(Vc(...e))}function Qu(e){return new y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?M(n):Au()).subscribe(t)})}function Ku(e,t){return"function"==typeof t?n=>n.pipe(Ku((n,r)=>M(e(n,r)).pipe(O((e,i)=>t(n,e,r,i))))):t=>t.lift(new Yu(e))}class Yu{constructor(e){this.project=e}call(e,t){return t.subscribe(new Ju(e,this.project))}}class Ju extends V{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new N(this),r=this.destination;r.add(n),this.innerSubscription=U(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Zu=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function Xu(e){return t=>0===e?Au():t.lift(new el(e))}class el{constructor(e){if(this.total=e,this.total<0)throw new Zu}call(e,t){return t.subscribe(new tl(e,this.total))}}class tl extends f{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function nl(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new rl(e,t,n))}}class rl{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new il(e,this.accumulator,this.seed,this.hasSeed))}}class il extends f{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function ol(e){return function(t){const n=new sl(e),r=t.lift(n);return n.caught=r}}class sl{constructor(e){this.selector=e}call(e,t){return t.subscribe(new al(e,this.selector,this.caught))}}class al extends V{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new N(this);this.add(r);const i=U(n,r);i!==r&&this.add(i)}}}function cl(e){return function(t){return 0===e?Au():t.lift(new ul(e))}}class ul{constructor(e){if(this.total=e,this.total<0)throw new Zu}call(e,t){return t.subscribe(new ll(e,this.total))}}class ll extends f{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function dl(e=fl){return t=>t.lift(new hl(e))}class hl{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new pl(e,this.errorFactory))}}class pl extends f{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function fl(){return new $u}function ml(e=null){return t=>t.lift(new vl(e))}class vl{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new gl(e,this.defaultValue))}}class gl extends f{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function yl(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Fc((t,n)=>e(t,n,r)):g,Xu(1),n?ml(t):dl(()=>new $u))}function _l(){}function bl(e,t,n){return function(r){return r.lift(new wl(e,t,n))}}class wl{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new kl(e,this.nextOrObserver,this.error,this.complete))}}class kl extends f{constructor(e,t,n,i){super(e),this._tapNext=_l,this._tapError=_l,this._tapComplete=_l,this._tapError=n||_l,this._tapComplete=i||_l,r(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||_l,this._tapError=t.error||_l,this._tapComplete=t.complete||_l)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class Sl{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Tl(e,this.callback))}}class Tl extends f{constructor(e,t){super(e),this.add(new d(t))}}class Cl{constructor(e,t){this.id=e,this.url=t}}class Ol extends Cl{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class El extends Cl{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Pl extends Cl{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xl extends Cl{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rl extends Cl{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jl extends Cl{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Al extends Cl{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ll extends Cl{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Il extends Cl{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ml{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Nl{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vl{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ul{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hl{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Bl="primary";class Wl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function zl(e){return new Wl(e)}function ql(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function $l(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const t=r[o],n=e[o];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Gl(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ql(e[i],t[i]))return!1;return!0}function Ql(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function Kl(e){return Array.prototype.concat.apply([],e)}function Yl(e){return e.length>0?e[e.length-1]:null}function Jl(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Zl(e){return(t=e)&&"function"==typeof t.subscribe?e:eo(e)?M(Promise.resolve(e)):Vc(e);var t}function Xl(e,t,n){return n?function(e,t){return Gl(e,t)}(e.queryParams,t.queryParams)&&ed(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Ql(e[n],t[n]))}(e.queryParams,t.queryParams)&&td(e.root,t.root)}function ed(e,t){if(!sd(e.segments,t.segments))return!1;if(e.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children){if(!e.children[n])return!1;if(!ed(e.children[n],t.children[n]))return!1}return!0}function td(e,t){return nd(e,t,t.segments)}function nd(e,t,n){if(e.segments.length>n.length)return!!sd(e.segments.slice(0,n.length),n)&&!t.hasChildren();if(e.segments.length===n.length){if(!sd(e.segments,n))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!td(e.children[n],t.children[n]))return!1}return!0}{const r=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!!sd(e.segments,r)&&!!e.children.primary&&nd(e.children.primary,t,i)}}class rd{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zl(this.queryParams)),this._queryParamMap}toString(){return ud.serialize(this)}}class id{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Jl(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ld(this)}}class od{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=zl(this.parameters)),this._parameterMap}toString(){return gd(this)}}function sd(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class ad{}class cd{parse(e){const t=new kd(e);return new rd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${dd(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${pd(t)}=${pd(e)}`).join("&"):`${pd(t)}=${pd(n)}`});return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const ud=new cd;function ld(e){return e.segments.map(e=>gd(e)).join("/")}function dd(e,t){if(!e.hasChildren())return ld(e);if(t){const t=e.children.primary?dd(e.children.primary,!1):"",n=[];return Jl(e.children,(e,t)=>{t!==Bl&&n.push(`${t}:${dd(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return Jl(e.children,(e,r)=>{r===Bl&&(n=n.concat(t(e,r)))}),Jl(e.children,(e,r)=>{r!==Bl&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===Bl?[dd(e.children.primary,!1)]:[`${n}:${dd(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${ld(e)}/${t[0]}`:`${ld(e)}/(${t.join("//")})`}}function hd(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pd(e){return hd(e).replace(/%3B/gi,";")}function fd(e){return hd(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function md(e){return decodeURIComponent(e)}function vd(e){return md(e.replace(/\+/g,"%20"))}function gd(e){return`${fd(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${fd(e)}=${fd(t[e])}`).join("")}`;var t}const yd=/^[^\/()?;=#]+/;function _d(e){const t=e.match(yd);return t?t[0]:""}const bd=/^[^=?&#]+/,wd=/^[^?&#]+/;class kd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new id([],{}):new id([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new id(e,t)),n}parseSegment(){const e=_d(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new od(md(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=_d(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=_d(this.remaining);e&&(n=e,this.capture(n))}e[md(t)]=md(n)}parseQueryParam(e){const t=function(e){const t=e.match(bd);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(wd);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=vd(t),i=vd(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=_d(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Bl);const o=this.parseChildren();t[i]=1===Object.keys(o).length?o.primary:new id([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Sd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Td(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Td(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Cd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Cd(e,this._root).map(e=>e.value)}}function Td(e,t){if(e===t.value)return t;for(const n of t.children){const t=Td(e,n);if(t)return t}return null}function Cd(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Cd(e,n);if(r.length)return r.unshift(t),r}return[]}class Od{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ed(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Pd extends Sd{constructor(e,t){super(e),this.snapshot=t,Id(this,e)}toString(){return this.snapshot.toString()}}function xd(e,t){const n=function(e,t){const n=new Ad([],{},{},"",{},Bl,t,null,e.root,-1,{});return new Ld("",new Od(n,[]))}(e,t),r=new Su([new od("",{})]),i=new Su({}),o=new Su({}),s=new Su({}),a=new Su(""),c=new Rd(r,i,s,a,o,Bl,t,n.root);return c.snapshot=n.root,new Pd(new Od(c,[]),n)}class Rd{constructor(e,t,n,r,i,o,s,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(O(e=>zl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(O(e=>zl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function jd(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ad{constructor(e,t,n,r,i,o,s,a,c,u,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ld extends Sd{constructor(e,t){super(t),this.url=e,Id(this,t)}toString(){return Dd(this._root)}}function Id(e,t){t.value._routerState=e,t.children.forEach(t=>Id(e,t))}function Dd(e){const t=e.children.length>0?` { ${e.children.map(Dd).join(", ")} } `:"";return`${e.value}${t}`}function Md(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Gl(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Gl(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Gl(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Gl(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Nd(e,t){var n,r;return Gl(e.params,t.params)&&sd(n=e.url,r=t.url)&&n.every((e,t)=>Gl(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||Nd(e.parent,t.parent))}function Vd(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return Vd(e,t,r);return Vd(e,t)})}(e,t,n);return new Od(r,i)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return Ud(t,e),e}}const n=new Rd(new Su((r=t.value).url),new Su(r.params),new Su(r.queryParams),new Su(r.fragment),new Su(r.data),r.outlet,r.component,r),i=t.children.map(t=>Vd(e,t));return new Od(n,i)}var r}function Ud(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)Ud(e.children[n],t.children[n])}function Fd(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Hd(e){return"object"==typeof e&&null!=e&&e.outlets}function Bd(e,t,n,r,i){let o={};return r&&Jl(r,(e,t)=>{o[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new rd(n.root===e?t:Wd(n.root,e,t),o,i)}function Wd(e,t,n){const r={};return Jl(e.children,(e,i)=>{r[i]=e===t?n:Wd(e,t,n)}),new id(e.segments,r)}class zd{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Fd(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Hd);if(r&&r!==Yl(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qd{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function $d(e,t,n){if(e||(e=new id([],{})),0===e.segments.length&&e.hasChildren())return Gd(e,t,n);const r=function(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const t=e.segments[i],s=n[r];if(Hd(s))break;const a=`${s}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&c&&"object"==typeof c&&void 0===c.outlets){if(!Jd(a,c,t))return o;r+=2}else{if(!Jd(a,{},t))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new id(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new id(e.segments.slice(r.pathIndex),e.children),Gd(t,0,i)}return r.match&&0===i.length?new id(e.segments,{}):r.match&&!e.hasChildren()?Qd(e,t,n):r.match?Gd(e,0,i):Qd(e,t,n)}function Gd(e,t,n){if(0===n.length)return new id(e.segments,{});{const r=function(e){return Hd(e[0])?e[0].outlets:{[Bl]:e}}(n),i={};return Jl(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=$d(e.children[r],t,n))}),Jl(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new id(e.segments,i)}}function Qd(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const o=n[i];if(Hd(o)){const e=Kd(o.outlets);return new id(r,e)}if(0===i&&Fd(n[0])){r.push(new od(e.segments[t].path,Yd(n[0]))),i++;continue}const s=Hd(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Fd(a)?(r.push(new od(s,Yd(a))),i+=2):(r.push(new od(s,{})),i++)}return new id(r,{})}function Kd(e){const t={};return Jl(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=Qd(new id([],{}),0,e))}),t}function Yd(e){const t={};return Jl(e,(e,n)=>t[n]=`${e}`),t}function Jd(e,t,n){return e==n.path&&Gl(t,n.parameters)}class Zd{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Md(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Ed(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),Jl(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=Ed(e);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=Ed(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Fl(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Vl(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(Md(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Xd(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function Xd(e){Md(e.value),e.children.forEach(Xd)}class eh{constructor(e,t){this.routes=e,this.module=t}}function th(e){return"function"==typeof e}function nh(e){return e instanceof rd}const rh=Symbol("INITIAL_VALUE");function ih(){return Ku(e=>function(...e){let t,n;return C(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&c(e[0])&&(e=e[0]),z(e,n).lift(new zu(t))}(e.map(e=>e.pipe(Xu(1),function(...e){const t=e[e.length-1];return C(t)?(e.pop(),n=>Gu(e,n,t)):t=>Gu(e,t)}(rh)))).pipe(nl((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==rh)return e;if(r===rh&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||nh(r))return r}return e},e)},rh),Fc(e=>e!==rh),O(e=>nh(e)?e:!0===e),Xu(1)))}let oh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ve({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&Zi(0,"router-outlet")},directives:function(){return[Jh]},encapsulation:2}),e})();function sh(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];ah(r,ch(t,r))}}function ah(e,t){e.children&&sh(e.children,t)}function ch(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function uh(e){const t=e.children&&e.children.map(uh),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Bl&&(n.component=oh),n}function lh(e){return e.outlet||Bl}function dh(e,t){const n=e.filter(e=>lh(e)===t);return n.push(...e.filter(e=>lh(e)!==t)),n}const hh={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ph(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},hh):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||$l)(n,e,t);if(!i)return Object.assign({},hh);const o={};Jl(i.posParams,(e,t)=>{o[t]=e.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function fh(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>mh(e,t,n)&&lh(n)!==Bl)}(e,n,r)){const i=new id(t,function(e,t,n,r){const i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&lh(o)!==Bl){const n=new id([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[lh(o)]=n}return i}(e,t,r,new id(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>mh(e,t,n))}(e,n,r)){const o=new id(e.segments,function(e,t,n,r,i,o){const s={};for(const a of r)if(mh(e,n,a)&&!i[lh(a)]){const n=new id([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[lh(a)]=n}return Object.assign(Object.assign({},i),s)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}const o=new id(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function mh(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function vh(e,t,n,r){return!!(lh(e)===r||r!==Bl&&mh(t,n,e))&&("**"===e.path||ph(t,e,n).matched)}function gh(e,t,n){return 0===t.length&&!e.children[n]}class yh{constructor(e){this.segmentGroup=e||null}}class _h{constructor(e){this.urlTree=e}}function bh(e){return new y(t=>t.error(new yh(e)))}function wh(e){return new y(t=>t.error(new _h(e)))}function kh(e){return new y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Sh{constructor(e,t,n,r,i){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(ns)}apply(){const e=fh(this.urlTree.root,[],[],this.config).segmentGroup,t=new id(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Bl).pipe(O(e=>this.createUrlTree(Th(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ol(e=>{if(e instanceof _h)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof yh)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Bl).pipe(O(t=>this.createUrlTree(Th(t),e.queryParams,e.fragment))).pipe(ol(e=>{if(e instanceof yh)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new id([],{[Bl]:e}):e;return new rd(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(O(e=>new id([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return M(r).pipe(Uc(r=>{const i=n.children[r],o=dh(t,r);return this.expandSegmentGroup(e,o,i,r).pipe(O(e=>({segment:e,outlet:r})))}),nl((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Fc((t,n)=>e(t,n,r)):g,cl(1),n?ml(t):dl(()=>new $u))}())}expandSegment(e,t,n,r,i,o){return M(n).pipe(Uc(s=>this.expandSegmentAgainstRoute(e,t,n,s,r,i,o).pipe(ol(e=>{if(e instanceof yh)return Vc(null);throw e}))),yl(e=>!!e),ol((e,n)=>{if(e instanceof $u||"EmptyError"===e.name){if(gh(t,r,i))return Vc(new id([],{}));throw new yh(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,i,o,s){return vh(r,t,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o):bh(t):bh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?wh(i):this.lineralizeSegments(n,i).pipe(F(n=>{const i=new id(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:c,positionalParamSegments:u}=ph(t,r,i);if(!s)return bh(t);const l=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?wh(l):this.lineralizeSegments(r,l).pipe(F(r=>this.expandSegment(e,t,n,r.concat(i.slice(c)),o,!1)))}matchSegmentAgainstRoute(e,t,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Vc(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe(O(e=>(n._loadedConfig=e,new id(r,{})))):Vc(new id(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=ph(t,n,r);if(!o)return bh(t);const c=r.slice(a);return this.getChildConfig(e,n,r).pipe(F(e=>{const r=e.module,o=e.routes,{segmentGroup:a,slicedSegments:u}=fh(t,s,c,o),l=new id(a.segments,a.children);if(0===u.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(O(e=>new id(s,e)));if(0===o.length&&0===u.length)return Vc(new id(s,{}));const d=lh(n)===i;return this.expandSegment(r,l,o,u,d?Bl:i,!0).pipe(O(e=>new id(s.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?Vc(new eh(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Vc(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe(F(n=>n?this.configLoader.load(e.injector,t).pipe(O(e=>(t._loadedConfig=e,e))):function(e){return new y(t=>t.error(ql(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):Vc(new eh([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;return r&&0!==r.length?Vc(r.map(r=>{const i=e.get(r);let o;if(function(e){return e&&th(e.canLoad)}(i))o=i.canLoad(t,n);else{if(!th(i))throw new Error("Invalid CanLoad guard");o=i(t,n)}return Zl(o)})).pipe(ih(),bl(e=>{if(!nh(e))return;const t=ql(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),O(e=>!0===e)):Vc(!0)}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Vc(n);if(r.numberOfChildren>1||!r.children.primary)return kh(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new rd(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Jl(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let o={};return Jl(t.children,(t,i)=>{o[i]=this.createSegmentGroup(e,t,n,r)}),new id(i,o)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function Th(e){const t={};for(const n of Object.keys(e.children)){const r=Th(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new id(e.segments.concat(t.segments),t.children)}return e}(new id(e.segments,t))}class Ch{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Oh{constructor(e,t){this.component=e,this.route=t}}function Eh(e,t,n){const r=e._root;return xh(r,t?t._root:null,n,[r.value])}function Ph(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function xh(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ed(t);return e.children.forEach(e=>{!function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!sd(e.url,t.url);case"pathParamsOrQueryParamsChange":return!sd(e.url,t.url)||!Gl(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nd(e,t)||!Gl(e.queryParams,t.queryParams);case"paramsChange":default:return!Nd(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ch(r)):(o.data=s.data,o._resolvedData=s._resolvedData),xh(e,t,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Oh(a.outlet.component,s))}else s&&Rh(t,a,i),i.canActivateChecks.push(new Ch(r)),xh(e,null,o.component?a?a.children:null:n,r,i)}(e,o[e.value.outlet],n,r.concat([e.value]),i),delete o[e.value.outlet]}),Jl(o,(e,t)=>Rh(e,n.getContext(t),i)),i}function Rh(e,t,n){const r=Ed(e),i=e.value;Jl(r,(e,r)=>{Rh(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Oh(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class jh{}function Ah(e){return new y(t=>t.error(e))}class Lh{constructor(e,t,n,r,i,o){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const e=fh(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Bl);if(null===t)return null;const n=new Ad([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Bl,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Od(n,t),i=new Ld(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,n=jd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const i of Object.keys(t.children)){const r=t.children[i],o=dh(e,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Dh(n);return r.sort((e,t)=>e.value.outlet===Bl?-1:t.value.outlet===Bl?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const i of e){const e=this.processSegmentAgainstRoute(i,t,n,r);if(null!==e)return e}return gh(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!vh(e,t,n,r))return null;let i,o=[],s=[];if("**"===e.path){const r=n.length>0?Yl(n).parameters:{};i=new Ad(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vh(e),lh(e),e.component,e,Mh(t),Nh(t)+n.length,Uh(e))}else{const r=ph(t,e,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Ad(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vh(e),lh(e),e.component,e,Mh(t),Nh(t)+o.length,Uh(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=fh(t,o,s,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const e=this.processChildren(a,c);return null===e?null:[new Od(i,e)]}if(0===a.length&&0===u.length)return[new Od(i,[])];const l=lh(e)===r,d=this.processSegment(a,c,u,l?Bl:r);return null===d?null:[new Od(i,d)]}}function Ih(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Dh(e){const t=[],n=new Set;for(const r of e){if(!Ih(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=Dh(r.children);t.push(new Od(r.value,e))}return t.filter(e=>!n.has(e))}function Mh(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Nh(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Vh(e){return e.data||{}}function Uh(e){return e.resolve||{}}function Fh(e){return Ku(t=>{const n=e(t);return n?M(n).pipe(O(()=>t)):Vc(t)})}class Hh extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Bh=new Pn("ROUTES");class Wh{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe(O(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new eh(Kl(r.injector.get(Bh,void 0,ve.Self|ve.Optional)).map(uh),r)}),ol(e=>{throw t._loader$=void 0,e}));return t._loader$=new Q(n,()=>new S).pipe(q()),t._loader$}loadModuleFactory(e){return"string"==typeof e?M(this.loader.load(e)):Zl(e()).pipe(F(e=>e instanceof rs?Vc(e):M(this.compiler.compileModuleAsync(e))))}}class zh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new qh,this.attachRef=null}}class qh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new zh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class $h{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Gh(e){throw e}function Qh(e,t,n){return t.parse("/")}function Kh(e,t){return Vc(null)}let Yh=(()=>{class e{constructor(e,t,n,r,i,o,s,a){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new S,this.errorHandler=Gh,this.malformedUriErrorHandler=Qh,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Kh,afterPreactivation:Kh},this.urlHandlingStrategy=new $h,this.routeReuseStrategy=new Hh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=i.get(ns),this.console=i.get(Ws);const c=i.get(na);this.isNgZoneEnabled=c instanceof na&&na.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new rd(new id([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Wh(o,s,e=>this.triggerEvent(new Dl(e)),e=>this.triggerEvent(new Ml(e))),this.routerState=xd(this.currentUrlTree,this.rootComponentType),this.transitions=new Su({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Fc(e=>0!==e.id),O(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Ku(e=>{let n=!1,r=!1;return Vc(e).pipe(bl(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ku(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Vc(e).pipe(Ku(e=>{const n=this.transitions.getValue();return t.next(new Ol(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?ju:Promise.resolve(e)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Ku(e=>function(e,t,n,r,i){return new Sh(e,t,n,r,i).apply()}(r,i,o,e.extractedUrl,s).pipe(O(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),bl(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return F(o=>function(e,t,n,r,i="emptyOnly",o="legacy"){try{const s=new Lh(e,t,n,r,i,o).recognize();return null===s?Ah(new jh):Vc(s)}catch(s){return Ah(s)}}(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(O(e=>Object.assign(Object.assign({},o),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),bl(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects);const n=new Rl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=e,a=new Ol(n,this.serializeUrl(r),i,o);t.next(a);const c=xd(r,this.rootComponentType).snapshot;return Vc(Object.assign(Object.assign({},e),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),ju}),Fh(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),bl(e=>{const t=new jl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),O(e=>Object.assign(Object.assign({},e),{guards:Eh(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return F(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Vc(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return M(e).pipe(F(e=>function(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Vc(o.map(o=>{const s=Ph(o,t,i);let a;if(function(e){return e&&th(e.canDeactivate)}(s))a=Zl(s.canDeactivate(e,t,n,r));else{if(!th(s))throw new Error("Invalid CanDeactivate guard");a=Zl(s(e,t,n,r))}return a.pipe(yl())})).pipe(ih()):Vc(!0)}(e.component,e.route,n,t,r)),yl(e=>!0!==e,!0))}(s,r,i,e).pipe(F(n=>n&&"boolean"==typeof n?function(e,t,n,r){return M(t).pipe(Uc(t=>Gu(function(e,t){return null!==e&&t&&t(new Nl(e)),Vc(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new Ul(e)),Vc(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>Qu(()=>Vc(t.guards.map(i=>{const o=Ph(i,t.node,n);let s;if(function(e){return e&&th(e.canActivateChild)}(o))s=Zl(o.canActivateChild(r,e));else{if(!th(o))throw new Error("Invalid CanActivateChild guard");s=Zl(o(r,e))}return s.pipe(yl())})).pipe(ih())));return Vc(i).pipe(ih())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?Vc(r.map(r=>Qu(()=>{const i=Ph(r,t,n);let o;if(function(e){return e&&th(e.canActivate)}(i))o=Zl(i.canActivate(t,e));else{if(!th(i))throw new Error("Invalid CanActivate guard");o=Zl(i(t,e))}return o.pipe(yl())}))).pipe(ih()):Vc(!0)}(e,t.route,n))),yl(e=>!0!==e,!0))}(r,o,e,t):Vc(n)),O(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),bl(e=>{if(nh(e.guardsResult)){const t=ql(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new Al(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Fc(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Pl(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(n),e.resolve(!1),!1}return!0}),Fh(e=>{if(e.guards.canActivateChecks.length)return Vc(e).pipe(bl(e=>{const t=new Ll(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),Ku(e=>{let n=!1;return Vc(e).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,F(e=>{const{targetSnapshot:t,guards:{canActivateChecks:n}}=e;if(!n.length)return Vc(e);let o=0;return M(n).pipe(Uc(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return Vc({});const o={};return M(i).pipe(F(i=>function(e,t,n,r){const i=Ph(e,t,r);return Zl(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe(bl(e=>{o[i]=e}))),cl(1),F(()=>Object.keys(o).length===i.length?Vc(o):ju))}(e._resolve,e,t,r).pipe(O(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),jd(e,n).resolve),null)))}(e.route,t,r,i)),bl(()=>o++),cl(1),F(t=>o===n.length?Vc(e):ju))})),bl({next:()=>n=!0,complete:()=>{if(!n){const n=new Pl(e.id,this.serializeUrl(e.extractedUrl),"At least one route resolver didn't emit any value.");t.next(n),e.resolve(!1)}}}));var r,i}),bl(e=>{const t=new Il(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),Fh(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),O(e=>{const t=function(e,t,n){const r=Vd(e,t._root,n?n._root:void 0);return new Pd(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),bl(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=e=>this.triggerEvent(e),O(e=>(new Zd(s,e.targetRouterState,e.currentRouterState,a).activate(o),e))),bl({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Pl(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}this.currentNavigation=null},e=>e.lift(new Sl(i))),ol(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=nh(n.url);r||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new Pl(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new xl(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(o){e.reject(o)}}var i;return ju}));var i,o,s,a}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){sh(e),this.config=e.map(uh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=t,a=n||this.routerState.root,c=s?this.currentUrlTree.fragment:i;let u=null;switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,n,r,i){if(0===n.length)return Bd(t.root,t.root,t,r,i);const o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new zd(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return Jl(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new zd(n,t,r)}(n);if(o.toRoot())return Bd(t.root,new id([],{}),t,r,i);const s=function(e,t,n){if(e.isAbsolute)return new qd(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new qd(e,e===t.root,0)}const r=Fd(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new qd(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(o,t,e),a=s.processChildren?Gd(s.segmentGroup,s.index,o.commands):$d(s.segmentGroup,s.index,o.commands);return Bd(s.segmentGroup,a,t,r,i)}(a,this.currentUrlTree,e,u,c)}navigateByUrl(e,t={skipLocationChange:!1}){const n=nh(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(nh(e))return Xl(this.currentUrlTree,e,t);const n=this.parseUrl(e);return Xl(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new El(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==t&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===e.toString();if(s&&a)return Promise.resolve(!0);let c,u,l;i?(c=i.resolve,u=i.reject,l=i.promise):l=new Promise((e,t)=>{c=e,u=t});const d=++this.navigationId;return this.setTransition({id:d,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n,r){const i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return e.\u0275fac=function(t){return new(t||e)(Bn(Rn),Bn(ad),Bn(qh),Bn(Ka),Bn(Fi),Bn(Ta),Bn(Xs),Bn(void 0))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),Jh=(()=>{class e{constructor(e,t,n,r,i){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new ws,this.deactivateEvents=new ws,this.name=r||Bl,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Zh(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(Gi(qh),Gi(os),Gi(go),("name",function(e,t){const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(Xt(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(Tt(),"name")),Gi(Go))},e.\u0275dir=ze({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class Zh{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Rd?this.route:e===qh?this.childContexts:this.parent.get(e,t)}}class Xh{}class ep{preload(e,t){return Vc(null)}}let tp=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new Wh(t,n,t=>e.triggerEvent(new Dl(t)),t=>e.triggerEvent(new Ml(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Fc(e=>e instanceof El),Uc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(ns);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return M(n).pipe(W(),O(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?Vc(t._loadedConfig):this.loader.load(e.injector,t)).pipe(F(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(Bn(Yh),Bn(Ta),Bn(Xs),Bn(Fi),Bn(Xh))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),np=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Ol?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof El&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Hl&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Hl(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Bn(Yh),Bn(sc),Bn(void 0))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const rp=new Pn("ROUTER_CONFIGURATION"),ip=new Pn("ROUTER_FORROOT_GUARD"),op=[Ka,{provide:ad,useClass:cd},{provide:Yh,useFactory:function(e,t,n,r,i,o,s,a={},c,u){const l=new Yh(null,e,t,n,r,i,o,Kl(s));if(c&&(l.urlHandlingStrategy=c),u&&(l.routeReuseStrategy=u),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,l),a.enableTracing){const e=La();l.events.subscribe(t=>{e.logGroup(`Router Event: ${t.constructor.name}`),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return l},deps:[ad,qh,Ka,Fi,Ta,Xs,Bh,rp,[class{},new $n],[class{},new $n]]},qh,{provide:Rd,useFactory:function(e){return e.routerState.root},deps:[Yh]},{provide:Ta,useClass:Ea},tp,ep,class{preload(e,t){return t().pipe(ol(()=>Vc(null)))}},{provide:rp,useValue:{enableTracing:!1}}];function sp(){return new ga("Router",Yh)}let ap=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[op,dp(t),{provide:ip,useFactory:lp,deps:[[Yh,new $n,new Gn]]},{provide:rp,useValue:n||{}},{provide:za,useFactory:up,deps:[Da,[new qn($a),new $n],rp]},{provide:np,useFactory:cp,deps:[Yh,sc,rp]},{provide:Xh,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ep},{provide:ga,multi:!0,useFactory:sp},[hp,{provide:Ds,multi:!0,useFactory:pp,deps:[hp]},{provide:mp,useFactory:fp,deps:[hp]},{provide:Bs,multi:!0,useExisting:mp}]]}}static forChild(t){return{ngModule:e,providers:[dp(t)]}}}return e.\u0275fac=function(t){return new(t||e)(Bn(ip,8),Bn(Yh,8))},e.\u0275mod=Be({type:e}),e.\u0275inj=ce({}),e})();function cp(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new np(e,t,n)}function up(e,t,n={}){return n.useHash?new Qa(e,t):new Ga(e,t)}function lp(e){return"guarded"}function dp(e){return[{provide:xn,multi:!0,useValue:e},{provide:Bh,multi:!0,useValue:e}]}let hp=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new S}appInitializer(){return this.injector.get(Na,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Yh),r=this.injector.get(rp);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Vc(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(rp),n=this.injector.get(tp),r=this.injector.get(np),i=this.injector.get(Yh),o=this.injector.get(ka);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return e.\u0275fac=function(t){return new(t||e)(Bn(Fi))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();function pp(e){return e.appInitializer.bind(e)}function fp(e){return e.bootstrapListener.bind(e)}const mp=new Pn("Router Initializer"),vp=["preview"];function gp(e,t){1&e&&Zi(0,"div")}let yp=(()=>{class e{constructor(e,t,n,r){this.renderer=e,this.videoChatService=t,this.deviceService=n,this.router=r,this.deviceInitialized=new ws,this.isMuted=!1,this.isVideoMuted=!1,this.showTooltip=!1,this.isInitializing=!0,this.localTracks=[]}get tracks(){return this.localTracks}ngAfterViewInit(){return wu(this,void 0,void 0,function*(){this.previewElement&&this.previewElement.nativeElement&&(this.deviceService.deviceGrantedStatus.subscribe(e=>{this.showTooltip="granted"!==e}),yield this.initializeDevice())})}initializePreview(e){e?this.initializeDevice(e.kind,e.deviceId):this.initializeDevice()}finalizePreview(){try{this.videoTrack&&this.videoTrack.detach().forEach(e=>e.remove())}catch(e){console.error(e)}}initializeDevice(e,t){return wu(this,void 0,void 0,function*(){try{this.isInitializing=!0,this.finalizePreview(),e&&t?this.initializeTracks(e,t).then(e=>{this.renderLocalTracks(e),this.deviceInitialized.emit(!0)},e=>{this.deviceInitialized.emit(!1)}):this.initializeTracks().then(e=>{console.log("res   ",e),this.renderLocalTracks(e),this.deviceInitialized.emit(!0)},e=>{this.deviceInitialized.emit(!1)})}finally{}})}initializeTracks(e,t){if(e)switch(e){case"audioinput":return Object(ku.createLocalTracks)({audio:{deviceId:t},video:!0});case"videoinput":return Object(ku.createLocalTracks)({audio:!0,video:{deviceId:t}})}return Object(ku.createLocalTracks)({audio:!0,video:{width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}})}renderLocalTracks(e){this.localTracks=e,this.videoTrack=this.localTracks.find(e=>"video"===e.kind);const t=this.videoTrack.attach();this.renderer.setStyle(t,"width","100%"),this.renderer.appendChild(this.previewElement.nativeElement,t),this.isInitializing=!1}audioToggle(){var e=this;this.videoChatService.localParticipantSubject.subscribe(t=>{console.log("original",t),t.audioTracks.forEach(0==e.isMuted?function(t){console.log("track is",t),t.track.disable(),e.isMuted=!0}:function(t){console.log("track is",t),t.track.enable(),e.isMuted=!1})})}videoToggle(){var e=this;this.videoChatService.localParticipantSubject.subscribe(t=>{console.log("original",t),t.videoTracks.forEach(0==e.isVideoMuted?function(t){console.log("track is",t),t.track.disable(),e.isVideoMuted=!0}:function(t){console.log("track is",t),t.track.enable(),e.isVideoMuted=!1})})}}return e.\u0275fac=function(t){return new(t||e)(Gi(To),Gi(Vu),Gi(Uu),Gi(Yh))},e.\u0275cmp=Ve({type:e,selectors:[["lib-camera"]],viewQuery:function(e,t){if(1&e&&function(e,t,n){const r=kt();r.firstCreatePass&&(function(e,t,n){null===e.queries&&(e.queries=new Es),e.queries.track(new Ps(t,-1))}(r,new Os(e,t,n)),2==(2&t)&&(r.staticViewQueries=!0)),function(e,t,n){const r=new Ss(4==(4&n));Zr(e,t,r,r.destroy),null===t[19]&&(t[19]=new Cs),t[19].queries.push(new Ts(r))}(r,wt(),t)}(vp,1),2&e){let e;Ls((n=wt(),r=At(),e=n[19].queries[r].queryList))&&(t.previewElement=e.first)}var n,r},outputs:{deviceInitialized:"deviceInitialized"},decls:3,vars:1,consts:[["id","preview",1,"camera-preview"],["preview",""],[4,"ngIf"]],template:function(e,t){1&e&&(Yi(0,"div",0,1),$i(2,gp,1,0,"div",2),Ji()),2&e&&(Vr(2),Qi("ngIf",t.isInitializing))},directives:[nc],styles:[".camera-preview[_ngcontent-%COMP%]{display:flex;justify-content:center;width:40%}"]}),e})(),_p=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ve({type:e,selectors:[["lib-waiting-room"]],decls:2,vars:0,consts:[[1,"waiting-room"],[2,"display","flex","justify-content","center","margin-top","5rem"]],template:function(e,t){1&e&&(Yi(0,"div",0),Zi(1,"lib-camera",1),Ji())},directives:[yp],styles:[".waiting-room[_ngcontent-%COMP%]{height:90vh;padding:1rem;background-image:linear-gradient(to bottom right,#dae6f3,#5e7792)}"]}),e})(),bp=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ve({type:e,selectors:[["lib-twilio-video"]],decls:3,vars:0,template:function(e,t){1&e&&(Yi(0,"p"),oo(1," twilio-video works! "),Zi(2,"lib-waiting-room"),Ji())},directives:[_p],encapsulation:2}),e})();const wp=[];let kp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Be({type:e}),e.\u0275inj=ce({imports:[[ap.forChild(wp)],ap]}),e})(),Sp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Be({type:e}),e.\u0275inj=ce({imports:[[oc,kp]]}),e})(),Tp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Be({type:e}),e.\u0275inj=ce({imports:[[Sp]]}),e})();const Cp=[];let Op=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Be({type:e}),e.\u0275inj=ce({imports:[[ap.forRoot(Cp)],ap]}),e})();function Ep(e,t){if(1&e){const e=Xi();Yi(0,"div",3),Yi(1,"h1"),oo(2,"Visit Twilio Video..."),Ji(),Yi(3,"button",4),to("click",function(){return St(e),io().onVisitTwilioVideo()}),oo(4,"Visit"),Ji(),Ji()}}function Pp(e,t){if(1&e){const e=Xi();Yi(0,"div",5),Zi(1,"lib-twilio-video",6),Yi(2,"button",4),to("click",function(){return St(e),io().onVisitTwilioVideo()}),oo(3,"Proceed"),Ji(),Ji()}}let xp=(()=>{class e{constructor(e){this.route=e,this.title="module-md-dev",this.isTwilioView=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{console.error(" params in client app on init ",e)})}onVisitTwilioVideo(){this.isTwilioView=!this.isTwilioView}ngAfterViewInit(){return wu(this,void 0,void 0,function*(){this.route.queryParams.subscribe(e=>{console.error(" params in client app ",e)})})}}return e.\u0275fac=function(t){return new(t||e)(Gi(Rd))},e.\u0275cmp=Ve({type:e,selectors:[["app-root"]],decls:3,vars:2,consts:[[1,"panel"],["class","panel-notification-container",4,"ngIf"],["class","panel-video-container",4,"ngIf"],[1,"panel-notification-container"],[1,"button","button1",3,"click"],[1,"panel-video-container"],["host",""]],template:function(e,t){1&e&&(Yi(0,"div",0),$i(1,Ep,5,0,"div",1),$i(2,Pp,4,0,"div",2),Ji()),2&e&&(Vr(1),Qi("ngIf",!t.isTwilioView),Vr(1),Qi("ngIf",t.isTwilioView))},directives:[nc,bp],styles:[".panel[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:90vh;width:100%}.panel-notification-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.panel-video-container[_ngcontent-%COMP%]{width:100%}.button[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:2px solid #555;padding:16px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;transition-duration:.5s;cursor:pointer;border-radius:1rem}.button[_ngcontent-%COMP%]:hover{background-color:#555;color:#fff}"]}),e})(),Rp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Be({type:e,bootstrap:[xp]}),e.\u0275inj=ce({providers:[],imports:[[Nc,Op,Tp,bu]]}),e})();(function(){if(ma)throw new Error("Cannot enable prod mode after platform setup.");fa=!1})(),Dc().bootstrapModule(Rp).catch(e=>console.error(e))},zYCr:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return Object.defineProperties(i,{bytesSent:{value:"number"==typeof n.bytesSent?n.bytesSent:r?0:null,enumerable:!0},packetsSent:{value:"number"==typeof n.packetsSent?n.packetsSent:r?0:null,enumerable:!0},roundTripTime:{value:"number"==typeof n.roundTripTime?n.roundTripTime:r?0:null,enumerable:!0}}),i}return i(t,e),t}(n("0iCT"));e.exports=o},zbom:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("+qE3"),s=0,a=function(e){function t(t,n,r){var i=e.call(this)||this;return Object.defineProperties(i,{_instanceId:{value:s++},channel:{value:n},_log:{value:r.log.createLog("default",i)},_getReceiver:{value:t},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),i}return i(t,e),Object.defineProperty(t.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},t.prototype.setup=function(e){var t=this;this._teardown(),this._log.info("setting up msp transport for id:",e);var n=this._getReceiver(e).then(function(e){if("data"!==e.kind&&t._log.error("Expected a DataTrackReceiver"),t._receiverPromise===n){try{t._transport=e.toDataTransport(),t.emit("ready",t._transport)}catch(r){t._log.error("Failed to toDataTransport: "+r.message)}e.once("close",function(){return t._teardown()})}});this._receiverPromise=n},t.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},t}(o);e.exports=a},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);